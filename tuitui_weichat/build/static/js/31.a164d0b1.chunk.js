(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1023:function(e,a,t){"use strict";t.r(a);var n=t(10),l=t(41),o=t.n(l),c=t(69),r=t(44),i=t(45),s=t(48),m=t(46),p=t(47),u=t(0),d=t.n(u),f=t(266),g=t(88),E=t(874),h=t(105),v=t(806),b=t(17),M=t(28),y=t(802),k=t(801),w=t(838),C=t(132),I=t(83),S=t(836),N=t(827),T=t(850),O=t(95),_=function(e){var a=e.selectGonghaoModal,t=e.allCodes,n=e.code,l=e.confirmSelect,o=e.closeSelectModal;return d.a.createElement(O.a,{width:1e3,visible:a,maskClosable:!1,closable:!1,mask:!1,footer:d.a.createElement(h.a,{type:"primary",disabled:!n,onClick:o},"\u786e\u5b9a")},d.a.createElement(S.a.Group,{value:n,style:{width:"100%"},onChange:function(e){return l(e.target.value,n)}},d.a.createElement(C.a,null,t.map(function(e){return d.a.createElement(I.a,{span:4,key:e._id},d.a.createElement(S.a,{value:e.code},e.nick_name))}))))},j=t(277),L=t(830),x=t(809),G=t.n(x),A=(t(828),t(985),E.a.Option),P=["#000","#CF021B","#F5A623","#3BA6FF","#BD10E0","#999"],z={width:20,height:20,marginLeft:10,display:"inline-block",marginTop:5},B=function(e){function a(){return Object(r.a)(this,a),Object(s.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(p.a)(a,e),Object(i.a)(a,[{key:"componentWillMount",value:function(){var e=Object(c.a)(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.getAllCodes(),a=this.props.location.query,e.t0=a,!e.t0){e.next=6;break}return e.next=6,this.props.initMessageInfo(a);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,a=this.props,t=a.openSelectModal,l=a.messageInfo,o=a.changeMessageInfo,c=a.selectGonghaoModal,r=a.allCodes,i=a.openEditModal,s=a.templateList,m=a.templateInfo,p=a.templateModalVisible,u=a.changeTemplate,f=a.history,g=a.submitMessage,j=a.confirmSelect,x=a.closeSelectModal,B=a.openPreviewModal,F=a.closePreviewModal,V=a.openid,q=a.changeOpenId,J=a.previewModal,R=a.preview,W=this.props,D=W.content,H=W.closeTemplateModal,U=W.saveTemplateModal,K=W.editTemplate,Q=d.a.createElement("div",{style:{overflow:"hidden",lineHeight:1.5}},d.a.createElement("div",{className:"fl"},P.map(function(e){return d.a.createElement("span",{className:"cursor",style:Object(n.a)({},z,{background:e}),key:e,onClick:function(){return K("color",e)}})})),d.a.createElement(h.a,{type:"primary",className:"fr",onClick:U},"\u4fdd\u5b58")),X=[],Y=function(e){var a=l.content[e];"first"===e?X.unshift(d.a.createElement(v.a.Item,{label:m.data.first.pre||"",key:"first"},d.a.createElement("span",{className:"mr5"},a.value),d.a.createElement(b.a,{className:"cursor",onClick:function(){return i(e,a)},type:"edit"}))):X.push(d.a.createElement(v.a.Item,{label:m.data[e].pre||"",key:e},d.a.createElement("span",{className:"mr5"},a.value),d.a.createElement(b.a,{className:"cursor",onClick:function(){return i(e,a)},type:"edit"})))};for(var Z in m.data)Y(Z);return c&&(e=d.a.createElement(_,{code:l.code,confirmSelect:j,closeSelectModal:x,allCodes:r,selectGonghaoModal:c})),d.a.createElement(M.a,{locale:L.a},d.a.createElement("div",{className:"container edit-message"},d.a.createElement(v.a,Object.assign({className:"kefu-form"},{labelCol:{sm:{span:4}},wrapperCol:{sm:{span:20,offset:0}}},{style:{width:520}}),d.a.createElement(v.a.Item,{label:"\u9009\u62e9\u516c\u53f7"},d.a.createElement(y.a,{onClick:t,className:"cursor",shape:"square",icon:"user"})),d.a.createElement(v.a.Item,{label:"\u6d88\u606f\u540d\u79f0"},d.a.createElement(k.a,{value:l.name,onChange:function(e){return o("name",e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u6d88\u606f\u540d\u79f0,(\u4ec5\u4f9b\u5907\u6ce8\uff0c\u4e0d\u4f1a\u53d1\u9001\u7ed9\u7c89\u4e1d)"})),d.a.createElement(w.a,{style:{width:"175%",marginLeft:-50}}),d.a.createElement("h2",{className:"block-title"},"\u8bbe\u7f6e\u6a21\u677f\u6d88\u606f"),d.a.createElement(v.a.Item,{label:"\u9009\u62e9\u6a21\u677f"},d.a.createElement(E.a,{value:l.templateId,onChange:u},s.map(function(e){return d.a.createElement(A,{value:e.template_id,key:e.template_id},e.title)}))),d.a.createElement(C.a,{className:"template-wrapper"},d.a.createElement(I.a,{span:4}),d.a.createElement(I.a,{span:20},d.a.createElement("div",{className:"message-block"},X))),d.a.createElement(v.a.Item,{label:"\u70b9\u51fb\u8df3\u8f6c"},d.a.createElement(k.a,{value:l.url,placeholder:"\u8f93\u5165\u8df3\u8f6c\u94fe\u63a5\uff0c\u4e14\u5fc5\u987b\u4ee5http://\u6216https://\u5f00\u5934",onChange:function(e){return o("url",e.target.value)}})),d.a.createElement(w.a,{style:{width:"175%",marginLeft:-50}}),d.a.createElement("h2",{className:"block-title"},"\u9009\u62e9\u7fa4\u53d1\u5bf9\u8c61"),d.a.createElement(v.a.Item,{label:"\u7fa4\u53d1\u7c89\u4e1d"},d.a.createElement(S.a.Group,{value:l.sex,onChange:function(e){return o("sex",e.target.value)}},d.a.createElement(S.a,{value:"all"},"\u5168\u90e8\u7c89\u4e1d"),d.a.createElement(S.a,{value:"0"},"\u672a\u77e5\u7c89\u4e1d"),d.a.createElement(S.a,{value:"1"},"\u7537\u7c89\u4e1d"),d.a.createElement(S.a,{value:"2"},"\u5973\u7c89\u4e1d"))),d.a.createElement(w.a,{style:{width:"175%",marginLeft:-50}}),d.a.createElement("h2",{className:"block-title"},"\u8bbe\u7f6e\u53d1\u9001\u65b9\u5f0f"),d.a.createElement(v.a.Item,{label:"\u5b9a\u65f6\u53d1\u9001"},d.a.createElement(N.a,{checked:l.is_timing,onChange:function(e){return o("is_timing",e)}})),l.is_timing&&d.a.createElement(v.a.Item,{label:"\u53d1\u9001\u65f6\u95f4"},d.a.createElement(T.a,{showTime:!0,placeholder:"\u9009\u62e9\u65f6\u95f4",value:G()(l.timing_time),onChange:function(e,a){return o("timing_time",a)}})),d.a.createElement(w.a,{style:{width:"175%",marginLeft:-50}}),d.a.createElement(v.a.Item,null,d.a.createElement(h.a,{size:"large",type:"primary",onClick:function(){return g(l,f,s)}},"\u786e\u5b9a",l._id?"\u5e76\u4fdd\u5b58\u6d88\u606f":"\u5e76\u521b\u5efa\u6d88\u606f"),l._id&&d.a.createElement(h.a,{style:{marginLeft:20},type:"info",size:"large",onClick:function(){return f.goBack()}},"\u53d6\u6d88\u7f16\u8f91"),d.a.createElement(h.a,{size:"large",style:{marginLeft:20,background:"yellowgreen",borderColor:"yellowgreen"},type:"primary",onClick:B},"\u53d1\u9001\u9884\u89c8"))),e,d.a.createElement(O.a,{visible:p,onCancel:H,closable:!1,footer:Q,mask:!1},d.a.createElement(k.a.TextArea,{style:{color:D.color},value:D.value,autoSize:{minRows:3,maxRows:6},onChange:function(e){return K("value",e.target.value)}})),d.a.createElement(O.a,{title:"\u53d1\u9001\u9884\u89c8",visible:J,onCancel:F,onOk:function(){return R(l,V)}},d.a.createElement(k.a,{onChange:q,value:V,placeholder:"\u8bf7\u8f93\u5165\u9884\u89c8\u7528\u6237\u7684openid"}),d.a.createElement("span",{className:"tips"},"Tips: \u5728\u9884\u89c8\u516c\u53f7\u56de\u590d",d.a.createElement("span",null," openid "),",\u5c06\u8fd4\u56de\u7684\u5185\u5bb9\u590d\u5236\u5230\u8f93\u5165\u6846\u4e2d",d.a.createElement("br",null),"\u4e00\u4e2aopenid\u53ea\u5bf9\u5e94\u4e00\u4e2a\u516c\u53f7"))))}},{key:"componentWillUnmount",value:function(){this.props.resetState()}}]),a}(u.Component);a.default=Object(g.g)(Object(f.b)(function(e){return{messageInfo:e.message.template.messageInfo,templateList:e.message.template.templateList,templateInfo:e.message.template.templateInfo,templateModalVisible:e.message.template.templateModalVisible,selectGonghaoModal:e.message.template.selectGonghaoModal,allCodes:e.message.template.allCodes,previewModal:e.message.template.previewModal,openid:e.message.template.openid,content:e.message.template.content}},function(e){return{getAllCodes:function(){e(j.a.getAllCodes())},openEditModal:function(a,t){!t.color&&(t.color="#000"),e(j.a.openEditModal(a,t))},changeTemplate:function(a){e(j.a.changeTemplate(a))},submitMessage:function(a,t,n){e(j.a.submitMessage(a,t,n))},openSelectModal:function(){e(j.a.openSelectModal())},changeMessageInfo:function(a,t){e(j.a.changeMessageInfo(a,t))},initMessageInfo:function(a){e(j.a.initMessageInfo(a))},confirmSelect:function(a){e(j.a.confirmSelect(a))},resetState:function(){e(j.a.resetState())},closeSelectModal:function(){e(j.a.closeSelectModal())},changeOpenId:function(a){e(j.a.changeOpenId(a.target.value))},openPreviewModal:function(){e(j.a.openPreviewModal())},closePreviewModal:function(){e(j.a.closePreviewModal())},preview:function(a,t){e(j.a.preview(a,t))},closeTemplateModal:function(){e(j.a.closeTemplateModal())},saveTemplateModal:function(){e(j.a.saveTemplateModal())},editTemplate:function(a,t){e(j.a.editTemplate(a,t))}}})(B))},985:function(e,a,t){}}]);