(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{450:function(e,t,a){e.exports=a(961)},689:function(e,t,a){},752:function(e,t,a){},753:function(e,t,a){e.exports=a.p+"static/media/login_bg.e3347162.png"},758:function(e,t,a){},760:function(e,t,a){e.exports=a.p+"static/media/logo.ad641e9f.png"},832:function(e,t,a){},838:function(e,t,a){},839:function(e,t,a){},841:function(e,t,a){},842:function(e,t,a){},892:function(e,t,a){},893:function(e,t,a){},942:function(e,t,a){},943:function(e,t,a){},944:function(e,t,a){},945:function(e,t,a){},946:function(e,t,a){},947:function(e,t,a){},948:function(e,t,a){},949:function(e,t,a){},950:function(e,t,a){},951:function(e,t,a){},952:function(e,t,a){},957:function(e,t,a){},961:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getGroupList",function(){return V}),a.d(n,"getAllGonghaoList",function(){return R}),a.d(n,"changePage",function(){return U}),a.d(n,"changeSearchInput",function(){return z}),a.d(n,"searchByName",function(){return K}),a.d(n,"changeSelectValue",function(){return B}),a.d(n,"deleteGonghao",function(){return J}),a.d(n,"jieguan",function(){return H}),a.d(n,"viewData",function(){return q}),a.d(n,"closeStatisticsModal",function(){return Y}),a.d(n,"addNewGonghao",function(){return W}),a.d(n,"openGonghaoModal",function(){return Z}),a.d(n,"closeGonghaoModal",function(){return X}),a.d(n,"updateGonghaoInfo",function(){return $}),a.d(n,"changeGroup",function(){return Q}),a.d(n,"changeAttribute",function(){return ee}),a.d(n,"changeAbTest",function(){return te}),a.d(n,"selectTag",function(){return ae}),a.d(n,"removeTag",function(){return ne}),a.d(n,"tagConfirm",function(){return oe}),a.d(n,"deleteTagItem",function(){return re}),a.d(n,"createForm",function(){return ce}),a.d(n,"updateForm",function(){return ie}),a.d(n,"checkPageAttr",function(){return le}),a.d(n,"getConfigList",function(){return se}),a.d(n,"deleteConfig",function(){return ue}),a.d(n,"changeConfigForm",function(){return me}),a.d(n,"createConfigForm",function(){return ge}),a.d(n,"updateConfigForm",function(){return de});var o={};a.r(o),a.d(o,"getMenuList",function(){return be}),a.d(o,"deleteMenu",function(){return ke}),a.d(o,"handleInfoChange",function(){return Ee}),a.d(o,"handleIndividualChange",function(){return Ie}),a.d(o,"handleInputChange",function(){return Me}),a.d(o,"handleSubInputChange",function(){return Ce}),a.d(o,"addFirstMenu",function(){return Oe}),a.d(o,"editMenu",function(){return _e}),a.d(o,"addSecondMenu",function(){return we}),a.d(o,"editSecMenu",function(){return Le}),a.d(o,"deleteFirMenu",function(){return Se}),a.d(o,"deleteSubMenu",function(){return xe}),a.d(o,"openModal",function(){return Ne}),a.d(o,"submitMenu",function(){return je}),a.d(o,"resetState",function(){return Te}),a.d(o,"cancelMenu",function(){return Ge}),a.d(o,"getAllCodes",function(){return Ae}),a.d(o,"changeGonghao",function(){return Pe}),a.d(o,"initMenuInfo",function(){return De}),a.d(o,"changeMessageInfo",function(){return Fe}),a.d(o,"addToList",function(){return Ve}),a.d(o,"updateMessageItem",function(){return Re}),a.d(o,"updateCurrentMessage",function(){return Ue}),a.d(o,"deleteCurrentMessage",function(){return ze}),a.d(o,"randomString",function(){return Ke});var r={};a.r(r),a.d(r,"getReplyMessageList",function(){return He}),a.d(r,"deleteReplyMessage",function(){return qe}),a.d(r,"getAllCodes",function(){return Ye}),a.d(r,"selectGonghao",function(){return We}),a.d(r,"changeMessageInfo",function(){return Ze}),a.d(r,"addToList",function(){return Xe}),a.d(r,"updateMessageItem",function(){return $e}),a.d(r,"updateCurrentMessage",function(){return Qe}),a.d(r,"deleteCurrentMessage",function(){return et}),a.d(r,"createConfigForm",function(){return tt}),a.d(r,"updateConfigForm",function(){return at}),a.d(r,"resetState",function(){return nt}),a.d(r,"initState",function(){return ot});var c={};a.r(c),a.d(c,"getGroupGonghao",function(){return st}),a.d(c,"getMaterial",function(){return ut}),a.d(c,"openUpdateMaterialModal",function(){return mt}),a.d(c,"closeUpdateMaterialModal",function(){return gt}),a.d(c,"updateMaterial",function(){return dt}),a.d(c,"changeContentSourceUrl",function(){return pt}),a.d(c,"getMessageList",function(){return ft}),a.d(c,"getTagList",function(){return ht}),a.d(c,"changeTagId",function(){return yt}),a.d(c,"closeModal",function(){return vt}),a.d(c,"openModal",function(){return bt}),a.d(c,"sendMessage",function(){return kt}),a.d(c,"openTimingModal",function(){return Et}),a.d(c,"sendTimingMessage",function(){return It}),a.d(c,"changeTimingState",function(){return Mt}),a.d(c,"changeTime",function(){return Ct}),a.d(c,"copy",function(){return Ot}),a.d(c,"deleteMaterial",function(){return _t}),a.d(c,"clearMaterial",function(){return wt}),a.d(c,"getHistoryList",function(){return Lt}),a.d(c,"checkSendState",function(){return St}),a.d(c,"openMsgModal",function(){return xt}),a.d(c,"closeMsgModal",function(){return Nt}),a.d(c,"changeArticleIdx",function(){return jt}),a.d(c,"deleteMsg",function(){return Tt}),a.d(c,"clearHistory",function(){return Gt}),a.d(c,"changeDate",function(){return At}),a.d(c,"deleteMany",function(){return Pt}),a.d(c,"resetState",function(){return Dt});var i={};a.r(i),a.d(i,"getKefuMessageList",function(){return Ut}),a.d(i,"searchByNickName",function(){return zt}),a.d(i,"changeNickName",function(){return Kt}),a.d(i,"changeMessageType",function(){return Bt}),a.d(i,"changeMessageGroup",function(){return Jt}),a.d(i,"changePage",function(){return Ht}),a.d(i,"createKefuMessage",function(){return qt}),a.d(i,"deleteMessage",function(){return Yt}),a.d(i,"sendKefuMessage",function(){return Wt}),a.d(i,"changeSelectedMessages",function(){return Zt}),a.d(i,"openUpdateGroupModal",function(){return Xt}),a.d(i,"changeGroup",function(){return $t}),a.d(i,"cancelUpdateGroup",function(){return Qt}),a.d(i,"updateMoreGroup",function(){return ea}),a.d(i,"deleteMultiMsg",function(){return ta}),a.d(i,"changeContentValue",function(){return aa}),a.d(i,"changeMessageValue",function(){return na}),a.d(i,"addMessage",function(){return oa}),a.d(i,"selectMessage",function(){return ra}),a.d(i,"selectParams",function(){return ca}),a.d(i,"hideParamsModal",function(){return ia}),a.d(i,"getAllCodes",function(){return la}),a.d(i,"getAllGroup",function(){return sa}),a.d(i,"showGroupInput",function(){return ua}),a.d(i,"handleGroupInputChange",function(){return ma}),a.d(i,"handleGroupInputConfirm",function(){return ga}),a.d(i,"handleClose",function(){return da}),a.d(i,"cancelSelectGroup",function(){return pa}),a.d(i,"selectGonghao",function(){return fa}),a.d(i,"submitMessage",function(){return ha}),a.d(i,"initKefuMessageInfo",function(){return ya}),a.d(i,"openPreviewModal",function(){return va}),a.d(i,"closePreviewModal",function(){return ba}),a.d(i,"preview",function(){return ka}),a.d(i,"changeOpenId",function(){return Ea}),a.d(i,"resetState",function(){return Ia});var l={};a.r(l),a.d(l,"getTemplateList",function(){return Ca}),a.d(l,"deleteTemplate",function(){return Oa}),a.d(l,"sendTemplate",function(){return _a}),a.d(l,"changeConfNickName",function(){return wa}),a.d(l,"searchConfName",function(){return La}),a.d(l,"getAllCodes",function(){return Sa}),a.d(l,"openSelectModal",function(){return xa}),a.d(l,"openEditModal",function(){return Na}),a.d(l,"closeTemplateModal",function(){return ja}),a.d(l,"changeTemplate",function(){return Ta}),a.d(l,"saveTemplateModal",function(){return Ga}),a.d(l,"editTemplate",function(){return Aa}),a.d(l,"changeMessageInfo",function(){return Pa}),a.d(l,"confirmSelect",function(){return Da}),a.d(l,"closeSelectModal",function(){return Fa}),a.d(l,"openPreviewModal",function(){return Va}),a.d(l,"closePreviewModal",function(){return Ra}),a.d(l,"preview",function(){return Ua}),a.d(l,"changeOpenId",function(){return za}),a.d(l,"submitMessage",function(){return Ka}),a.d(l,"initMessageInfo",function(){return Ba}),a.d(l,"resetState",function(){return Ja});var s={};a.r(s),a.d(s,"getRandomMessageList",function(){return Ya}),a.d(s,"deleteRandomMessage",function(){return Wa}),a.d(s,"changeMessageValue",function(){return Za}),a.d(s,"changeMessageType",function(){return Xa}),a.d(s,"changeContentValue",function(){return $a}),a.d(s,"addMessage",function(){return Qa}),a.d(s,"updateMessageItem",function(){return en}),a.d(s,"deleteMessageItem",function(){return tn}),a.d(s,"saveMessage",function(){return an}),a.d(s,"submitMessage",function(){return nn}),a.d(s,"cancelAction",function(){return on}),a.d(s,"initRandomMsgInfo",function(){return rn}),a.d(s,"resetState",function(){return cn});var u={};a.r(u),a.d(u,"getNovelLinkList",function(){return mn}),a.d(u,"changePage",function(){return gn}),a.d(u,"deleteNovel",function(){return dn}),a.d(u,"changeZIndexState",function(){return pn}),a.d(u,"submitNovel",function(){return fn}),a.d(u,"handleInputChange",function(){return hn}),a.d(u,"uploadCheckedFalse",function(){return yn}),a.d(u,"initNovelInfo",function(){return vn}),a.d(u,"getContent",function(){return bn}),a.d(u,"resetState",function(){return kn}),a.d(u,"deleteFinalImg",function(){return En}),a.d(u,"randomString",function(){return In});a(238),a(191),a(251),a(170),a(252),a(452),a(499);var m=a(0),g=a.n(m),d=a(10),p=a.n(d),f=(a(688),a(689),a(12)),h=a(13),y=a(15),v=a(14),b=a(16),k=a(33),E=a(34),I=a(102),M=a(72),C=a(424),O=a(7),_=a(39),w={gonghaoTagList:[],allGonghaoList:[],originalGonghaoList:[],gonghaoList:[],group:"\u5168\u90e8",status:"\u5168\u90e8",currentPage:1,searchName:"",isSelectTag:!1,selectedTag:"",isCreate:!0,gonghaoModal:!1,gonghaoInfo:{group:"",id:"",attribute:0,ab_test:0},statisticsModal:!1,statistics:{},configList:[],configForm:{type:0,sex:3,attribute:1,text:"",replyType:0,msgId:null,key:"",urlList:[]}},L=a(48),S=a.n(L),x=a(65),N=a(27),j=a.n(N);j.a.defaults.timeout=1e4;var T=localStorage.getItem("userInfo"),G=T?JSON.parse(T)._id:"";j.a.interceptors.request.use(function(e){return"get"===e.method||"delete"===e.method?e.url.indexOf("?")>=0?e.url+="&account_id="+G+"&_t="+(new Date).getTime():e.url+="?account_id="+G+"&_t="+(new Date).getTime():"post"!==e.method&&"put"!==e.method||(e.data.account_id=G,e.data._t=(new Date).getTime()),e},function(e){return Promise.reject(e)}),j.a.interceptors.response.use(function(e){return e},function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="\u9519\u8bef\u8bf7\u6c42";break;case 401:e.message="\u767b\u5f55\u4fe1\u606f\u5931\u6548";break;case 403:e.message="\u62d2\u7edd\u8bbf\u95ee";break;case 404:e.message="\u8bf7\u6c42\u9519\u8bef,\u672a\u627e\u5230\u8be5\u8d44\u6e90";break;case 405:e.message="\u8bf7\u6c42\u65b9\u6cd5\u672a\u5141\u8bb8";break;case 408:e.message="\u8bf7\u6c42\u8d85\u65f6";break;case 500:e.message="\u670d\u52a1\u5668\u7aef\u51fa\u9519";break;case 501:e.message="\u7f51\u7edc\u672a\u5b9e\u73b0";break;case 502:e.message="\u7f51\u7edc\u9519\u8bef";break;case 503:e.message="\u670d\u52a1\u4e0d\u53ef\u7528";break;case 504:e.message="\u7f51\u7edc\u8d85\u65f6";break;case 505:e.message="http\u7248\u672c\u4e0d\u652f\u6301\u8be5\u8bf7\u6c42";break;default:e.message="\u8fde\u63a5\u9519\u8bef".concat(e.response.status)}else e.message="\u8fde\u63a5\u5230\u670d\u52a1\u5668\u5931\u8d25";return Promise.resolve(e.response)});var A=j.a,P=a(962),D=a(974),F=function(){return new Promise(function(e,t){var a;a=setInterval(function(){var e=document.documentElement.scrollTop||document.body.scrollTop,t=Math.floor(-e/1.2);document.documentElement.scrollTop=document.body.scrollTop=e+t,0===e&&clearInterval(a)},30),e(null)})},V=function(){return function(e){A.get("/gonghaoTag").then(function(t){if(1===t.data.code){var a=t.data.data;e({type:"gonghao/tuoguan/getGonghaoTagList",gonghaoTagList:a})}})}},R=function(){return function(e){A.get("/conf").then(function(t){if(t.data.data.length>0){var a=t.data.data;e({type:"gonghao/tuoguan/getAllGonghaoList",allGonghaoList:a,gonghaoList:a})}})}},U=function(e){return function(){var t=Object(x.a)(S.a.mark(function t(a){var n;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={type:"gonghao/tuoguan/changePage",page:e},t.next=3,F();case 3:return t.next=5,a(n);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},z=function(e){return{type:"gonghao/tuoguan/changeSearchInput",searchName:e}},K=function(e){return function(t){A.get("/conf/find_one",{params:{nick_name:e}}).then(function(e){if(e.data.data.length>0){var a=e.data.data;t({type:"gonghao/tuoguan/searchByName",allGonghaoList:a,gonghaoList:a}),P.a.success("\u67e5\u8be2\u6210\u529f")}})}},B=function(e,t){return{type:"gonghao/tuoguan/changeSelectValue",key:e,value:t}},J=function(e,t){return function(a){D.a.confirm({okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",content:"\u786e\u8ba4\u5220\u9664\u5417\uff1f",title:"\u63d0\u793a",onOk:function(){A.get("/conf/del",{params:{id:e}}).then(function(e){a({type:"gonghao/tuoguan/deleteGonghao",index:t}),P.a.success("\u5220\u9664\u6210\u529f")})}})}},H=function(e,t){return function(a){D.a.confirm({okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",content:"\u786e\u8ba4\u63a5\u7ba1\u5417\uff1f",title:"\u63d0\u793a",onOk:function(){A.get("/conf/jieguan",{params:{code:e}}).then(function(e){a({type:"gonghao/tuoguan/jieguan",index:t})})}})}},q=function(e){return function(t){A.get("/conf/data/"+e.code).then(function(a){var n=a.data;t({type:"gonghao/tuoguan/viewData",item:e,data:n})})}},Y=function(){return{type:"gonghao/tuoguan/closeStatisticsModal"}},W=function(){return function(e){A.get("/component/componentAuthorize").then(function(e){window.open(e.data)})}},Z=function(e,t,a,n){return{type:"gonghao/tuoguan/openGonghaoModal",id:e,group:t,attribute:a,ab_test:n}},X=function(){return{type:"gonghao/tuoguan/closeGonghaoModal"}},$=function(e){return function(t){console.log(e),A.put("/conf",Object(O.a)({},e)).then(function(e){1===e.data.code&&(P.a.success(e.data.msg),t(X()))})}},Q=function(e){return{type:"gonghao/tuoguan/changeGroup",name:e}},ee=function(e){return{type:"gonghao/tuoguan/changeAttribute",attribute:e}},te=function(e){return{type:"gonghao/tuoguan/changeAbTest",ab_test:e}},ae=function(e){return{type:"gonghao/tuoguan/selectTag",selectedTag:e}},ne=function(){return{type:"gonghao/tuoguan/removeTag"}},oe=function(e,t){return function(a){var n;A.post("/gonghaoTag",{name:e}).then(function(o){0===o.data.exist&&(n=o.data.data),t.form.setFieldsValue({group:e}),a({type:"gonghao/tuoguan/tagConfirm",name:n,group:e})})}},re=function(e,t){return function(a){A.delete("/gonghaoTag/"+e).then(function(e){a({type:"gonghao/tuoguan/deleteTagItem",index:t})})}},ce=function(e,t){return function(a){A.post("/conf/create",e).then(function(n){t.goBack(),a({type:"gonghao/tuoguan/createForm",gonghaoInfo:e}),P.a.success("\u6dfb\u52a0\u6210\u529f")})}},ie=function(e,t){return function(a){A.post("/conf/update",e).then(function(n){t.goBack(),R(),a({type:"gonghao/tuoguan/updateForm",gonghaoInfo:e}),P.a.success("\u4fee\u6539\u6210\u529f")})}},le=function(){return{type:"gonghao/tuoguan/checkPageAttr"}},se=function(e){return function(t){A.get("/reply",{params:{code:e}}).then(function(e){var a=e.data.data;t({type:"gonghao/tuoguan/getConfigList",configList:a})})}},ue=function(e,t){return function(a){D.a.confirm({okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",content:"\u786e\u8ba4\u5220\u9664\u5417\uff1f",title:"\u63d0\u793a",onOk:function(){A.get("/reply/del",{params:{id:e}}).then(function(e){a({type:"gonghao/tuoguan/deleteConfig",index:t}),P.a.success("\u5220\u9664\u6210\u529f")})}})}},me=function(e){return{type:"gonghao/tuoguan/changeConfigForm",formInfo:e}},ge=function(e,t){return function(a){D.a.confirm({title:"\u786e\u5b9a\u65b0\u5efa\u4e00\u6761\u89c4\u5219\u5417\uff1f",onOk:function(){A.post("/reply/create",e).then(function(n){t.goBack(),a({type:"gonghao/tuoguan/createConfigForm",configInfo:e}),P.a.success("\u521b\u5efa\u6210\u529f")})}})}},de=function(e,t,a){return function(n){D.a.confirm({title:"\u786e\u5b9a\u4fee\u6539\u5417\uff1f",onOk:function(){A.post("/reply/update",e).then(function(o){t.goBack(),n({type:"gonghao/tuoguan/updateConfigForm",configInfo:e,index:a}),P.a.success("\u4fee\u6539\u6210\u529f")})}})}},pe="gonghao/menu/saveToContents",fe={name:"",type:"view",key:"",url:"",sub_button:[]},he={name:"",type:"view",key:"",url:""},ye={replyType:0,articles:[],content:""},ve={menuList:[],menuForm:JSON.parse(JSON.stringify(fe)),menuInfo:JSON.parse(JSON.stringify({title:"",individual:!1,sex:"0",values:[],codes:[],contents:{}})),menuIndex:-1,sub_button:JSON.parse(JSON.stringify(he)),secMenuIndex:-1,isSubmit:!1,updateIndex:-1,messageInfo:JSON.parse(JSON.stringify(ye)),currentKey:""},be=function(){return function(e){A.get("/menu").then(function(t){if(t.data.data.length>0){var a=t.data.data.reverse();e({type:"gonghao/menu/getMenuList",menuList:a})}})}},ke=function(e,t){return function(a){D.a.confirm({title:"\u63d0\u793a",content:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",onOk:function(){A.get("/menu/del",{params:{id:e}}).then(function(e){e.data.success&&(a({type:"gonghao/menu/deleteMenu",index:t}),P.a.success(e.data.success))})}})}},Ee=function(e,t){return{type:"gonghao/menu/handleInfoChange",value:e,name:t}},Ie=function(e){return{type:"gonghao/menu/handleIndividualChange",value:e}},Me=function(e,t){return function(a){"click"===t&&a(Ke()),a({type:"gonghao/menu/handleInputChange",name:e,value:t})}},Ce=function(e,t){return function(a){"click"===t&&(a(Ke()),a({type:pe})),a({type:"gonghao/menu/handleSubInputChange",name:e,value:t})}},Oe=function(){return function(e){e({type:pe}),e({type:"gonghao/menu/addFirstMenu"})}},_e=function(e,t){return function(a){a({type:pe}),a({type:"gonghao/menu/editMenu",index:t,data:e})}},we=function(){return function(e){e({type:pe}),e({type:"gonghao/menu/addSecondMenu"})}},Le=function(e,t){return function(a){e.key&&a({type:pe}),a({type:"gonghao/menu/editSecMenu",index:t,data:e})}},Se=function(){return function(e){D.a.confirm({title:"\u63d0\u793a",content:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",onOk:function(){e({type:"gonghao/menu/deleteFirMenu"})}})}},xe=function(){return function(e){D.a.confirm({title:"\u63d0\u793a",content:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",onOk:function(){e({type:"gonghao/menu/deleteSubMenu"})}})}},Ne=function(){return function(e){e({type:"gonghao/menu/openModal"}),e({type:pe})}},je=function(e){return function(t){var a=e.menuInfo,n=a.values;Be(n)&&D.a.confirm({title:"\u63d0\u793a",content:"\u786e\u5b9a\u63d0\u4ea4\u5417\uff1f",onOk:function(){A.post(e.history.location.query?"/menu/update":"/menu/create",Object(O.a)({},a)).then(function(a){t({type:"gonghao/menu/submitMenu"}),e.history.goBack(),t(Te())})}})}},Te=function(){return{type:"gonghao/menu/resetState"}},Ge=function(){return{type:"gonghao/menu/cancelMenu"}},Ae=function(){return function(e){A.get("/conf").then(function(t){var a=t.data.data;e({type:"gonghao/menu/getAllCodes",allCodes:a})})}},Pe=function(e){return{type:"gonghao/menu/changeGonghao",targetKeys:e}},De=function(e){return{type:"gonghao/menu/initMenuInfo",record:e}},Fe=function(e,t){return{type:"gonghao/menu/changeMessageInfo",key:e,value:t}},Ve=function(){return{type:"gonghao/menu/addToList"}},Re=function(e,t){return{type:"gonghao/menu/updateMessageItem",item:e,index:t}},Ue=function(){return{type:"gonghao/menu/updateCurrentMessage"}},ze=function(){return{type:"gonghao/menu/deleteCurrentMessage"}},Ke=function(){return function(e){for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a="",n=8;n>0;--n)a+=t[Math.floor(Math.random()*t.length)];e({type:"gonghao/menu/randomString",result:a})}},Be=function(e){for(var t=0;t<e.length;t++){var a=e[t];if(a.sub_button){for(var n=0;n<a.sub_button.length;n++)if("view"===a.sub_button[n].type&&!a.sub_button[n].url)return P.a.warning("\u8bf7\u68c0\u67e5\u8df3\u8f6c\u94fe\u63a5\u8f93\u5165\u662f\u5426\u6709\u8bef"),!1}else if("view"===a.type&&!a.url)return P.a.warning("\u8bf7\u68c0\u67e5\u8df3\u8f6c\u94fe\u63a5\u8f93\u5165\u662f\u5426\u6709\u8bef"),!1}return!0},Je={replyMessageList:[],messageInfo:JSON.parse(JSON.stringify({type:0,sex:3,attribute:1,replyType:0,codes:[],articles:[],is_nickname:!1,content:""})),allCodes:[],updateIndex:-1,messageIndex:-1},He=function(){return function(e){A.get("/reply").then(function(t){var a=t.data,n=a.code,o=(a.msg,a.data);e(1===n?{type:"gonghao/reply/getReplyMessageList",replyMessageList:o.reverse()}:{type:"gonghao/reply/getReplyMessageList",replyMessageList:[]})})}},qe=function(e,t){return function(a){D.a.confirm({okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",content:"\u786e\u8ba4\u5220\u9664\u5417\uff1f",title:"\u63d0\u793a",onOk:function(){A.get("/reply/del",{params:{_id:e}}).then(function(e){a({type:"gonghao/reply/deleteReplyMessage",index:t}),P.a.success("\u5220\u9664\u6210\u529f")})}})}},Ye=function(){return function(e){A.get("/conf").then(function(t){if(t.data.data.length>0){var a=t.data.data;e({type:"gonghao/reply/getAllCodes",allCodes:a})}})}},We=function(e){return{type:"gonghao/reply/selectGonghao",codes:e}},Ze=function(e,t){return{type:"gonghao/reply/changeMessageInfo",key:e,value:t}},Xe=function(){return{type:"gonghao/reply/addToList"}},$e=function(e,t){return{type:"gonghao/reply/updateMessageItem",item:e,index:t}},Qe=function(){return{type:"gonghao/reply/updateCurrentMessage"}},et=function(){return{type:"gonghao/reply/deleteCurrentMessage"}},tt=function(e,t){return function(a){e.codes.length?D.a.confirm({title:"\u786e\u5b9a\u65b0\u5efa\u4e00\u6761\u89c4\u5219\u5417\uff1f",onOk:function(){A.post("/reply/create",e).then(function(n){t.goBack(),a({type:"gonghao/reply/createConfigForm",configInfo:e}),P.a.success("\u521b\u5efa\u6210\u529f")})}}):P.a.error("\u8bf7\u9009\u62e9\u516c\u53f7\u540e\u518d\u8bd5")}},at=function(e,t,a){return function(n){e.codes.length?D.a.confirm({title:"\u786e\u5b9a\u4fee\u6539\u5417\uff1f",onOk:function(){A.post("/reply/update",e).then(function(o){t.goBack(),n({type:"gonghao/reply/updateConfigForm",configInfo:e,index:a}),P.a.success("\u4fee\u6539\u6210\u529f")})}}):P.a.error("\u8bf7\u9009\u62e9\u516c\u53f7\u540e\u518d\u8bd5")}},nt=function(){return{type:"gonghao/reply/resetState"}},ot=function(e,t){return{type:"gonghao/reply/initState",record:e,index:t}},rt=Object(M.c)({tuoguan:function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,n=arguments.length>1?arguments[1]:void 0,o=JSON.parse(JSON.stringify(a));switch(n.type){case"gonghao/tuoguan/getGonghaoTagList":return o.gonghaoTagList=n.gonghaoTagList,o;case"gonghao/tuoguan/getAllGonghaoList":return o.allGonghaoList=o.originalGonghaoList=n.allGonghaoList,o.gonghaoList=n.gonghaoList,o;case"gonghao/tuoguan/changeSelectValue":return o.group=o.status="\u5168\u90e8",o[n.key]=n.value,"\u5168\u90e8"===o[n.key]?o.gonghaoList=Object(_.a)(o.allGonghaoList):o.gonghaoList=Object(_.a)(o.allGonghaoList.filter(function(e){return e[n.key]===n.value})),o;case"gonghao/tuoguan/changePage":return e=10*(n.page-1),t=10*n.page,o.gonghaoList=o.allGonghaoList.slice(e,t),o.currentPage=n.page,o;case"gonghao/tuoguan/changeSearchInput":return o.searchName=n.searchName,o;case"gonghao/tuoguan/searchByName":return o.allGonghaoList=n.allGonghaoList,o.gonghaoList=n.gonghaoList,o.searchName="",o;case"gonghao/tuoguan/openGonghaoModal":return o.gonghaoModal=!0,o.gonghaoInfo={id:n.id,group:n.group,attribute:n.attribute,ab_test:n.ab_test},o;case"gonghao/tuoguan/closeGonghaoModal":return o.gonghaoModal=!1,o.gonghaoInfo={attribute:0},o;case"gonghao/tuoguan/changeGroup":return o.gonghaoInfo.group=n.name,o;case"gonghao/tuoguan/changeAttribute":return o.gonghaoInfo.attribute=n.attribute,o;case"gonghao/tuoguan/changeAbTest":return o.gonghaoInfo.ab_test=n.ab_test,o;case"gonghao/tuoguan/deleteGonghao":return o.gonghaoList.splice(n.index,1),o;case"gonghao/tuoguan/selectTag":return o.isSelectTag=!0,o.selectedTag=n.selectedTag,o;case"gonghao/tuoguan/removeTag":return o.isSelectTag=!1,o.selectedTag="",o;case"gonghao/tuoguan/tagConfirm":return o.isSelectTag=!0,o.selectedTag=n.group,n.name&&o.gonghaoTagList.push(n.name),o;case"gonghao/tuoguan/deleteTagItem":return o.isSelectTag=!1,o.selectedTag="",o.gonghaoTagList.splice(n.index,1),o;case"gonghao/tuoguan/checkPageAttr":return o.isCreate=!1,o;case"gonghao/tuoguan/jieguan":return o.gonghaoList[n.index].status=0,o;case"gonghao/tuoguan/viewData":var r=n.item,c=r.yesterdayCount,i=r.todayCount,l=r.nick_name;return o.statistics=Object(O.a)({yesterdayCount:c,todayCount:i},n.data,{nick_name:l}),o.statisticsModal=!0,o;case"gonghao/tuoguan/closeStatisticsModal":return o.statisticsModal=!1,o.statistics={},o;default:return a}},menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0,a=JSON.parse(JSON.stringify(e));switch(t.type){case"gonghao/menu/getMenuList":return a.menuList=t.menuList,a;case"gonghao/menu/deleteMenu":return a.menuList.splice(t.index,1),a;case"gonghao/menu/getAllCodes":return a.allCodes=Object(_.a)(t.allCodes),a;case"gonghao/menu/changeGonghao":return a.menuInfo.codes=a.targetKeys=Object(_.a)(t.targetKeys),a;case"gonghao/menu/addFirstMenu":return a.menuForm=JSON.parse(JSON.stringify(fe)),a.menuInfo.values.push(Object(O.a)({},a.menuForm)),a.menuIndex=a.menuInfo.values.length-1,a;case"gonghao/menu/editMenu":return a.secMenuIndex=-1,a.menuIndex=t.index,a.menuForm=Object(O.a)({},t.data),a.menuForm.sub_button&&a.menuForm.sub_button.length&&(a.sub_button=Object(O.a)({},a.menuForm.sub_button[0]),a.secMenuIndex=0),a.currentKey="",a.menuIndex>-1&&(a.sub_button.key&&a.secMenuIndex>-1?(a.menuInfo.values[a.menuIndex].key=a.menuForm.key="",a.currentKey=a.sub_button.key,a.messageInfo=a.menuInfo.contents[a.currentKey]):t.data.key&&(a.currentKey=a.menuForm.key=a.menuInfo.values[a.menuIndex].key,a.messageInfo=a.menuInfo.contents[a.currentKey])),a;case"gonghao/menu/deleteFirMenu":return a.menuInfo.values.splice(a.menuIndex,1),a.menuIndex=0,a.menuForm=a.menuInfo.values[0]||JSON.parse(JSON.stringify(fe)),delete a.menuInfo.contents[a.currentKey],a.menuForm.key&&(a.messageInfo=a.menuInfo.contents[a.menuForm.key]),a;case"gonghao/menu/handleInputChange":return"type"===t.name&&(a.menuForm.url="",a.messageInfo=JSON.parse(JSON.stringify(ye)),"click"===t.value?a.menuForm.key=a.menuInfo.values[a.menuIndex].key=a.currentKey:a.menuForm.key=a.menuInfo.values[a.menuIndex].key=a.currentKey=""),a.menuForm[t.name]=t.value,a.menuInfo.values.splice(a.menuIndex,1,Object(O.a)({},a.menuForm)),a;case"gonghao/menu/addSecondMenu":return a.sub_button=JSON.parse(JSON.stringify(he)),a.menuForm.sub_button.push(Object(O.a)({},a.sub_button)),a.messageInfo=JSON.parse(JSON.stringify(ye)),a.menuInfo.values.splice(a.menuIndex,1,Object(O.a)({},a.menuForm)),a.secMenuIndex=a.menuForm.sub_button.length-1,a;case"gonghao/menu/editSecMenu":return a.currentKey&&(a.menuInfo.contents[a.currentKey]=a.messageInfo),a.secMenuIndex=t.index,a.sub_button=Object(O.a)({},t.data),a.currentKey="",t.data.key&&a.secMenuIndex>-1&&(a.menuInfo.values[a.menuIndex].key=a.menuForm.key="",a.currentKey=a.sub_button.key,a.messageInfo=a.menuInfo.contents[a.currentKey]),a;case"gonghao/menu/deleteSubMenu":return a.menuForm.sub_button.splice(a.secMenuIndex,1),a.menuInfo.values[a.menuIndex].sub_button.splice(a.secMenuIndex,1),a.secMenuIndex=0,a.sub_button=a.menuForm.sub_button[0]||JSON.parse(JSON.stringify(he)),delete a.menuInfo.contents[a.currentKey],a.sub_button.key&&(a.messageInfo=a.menuInfo.contents[a.sub_button.key]),a;case"gonghao/menu/handleSubInputChange":return"type"===t.name&&(a.sub_button.url="",a.messageInfo=JSON.parse(JSON.stringify(ye)),"click"===t.value?(a.menuInfo.values[a.menuIndex].key=a.menuForm.key="",a.sub_button.key=a.currentKey):a.sub_button.key=a.currentKey=""),a.sub_button[t.name]=t.value,a.menuForm.sub_button.splice(a.secMenuIndex,1,Object(O.a)({},a.sub_button)),a.menuInfo.values.splice(a.menuIndex,1,Object(O.a)({},a.menuForm)),a;case"gonghao/menu/changeMessageInfo":return"replyType"===t.key?(a.messageInfo=JSON.parse(JSON.stringify(ye)),a.messageInfo.replyType=t.value):a.messageInfo[t.key]=t.value,a;case"gonghao/menu/addToList":var n=a.messageInfo,o=n.title,r=n.picurl,c=n.url,i=n.description;return a.messageInfo.articles.push(Object(O.a)({},{title:o,picurl:r,url:c,description:i})),a.messageInfo.title=a.messageInfo.picurl=a.messageInfo.url=a.messageInfo.description="",a;case"gonghao/menu/updateMessageItem":var l=t.item,s=t.index;return Object.assign(a.messageInfo,Object(O.a)({},l)),a.updateIndex=s,a;case"gonghao/menu/updateCurrentMessage":var u={title:a.messageInfo.title,picurl:a.messageInfo.picurl,url:a.messageInfo.url,description:a.messageInfo.description};return a.messageInfo.articles.splice(a.updateIndex,1,Object(O.a)({},u)),a.messageInfo.title=a.messageInfo.picurl=a.messageInfo.url=a.messageInfo.description="",a.updateIndex=-1,a;case"gonghao/menu/deleteCurrentMessage":return a.messageInfo.articles.splice(a.updateIndex,1),a.messageInfo.title=a.messageInfo.picurl=a.messageInfo.url=a.messageInfo.description="",a.updateIndex=-1,a;case"gonghao/menu/clearMessageInfoInput":return a.messageInfo.title=a.messageInfo.picurl=a.messageInfo.url=a.messageInfo.description="",a.updateIndex=-1,a;case pe:var m=a.messageInfo,g={articles:m.articles,content:m.content,replyType:m.replyType};return a.currentKey&&(a.menuInfo.contents[a.currentKey]=Object(O.a)({},g)),a;case"gonghao/menu/randomString":return a.currentKey=t.result,a;case"gonghao/menu/openModal":return a.isSubmit=!0,a;case"gonghao/menu/submitMenu":case"gonghao/menu/cancelMenu":return a.isSubmit=!1,a;case"gonghao/menu/handleInfoChange":return a.menuInfo[t.name]=t.value,a;case"gonghao/menu/handleIndividualChange":return a.menuInfo.individual=t.value,Object.assign(a.menuForm,{sex:0}),a;case"gonghao/menu/initMenuInfo":return a.menuInfo=Object(O.a)({},t.record,{contents:{}}),a.menuInfo.id=t.record._id,a.targetKeys=Object(_.a)(a.menuInfo.codes),a.menuForm=Object(O.a)({},a.menuInfo.values[0]),a.menuIndex=0,a.menuForm.sub_button&&a.menuForm.sub_button.length?(a.sub_button=Object(O.a)({},a.menuForm.sub_button[0]),a.secMenuIndex=0,a.sub_button.key&&(a.currentKey=a.sub_button.key,a.messageInfo=a.menuInfo.contents[a.currentKey])):(a.menuForm.key&&(a.currentKey=a.menuForm.key),a.currentKey&&(a.messageInfo=a.menuInfo.contents[a.currentKey])),a;case"gonghao/menu/resetState":return a=ve;default:return e}},reply:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0,a=JSON.parse(JSON.stringify(e));switch(t.type){case"gonghao/reply/getReplyMessageList":return a.replyMessageList=t.replyMessageList.filter(function(e){return 1!==e.type}),a;case"gonghao/reply/deleteReplyMessage":return a.replyMessageList.splice(t.index,1),a;case"gonghao/reply/getAllCodes":return a.allCodes=t.allCodes,a;case"gonghao/reply/selectGonghao":return a.messageInfo.codes=Object(_.a)(t.codes),a;case"gonghao/reply/changeMessageInfo":return a.messageInfo[t.key]=t.value,a;case"gonghao/reply/addToList":var n=a.messageInfo,o=n.title,r=n.picurl,c=n.url,i=n.description;return a.messageInfo.articles.push(Object(O.a)({},{title:o,picurl:r,url:c,description:i})),a.messageInfo.title=a.messageInfo.picurl=a.messageInfo.url=a.messageInfo.description="",a;case"gonghao/reply/updateMessageItem":var l=t.item,s=t.index;return Object.assign(a.messageInfo,Object(O.a)({},l)),a.updateIndex=s,a;case"gonghao/reply/updateCurrentMessage":var u={title:a.messageInfo.title,picurl:a.messageInfo.picurl,url:a.messageInfo.url,description:a.messageInfo.description};return a.messageInfo.articles.splice(a.updateIndex,1,Object(O.a)({},u)),a.messageInfo.title=a.messageInfo.picurl=a.messageInfo.url=a.messageInfo.description="",a.updateIndex=-1,a;case"gonghao/reply/deleteCurrentMessage":return a.messageInfo.articles.splice(a.updateIndex,1),a.messageInfo.title=a.messageInfo.picurl=a.messageInfo.url=a.messageInfo.description="",a.updateIndex=-1,a;case"gonghao/reply/initState":return a.messageInfo=JSON.parse(JSON.stringify(t.record)),a.messageIndex=t.index,1===a.messageInfo.replyType&&(Object.assign(a.messageInfo,a.messageInfo.articles[0]),a.updateIndex=0),a;case"gonghao/reply/resetState":return a=JSON.parse(JSON.stringify(Je));default:return e}}}),ct=rt,it="gonghao/group/copy",lt={messageList:[],isComplete:!0,tagList:[],sendModal:!1,sendTimingModal:!1,date:"",time:"",sendInfo:{id:"",tagId:null,mediaId:""},sendTimingInfo:{id:"",tagId:null,isTiming:!1,timing:null},updateInfo:{media_id:"",index:null,articles:{content_source_url:""},id:""},updateMaterialModal:!1,historyList:[],historyMsgModal:!1,delMsgInfo:{code:null,msg_id:"",article_idx:""},delDate:""},st=function(){return function(){var e=Object(x.a)(S.a.mark(function e(t){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,t){A.get("/conf").then(function(a){if(a.data.data.length>0){var n=a.data.data;e({type:"gonghao/group/getGroupGonghao",gonghaoList:n})}else t("error message: \u6ca1\u6709\u6570\u636e")})});case 2:a=e.sent,t(a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},ut=function(e){return function(t){e?A.get("/material",{params:{code:e}}).then(function(a){P.a.success(a.data.success),setTimeout(function(){t(ft(e))},3e3)}):P.a.warning("\u8bf7\u9009\u62e9\u516c\u53f7\u540e\u518d\u8bd5")}},mt=function(e){return{type:"gonghao/group/openUpdateMaterialModal",updateInfo:e}},gt=function(){return{type:"gonghao/group/closeUpdateMaterialModal"}},dt=function(e,t){return function(a){A.put("/material/contentSourceUrl",Object(O.a)({},e,{code:t})).then(function(e){var t=e.data,n=t.code,o=t.msg;1===n?(P.a.success(o),a(gt())):P.a.error(o)}).catch(function(e){console.log(e)})}},pt=function(e){return{type:"gonghao/group/changeContentSourceUrl",content_source_url:e}},ft=function(e){return function(t){A.get("/material/show",{params:{code:Number(e)}}).then(function(e){var a=e.data.data;t({type:"gonghao/group/getMessageList",data:a})})}},ht=function(e){return function(t){A.get("/material/tag",{params:{code:e}}).then(function(e){var a=e.data.data;t({type:"gonghao/group/getTagList",data:a})})}},yt=function(e,t){return{type:"gonghao/group/changeTagId",value:e,isTiming:t}},vt=function(){return{type:"gonghao/group/closeModal"}},bt=function(e){return{type:"gonghao/group/openModal",record:e}},kt=function(e){return function(t){D.a.confirm({title:"\u786e\u5b9a\u53d1\u9001\u6d88\u606f\u5417\uff1f",onOk:function(){A.get("/material/sendMsg",{params:Object(O.a)({},e)}).then(function(e){P.a.info(e.data.success),t(vt())})}})}},Et=function(e){return{type:"gonghao/group/openTimingModal",record:e}},It=function(e,t){return function(a){D.a.confirm({title:"\u786e\u5b9a\u5b9a\u65f6\u53d1\u9001\u6d88\u606f\u5417\uff1f",onOk:function(){A.get("/material/send_timing",{params:Object(O.a)({},e)}).then(function(e){P.a.info("\u8bbe\u7f6e\u6210\u529f"),a(ft(t)),a(vt())})}})}},Mt=function(e){return{type:"gonghao/group/changeTimingState",value:e}},Ct=function(e,t){return{type:"gonghao/group/changeTime",time:e,timeType:t}},Ot=function(e){return function(t){D.a.confirm({title:"\u786e\u5b9a\u590d\u5236\u8fd9\u6761\u7d20\u6750\u5417\uff1f",onOk:function(){A.post("/material/copy",{id:e}).then(function(e){if(e.data.success){var a=e.data.data;P.a.success(e.data.success),t({type:it,data:a})}else P.a.info(e.data.err)})}})}},_t=function(e,t){return function(a){D.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u6761\u7d20\u6750\u5417\uff1f",onOk:function(){A.get("/material/del",{params:{id:e}}).then(function(e){e.data.success?(P.a.success(e.data.success),a({type:"gonghao/group/deleteMaterial",index:t})):P.a.info(e.data.err)})}})}},wt=function(e){return function(t){e?D.a.confirm({title:"\u786e\u5b9a\u6e05\u7a7a\u5217\u8868\u5417\uff1f",onOk:function(){A.get("/material/clear",{params:{code:e}}).then(function(e){P.a.info(e.data.success),t({type:"gonghao/group/clearMaterial"})})}}):P.a.warning("\u8bf7\u9009\u62e9\u516c\u53f7\u540e\u518d\u8bd5")}},Lt=function(e){return function(t){A.get("/history",{params:{code:e}}).then(function(e){var a=e.data.data;t({type:"gonghao/group/getHistoryList",data:a})})}},St=function(e,t){return function(a){A.get("/history/state",{params:{code:e,msg_id:t}}).then(function(e){P.a.info(e.data.data.msg_status)})}},xt=function(e,t){return{type:"gonghao/group/openMsgModal",code:e,msg_id:t}},Nt=function(){return{type:"gonghao/group/closeMsgModal"}},jt=function(e){return{type:"gonghao/group/changeArticleIdx",value:e}},Tt=function(e){return function(t){D.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",onOk:function(){A.get("/history/del_msg",{params:Object(O.a)({},e)}).then(function(e){P.a.info(e.data.success),t(Nt())})}})}},Gt=function(e){return function(t){D.a.confirm({title:"\u786e\u5b9a\u6e05\u7a7a\u5217\u8868\uff1f",onOk:function(){A.get("/history/clear",{params:{code:e}}).then(function(e){P.a.success(e.data.success),t({type:"gonghao/group/clearHistory"})})}})}},At=function(e){return{type:"gonghao/group/changeDate",delDate:e}},Pt=function(e,t){return function(a){D.a.confirm({title:"\u786e\u8ba4\u5220\u9664\u5417?:",onOk:function(){A.get("/history/delByDate",{params:{date:t,code:e}}).then(function(e){P.a.info(e.data.success),a(Lt())})}})}},Dt=function(){return{type:"gonghao/group/resetState"}},Ft={description:"",title:"",url:"",picurl:""},Vt={allMessageList:[],kefuMessageList:[],messageType:4,messageGroup:"",selectedMessages:[],updateGroupModal:!1,group:"",currentPage:1,total:0,nick_name:"",kefuMessageInfo:{contents:[],type:0,img:"",img_path:"",channel:1,sex:"all",timing_time:new Date,daily_time_show:new Date,delay:5,tagId:"",tagName:"",codes:[],remarks:"",action_type:2,isHour:0,group:"\u672a\u5206\u7ec4"},content:Ft,messageIndex:-1,paramsModal:!1,allCodes:[],allGroup:[],previewModal:!1,openid:"",groupInputVisible:!1,groupValue:""},Rt=function(e){return new Promise(function(t,a){A.get("/message",{params:{sort:"_id",page:e}}).then(function(e){if(e.data.messages.length>0){var n=e.data,o=n.messages,r=n.total;t({type:"message/kefu/getKefuMessageList",kefuMessageList:o,total:r})}else a("error message: \u6ca1\u6709\u6570\u636e")})})},Ut=function(){return function(){var e=Object(x.a)(S.a.mark(function e(t){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(1);case 2:a=e.sent,t(a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},zt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(a){A.get("/message/getByName",{params:{nick_name:e,page:t}}).then(function(n){var o=n.data,r=o.messages,c=o.total;a({type:"message/kefu/searchByNickName",data:r,total:c,nick_name:e,page:t})})}},Kt=function(e){return{type:"message/kefu/changeNickName",value:e}},Bt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(a){var n="";0===e?n="manual":1===e?n="delay":2===e?n="is_timing":3===e&&(n="is_daily"),A.get("/message/getByType",{params:{type:n,page:t}}).then(function(n){var o=n.data,r=o.messages,c=o.total;a({type:"message/kefu/changeMessageType",value:e,data:r,total:c,page:t})})}},Jt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(a){A.get("/message/getByGroup",{params:{group:e,page:t}}).then(function(n){var o=n.data,r=o.messages,c=o.total;a({type:"message/kefu/changeMessageGroup",group:e,data:r,total:c,page:t})})}},Ht=function(e){return function(){var t=Object(x.a)(S.a.mark(function t(a){var n,o,r,c,i;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.nick_name,o=e.messageGroup,r=e.messageType,c=e.page,t.next=3,F();case 3:if(!n){t.next=7;break}a(zt(n,c)),t.next=20;break;case 7:if(!o){t.next=11;break}a(Jt(o,c)),t.next=20;break;case 11:if(4===r){t.next=15;break}a(Bt(r,c)),t.next=20;break;case 15:return t.next=17,Rt(c);case 17:i=t.sent,a(i),a({type:"message/kefu/changePage",page:c});case 20:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},qt=function(e){return function(t){e.delay&&e.isHour&&(e.delay/=60),D.a.confirm({title:"\u786e\u5b9a\u65b0\u589e\u4e00\u6761\u5ba2\u670d\u6d88\u606f\u5417\uff1f",onOk:function(){A.post("/message/create",Object(O.a)({},e)).then(function(a){if(a.data.success){var n=a.data.data;P.a.info(e._id?"\u590d\u5236\u6210\u529f":a.data.success),t({type:"message/kefu/createKefuMessage",data:n})}else P.a.info(a.data.err)})}})}},Yt=function(e,t){return function(a){D.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u6761\u5ba2\u670d\u6d88\u606f\u5417\uff1f",onOk:function(){A.get("/message/delete",{params:{id:e}}).then(function(e){(a(Ut()),0===e.data.data.length)?(P.a.info("\u5df2\u5220\u9664\u6700\u540e\u4e00\u6761\u6570\u636e"),a({type:"message/kefu/deleteLastMessage"})):(P.a.info(e.data.success),a({type:"message/kefu/deleteMessage",index:t}))})}})}},Wt=function(e,t){return function(a){D.a.confirm({title:"\u786e\u5b9a\u53d1\u9001\u6d88\u606f\u5417\uff1f",onOk:function(){A.get("/message/send",{params:{id:e,tagId:t,take_over:!0}}).then(function(e){P.a.info(e.data.success)})}})}},Zt=function(e){return{type:"message/kefu/changeSelectedMessages",selectedMessages:e}},Xt=function(){return{type:"message/kefu/openUpdateGroupModal"}},$t=function(e){return{type:"message/kefu/changeGroup",value:e}},Qt=function(){return{type:"message/kefu/cancelUpdateGroup"}},ea=function(e,t){return function(a){A.put("/message/updateGroup",{selectedMessages:e,group:t}).then(function(e){var t=e.data,n=t.code,o=t.msg;1===n?(P.a.success(o),a(Ut()),a({type:"message/kefu/updateMoreGroup"}),a(Qt())):P.a.error(o)})}},ta=function(e){return function(t){D.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u9009\u4e2d\u7684\u5ba2\u670d\u6d88\u606f\u5417\uff1f",onOk:function(){A.delete("/message/delSelect",{params:{selectedMessages:e}}).then(function(e){P.a.success(e.data.msg),t(Ut())})}})}},aa=function(e,t){return{type:"message/kefu/changeContentValue",value:e,name:t}},na=function(e,t){return{type:"message/kefu/changeMessageValue",value:e,name:t}},oa=function(){return{type:"message/kefu/addMessage"}},ra=function(e,t){return{type:"message/kefu/selectMessage",info:e,index:t}},ca=function(){return{type:"message/kefu/selectParams"}},ia=function(){return{type:"message/kefu/hideParamsModal"}},la=function(){return function(e){A.get("/conf").then(function(t){var a=t.data.data;e({type:"message/kefu/getAllCodes",allCodes:a})})}},sa=function(){return function(e){A.get("/messageGroup").then(function(t){var a=t.data.data;e({type:"message/kefu/getAllGroup",allGroup:a})})}},ua=function(e){return{type:"message/kefu/showGroupInput",that:e}},ma=function(e){return{type:"message/kefu/handleGroupInputChange",value:e}},ga=function(e){return function(t){e?A.post("/messageGroup",{group:e}).then(function(e){var a=e.data,n=a.code,o=a.msg,r=a.data;1===n?(P.a.success(o),t({type:"message/kefu/handleGroupInputConfirm",data:r})):P.a.error(o)}):t({type:"message/kefu/handleGroupInputConfirm",data:{}})}},da=function(e,t){return function(a){D.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u4e2a\u5206\u7ec4\u5417\uff1f",onOk:function(){A.delete("/messageGroup",{params:{_id:e}}).then(function(e){var n=e.data,o=n.code,r=n.msg;1===o?(P.a.success(r),a({type:"message/kefu/handleClose",index:t})):P.a.error(r)})}})}},pa=function(){return{type:"message/kefu/cancelSelectGroup"}},fa=function(e){return{type:"message/kefu/selectGonghao",codes:e}},ha=function(e,t,a){return function(n){e.gonghaoList=a.filter(function(t){return e.codes.indexOf(t.code)>-1}),!e.img&&e.contents.length>0&&(e.img=e.contents[0].picurl),1===e.channel?e.task=!0:e.task=!1,2===e.channel?e.is_timing=!0:e.is_timing=!1,1!==e.channel&&(e.delay=null),3===e.channel?(e.is_daily=!0,e.daily_time_show._d?e.daily_time_show=new Date(e.daily_time_show._d).getTime():e.daily_time_show=new Date(e.daily_time_show).getTime()):(e.is_daily=!1,e.daily_time_show=0),e.codes.length?D.a.confirm({title:"\u786e\u5b9a\u63d0\u4ea4\u5417\uff1f",onOk:function(){var a="/message/create";t.location.query&&(a="/message/update",e.id=e._id),A.post(a,Object(O.a)({},e)).then(function(e){e.data.success?(P.a.info(e.data.success),t.goBack(),n(Ia())):P.a.info(e.data.err)})}}):P.a.error("\u8bf7\u9009\u62e9\u516c\u53f7\u540e\u518d\u8bd5")}},ya=function(e){return function(t){e.tagId?A.get("/tag/get_name",{params:{tagId:e.tagId}}).then(function(a){e.tagName=a.data.data.name,t({type:"message/kefu/initKefuMessageInfo",query:e})}):t({type:"message/kefu/initKefuMessageInfo",query:e})}},va=function(){return{type:"message/kefu/openPreviewModal"}},ba=function(){return{type:"message/kefu/closePreviewModal"}},ka=function(e,t){var a=e.codes,n=e.type,o=e.contents,r=e.img_path;return function(e){A.post("/message/preview",{codes:a,type:n,contents:o,img_path:r,openid:t}).then(function(t){var a=t.data,n=a.code,o=a.msg;1===n?P.a.success(o):P.a.warning(o),e(ba())})}},Ea=function(e){return{type:"message/kefu/changeOpenId",value:e}},Ia=function(){return{type:"message/kefu/resetState"}},Ma={templateMessageList:[],confName:"",selectGonghaoModal:!0,messageInfo:{name:"",code:null,templateId:"",templateName:"",url:"",sex:"all",content:{},is_timing:!1,timing_time:new Date},allCodes:[],templateList:[],templateInfo:{template_id:""},name:"",templateModalVisible:!1,content:{value:"",color:"#000"},previewModal:!1,openid:""},Ca=function(){return function(e){A.get("/template").then(function(t){var a=t.data.data;e({type:"message/template/getTemplateList",data:a})})}},Oa=function(e,t){return function(a){D.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u6761\u6a21\u677f\u6d88\u606f\u5417\uff1f",onOk:function(){A.get("/template/del",{params:{id:e}}).then(function(e){e.data.success&&(P.a.success(e.data.success),a({type:"message/template/deleteTemplate",index:t}))})}})}},_a=function(e,t){return function(t){D.a.confirm({title:"\u786e\u5b9a\u53d1\u9001\u8fd9\u6761\u6a21\u677f\u6d88\u606f\u5417\uff1f",onOk:function(){A.get("/template/send",{params:{id:e}}).then(function(a){P.a.success(a.data),t({type:"message/template/sendTemplate",id:e})})}})}},wa=function(e){return{type:"message/template/changeConfNickName",value:e}},La=function(e){return function(t){/^\?.*/.test(e)&&A.get("/template/search",{params:{confName:e}}).then(function(e){e.data.data.length>0?(t({type:"message/template/searchConfName",data:e.data.data}),P.a.success(e.data.msg)):(t(Ca()),P.a.error("\u6ca1\u6709\u67e5\u8be2\u5230\u76f8\u5173\u6570\u636e"))})}},Sa=function(){return function(e){A.get("/conf").then(function(t){var a={type:"message/template/getAllCodes",allCodes:t.data.data};e(a)})}},xa=function(){return{type:"message/template/openSelectModal"}},Na=function(e,t){return{type:"message/template/openEditModal",key:e,content:t}},ja=function(){return{type:"message/template/closeTemplateModal"}},Ta=function(e){return{type:"message/template/changeTemplate",value:e}},Ga=function(){return{type:"message/template/saveTemplateModal"}},Aa=function(e,t){return{type:"message/template/editTemplate",key:e,value:t}},Pa=function(e,t){return{type:"message/template/changeMessageInfo",key:e,value:t}},Da=function(e){return function(t){t(Pa("code",e)),A.get("/template/list",{params:{code:e}}).then(function(a){var n={type:"message/template/confirmSelect",templateList:a.data,templateInfo:Object(O.a)({},a.data[0]),code:e};t(n)})}},Fa=function(){return{type:"message/template/closeSelectModal"}},Va=function(){return{type:"message/template/openPreviewModal"}},Ra=function(){return{type:"message/template/closePreviewModal"}},Ua=function(e,t){var a=e.code,n=e.templateId,o=e.url,r=e.content;return function(e){A.post("/template/preview",{code:a,templateId:n,url:o,content:r,openid:t}).then(function(t){P.a.success(t.data.msg),e(Ra())})}},za=function(e){return{type:"message/template/changeOpenId",value:e}},Ka=function(e,t,a){return function(n){var o="/template/create";e.templateName=a.filter(function(t){return t.template_id===e.templateId})[0].title,e._id&&(o="/template/update")&&(e.id=e._id),e.is_timing&&(e.timing_time=new Date(e.timing_time)),D.a.confirm({title:"\u786e\u5b9a"+(e._id?"\u4fdd\u5b58\u8fd9":"\u521b\u5efa\u4e00")+"\u6761\u6a21\u677f\u6d88\u606f\u5417\uff1f",onOk:function(){A.post(o,Object(O.a)({},e)).then(function(e){e.data.success?(P.a.success(e.data.success),t.goBack()):P.a.error(e.data.err)})}})}},Ba=function(e){return function(t){t(Fa()),A.get("/template/list",{params:{code:e.code}}).then(function(a){var n={type:"message/template/initMessageInfo",templateList:a.data,record:e};t(n)})}},Ja=function(){return{type:"message/template/resetState"}},Ha={description:"",picurl:"",title:"",url:"",local_picurl:""},qa={randomMessageList:[],randomMessageInfo:{message_id:"",message_array:[],remarks:""},message_info:{contents:[],type:0},content:Object(O.a)({},Ha),currentIndex:-1},Ya=function(){return function(e){A.get("/messageRandom").then(function(t){var a=t.data,n=a.code,o=a.data;e(1===n?{type:"message/randomMsg/getRandomMessageList",data:o}:{type:"message/randomMsg/getRandomMessageList",data:[]})})}},Wa=function(e){return function(t){D.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u6761\u6d88\u606f\u5417\uff1f",onOk:function(){A.get("/messageRandom/del",{params:{_id:e}}).then(function(e){var a=e.data,n=a.code,o=a.msg;1===n?(P.a.success(o),t(Ya())):P.a.error(o)})}})}},Za=function(e,t){return{type:"message/randomMsg/changeMessageValue",value:e,name:t}},Xa=function(e){return{type:"message/randomMsg/changeMessageType",value:e}},$a=function(e,t){return{type:"message/randomMsg/changeContentValue",value:e,name:t}},Qa=function(){return{type:"message/randomMsg/addMessage"}},en=function(e,t){return{type:"message/randomMsg/updateMessageItem",item:e,index:t}},tn=function(e){return function(t){D.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u6761\u5185\u5bb9\u5417\uff1f",onOk:function(){t({type:"message/randomMsg/deleteMessageItem",index:e})}})}},an=function(){return{type:"message/randomMsg/saveMessage"}},nn=function(e,t){return function(a){D.a.confirm({title:e._id?"\u786e\u5b9a\u4fdd\u5b58\u8fd9\u4fa7\u4fee\u6539\u5417\uff1f":"\u786e\u5b9a\u521b\u5efa\u4e00\u6761\u65b0\u6d88\u606f\u5417\uff1f",onOk:function(){A.post("/messageRandom/"+(e._id?"update":"create"),Object(O.a)({},e)).then(function(e){var a=e.data,n=a.code,o=a.msg;1===n?(P.a.success(o),t.goBack()):P.a.error(o)})}})}},on=function(e){return function(t){e.goBack()}},rn=function(e){return{type:"message/randomMsg/initRandomMsgInfo",info:e}},cn=function(){return{type:"message/randomMsg/resetState"}},ln=Object(M.c)({group:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0,a=JSON.parse(JSON.stringify(e));switch(t.type){case"gonghao/group/getMessageList":return a.messageList=Object(_.a)(t.data),a;case"gonghao/group/getTagList":return a.tagList=Object(_.a)(t.data),a;case"gonghao/group/changeTagId":return!t.isTiming&&(a.sendInfo.tagId=t.value),t.isTiming&&(a.sendTimingInfo.tagId=t.value),a;case"gonghao/group/closeModal":return a.sendInfo=a.sendTimingInfo={},a.sendTimingInfo.timing=Date.now(),a.sendTimingInfo.isTiming=a.sendTimingModal=a.sendModal=!1,a;case"gonghao/group/openModal":return a.sendInfo.id=t.record._id,a.sendInfo.tagId=t.record.tagId,a.sendInfo.mediaId=t.record.media_id,a.sendModal=!0,a;case"gonghao/group/openTimingModal":return a.sendTimingInfo.id=t.record._id,a.sendTimingInfo.tagId=t.record.tagId,a.sendTimingInfo.isTiming=t.record.isTiming,a.sendTimingInfo.timing=t.record.timing,a.sendTimingModal=!0,a;case"gonghao/group/changeTimingState":return a.sendTimingInfo.isTiming=t.value,a;case"gonghao/group/changeTime":"date"===t.timeType?a.date=t.time:a.time=t.time;var n=new Date(a.date+" "+a.time);return a.sendTimingInfo.timing=n.getTime(),a;case it:return a.messageList.unshift(Object(O.a)({},t.data)),a;case"gonghao/group/deleteMaterial":return a.messageList.splice(t.index,1),a;case"gonghao/group/clearMaterial":return a.messageList=[],a;case"gonghao/group/openUpdateMaterialModal":return a.updateMaterialModal=!0,a.updateInfo=t.updateInfo,a;case"gonghao/group/closeUpdateMaterialModal":return a.updateMaterialModal=!1,a.updateInfo.articles.content_source_url="",a;case"gonghao/group/changeContentSourceUrl":return a.updateInfo.articles.content_source_url=t.content_source_url,a;case"gonghao/group/getHistoryList":return a.historyList=Object(_.a)(t.data),a;case"gonghao/group/openMsgModal":return a.historyMsgModal=!0,a.delMsgInfo.code=t.code,a.delMsgInfo.msg_id=t.msg_id,a;case"gonghao/group/closeMsgModal":return a.historyMsgModal=!1,a.delMsgInfo.article_idx="",a;case"gonghao/group/changeArticleIdx":return a.delMsgInfo.article_idx=t.value,a;case"gonghao/group/clearHistory":return a.historyList=[],a;case"gonghao/group/changeDate":return a.delDate=t.delDate,a;case"gonghao/group/resetState":return a=lt;default:return e}},kefu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0,a=JSON.parse(JSON.stringify(e));switch(t.type){case"message/kefu/getKefuMessageList":return a.allMessageList=Object(_.a)(t.kefuMessageList),a.total=t.total,a.messageGroup?a.kefuMessageList=a.allMessageList.filter(function(e){return e.group===a.messageGroup}):a.nick_name?a.kefuMessageList=a.allMessageList.filter(function(e){var t=[];return e.gonghaoList.map(function(e){e.nick_name===a.nick_name&&t.push(e)}),t.length>0}):a.kefuMessageList=a.allMessageList,a;case"message/kefu/createKefuMessage":return a.kefuMessageList.unshift(Object(O.a)({},t.data)),a;case"message/kefu/deleteLastMessage":return a.kefuMessageList=[],a;case"message/kefu/deleteMessage":return a.kefuMessageList.splice(t.index,1),a;case"message/kefu/changeSelectedMessages":return a.selectedMessages=t.selectedMessages,a;case"message/kefu/openUpdateGroupModal":return a.updateGroupModal=!0,a;case"message/kefu/changeGroup":return a.group=t.value,a;case"message/kefu/cancelUpdateGroup":return a.updateGroupModal=!1,a.group="",a;case"message/kefu/updateMoreGroup":return a.selectedMessages=[],a;case"message/kefu/searchByNickName":return a.kefuMessageList=t.data,a.nick_name=t.nick_name,a.total=t.total,a.currentPage=t.page,a.messageGroup="",a.messageType=4,a;case"message/kefu/changeNickName":return a.nick_name=t.value,a;case"message/kefu/changeMessageType":return a.messageType=t.value,a.kefuMessageList=t.data,a.total=t.total,a.currentPage=t.page,a.nick_name=a.messageGroup="",a;case"message/kefu/changeMessageGroup":return a.messageGroup=t.group,a.kefuMessageList=t.data,a.total=t.total,a.currentPage=t.page,a.nick_name="",a.messageType=4,a;case"message/kefu/changeContentValue":return a.content[t.name]=t.value,a.kefuMessageInfo.contents.splice(a.messageIndex,1,a.content),a;case"message/kefu/changeMessageValue":return a.kefuMessageInfo[t.name]=t.value,"type"===t.name&&(a.content=Ft,a.kefuMessageInfo.contents=[],a.kefuMessageInfo.img=a.kefuMessageInfo.img_path="",a.messageIndex=-1,0===t.value&&(a.kefuMessageInfo.contents.push(a.content),a.messageIndex=0)),"channel"===t.name&&Object.assign(a.kefuMessageInfo,{timing_time:new Date,delay:5,daily_time_show:new Date}),a;case"message/kefu/addMessage":return a.content=Ft,a.kefuMessageInfo.contents.push(a.content),a.messageIndex=a.kefuMessageInfo.contents.length-1,a;case"message/kefu/selectMessage":return a.content=Object(O.a)({},t.info),a.messageIndex=t.index,a;case"message/kefu/selectParams":return a.paramsModal=!0,a;case"message/kefu/hideParamsModal":return a.paramsModal=!1,a;case"message/kefu/getAllCodes":return a.allCodes=Object(_.a)(t.allCodes),a;case"message/kefu/selectGonghao":return a.kefuMessageInfo.codes=Object(_.a)(t.codes),a;case"message/kefu/initKefuMessageInfo":return a.kefuMessageInfo=Object(O.a)({},t.query),a.kefuMessageInfo.contents.length>0&&(a.content=Object(O.a)({},a.kefuMessageInfo.contents[0])),0===a.kefuMessageInfo.type&&(a.messageIndex=0),t.query.task?a.kefuMessageInfo.channel=1:t.query.is_timing?a.kefuMessageInfo.channel=2:t.query.is_daily?a.kefuMessageInfo.channel=3:a.kefuMessageInfo.channel=0,a.kefuMessageInfo.isHour&&(a.kefuMessageInfo.delay=a.kefuMessageInfo.delay/60),!a.kefuMessageInfo.isHour&&(a.kefuMessageInfo.isHour=0),a;case"message/kefu/openPreviewModal":return a.previewModal=!0,a;case"message/kefu/closePreviewModal":return a.previewModal=!1,a.openid="",a;case"message/kefu/changeOpenId":return a.openid=t.value,a;case"message/kefu/getAllGroup":return a.allGroup=Object(_.a)(t.allGroup),a;case"message/kefu/showGroupInput":return a.groupInputVisible=!0,setTimeout(function(){t.that.input.focus()},500),a;case"message/kefu/handleGroupInputChange":return a.groupValue=t.value,a;case"message/kefu/handleGroupInputConfirm":return Object.keys(t.data).length>0&&a.allGroup.push(t.data),a.groupInputVisible=!1,a.groupValue="",a;case"message/kefu/handleClose":return a.allGroup.splice(t.index,1),a;case"message/kefu/cancelSelectGroup":return a.kefuMessageInfo.group="\u672a\u5206\u7ec4",a;case"message/kefu/changePage":return a.currentPage=t.page,a;case"message/kefu/resetState":var n=a,o=n.currentPage,r=n.messageGroup,c=n.nick_name,i=n.messageType;return(a=Vt).currentPage=o,a.messageGroup=r,a.messageType=i,a.nick_name=c,a;default:return e}},template:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ma,t=arguments.length>1?arguments[1]:void 0,a=JSON.parse(JSON.stringify(e));switch(t.type){case"message/template/getTemplateList":return a.templateMessageList=t.data,a.confName="",a;case"message/template/deleteTemplate":return a.templateMessageList.splice(t.index,1),a;case"message/template/changeConfNickName":return a.confName=t.value,a;case"message/template/searchConfName":return a.templateMessageList=t.data,a.confName="",a;case"message/template/sendTemplate":var n=a.templateMessageList.map(function(e){return e._id===t.id&&(e.status=1),e});return a.templateMessageList=n,a;case"message/template/getAllCodes":return a.allCodes=t.allCodes,a;case"message/template/openSelectModal":return a.selectGonghaoModal=!0,a;case"message/template/openEditModal":return a.name=t.key,a.content=t.content,a.templateModalVisible=!0,a;case"message/template/closeTemplateModal":return a.name="",a.templateModalVisible=!1,a.content={value:"",color:"#000"},a;case"message/template/changeTemplate":for(var o in a.templateInfo=a.templateList.filter(function(e){return e.template_id===t.value})[0],a.messageInfo.templateId=a.templateInfo.template_id,a.messageInfo.content={},a.templateInfo.data)a.messageInfo.content[o]={value:"",color:"#000"};return a;case"message/template/editTemplate":return a.content[t.key]=t.value,a;case"message/template/saveTemplateModal":return a.messageInfo.content[a.name]=a.content,a.name="",a.templateModalVisible=!1,a.content={value:"",color:"#000"},a;case"message/template/changeMessageInfo":return a.messageInfo[t.key]=t.value,"is_timing"===t.key&&(a.messageInfo.timing_time=new Date),a;case"message/template/confirmSelect":for(var r in a.templateList=t.templateList,a.templateInfo=t.templateInfo,a.messageInfo.templateId=a.templateInfo.template_id,a.templateInfo.data)a.messageInfo.content[r]={value:"",color:"#000"};return a;case"message/template/closeSelectModal":return a.selectGonghaoModal=!1,a;case"message/template/openPreviewModal":return a.previewModal=!0,a;case"message/template/closePreviewModal":return a.previewModal=!1,a.openid="",a;case"message/template/changeOpenId":return a.openid=t.value,a;case"message/template/initMessageInfo":return a.messageInfo=JSON.parse(JSON.stringify(t.record)),a.templateList=t.templateList,a.templateInfo=a.templateList.filter(function(e){return e.template_id===t.record.templateId})[0],a;case"message/template/resetState":return a=Ma;default:return e}},randomMsg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa,t=arguments.length>1?arguments[1]:void 0,a=JSON.parse(JSON.stringify(e));switch(t.type){case"message/randomMsg/getRandomMessageList":return a.randomMessageList=t.data,a;case"message/randomMsg/changeMessageValue":return a.randomMessageInfo[t.name]=t.value,a;case"message/randomMsg/changeMessageType":return a.message_info.type=t.value,a.content=Object(O.a)({},Ha),a;case"message/randomMsg/changeContentValue":return a.content[t.name]=t.value,a;case"message/randomMsg/addMessage":return a.message_info.contents[0]=Object(O.a)({},a.content),a.randomMessageInfo.message_array.push(a.message_info),a.content=Object(O.a)({},Ha),a;case"message/randomMsg/updateMessageItem":return a.message_info=t.item,a.content=a.message_info.contents[0],a.currentIndex=t.index,a;case"message/randomMsg/deleteMessageItem":return a.randomMessageInfo.message_array.splice(t.index,1),a.content=Object(O.a)({},Ha),a.currentIndex=-1,a;case"message/randomMsg/saveMessage":return a.message_info.contents[0]=a.content,a.randomMessageInfo.message_array.splice(a.currentIndex,1,a.message_info),a.content=Object(O.a)({},Ha),a.currentIndex=-1,a;case"message/randomMsg/resetState":return a=qa;case"message/randomMsg/initRandomMsgInfo":return a.randomMessageInfo=t.info,a.content=a.randomMessageInfo.message_array[0].contents[0],a.message_info.type=a.randomMessageInfo.message_array[0].type,a.currentIndex=0,a;default:return e}}}),sn=ln,un=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise(function(t,a){A.get("/novelLinks/show",{params:{page:e}}).then(function(e){var a=e.data,n=a.data,o=a.domain_name,r=a.count;t({type:"channel/links/getNovelLinkList",novelLinkList:n,domain_name:o,count:r})})})},mn=function(){return function(){var e=Object(x.a)(S.a.mark(function e(t){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un();case 2:a=e.sent,t(a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},gn=function(e){return function(){var t=Object(x.a)(S.a.mark(function t(a){var n;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,un(e);case 3:return t.t1=t.sent,(0,t.t0)(t.t1),n={type:"channel/links/changePage",page:e},t.next=8,F();case 8:return t.next=10,a(n);case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},dn=function(e,t){return function(a){D.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u6761\u94fe\u63a5\u5417\uff1f",onOk:function(){A.post("/novelLinks/delete_one",{id:e}).then(function(e){e.data.message&&(P.a.info(e.data.message),a({type:"channel/links/deleteNovel",index:t}))})}})}},pn=function(e,t){return console.log(e,t),function(a){e?A.post("/novelLinks/goTop",{id:t}).then(function(e){e.data.success&&(P.a.success(e.data.success),a(mn()))}):A.post("/novelLinks/cancelGoTop",{id:t}).then(function(e){e.data.success&&(P.a.success(e.data.success),a(mn()))})}},fn=function(e,t){return function(a){var n=t.history.location.query,o=n?"\u786e\u8ba4\u4fdd\u5b58\u4fee\u6539\u5417\uff1f":"\u786e\u8ba4\u521b\u5efa\u4e00\u6761\u65b0\u7684\u5c0f\u8bf4\u94fe\u63a5\u5417\uff1f",r=n?"/novelLinks/update":"/novelLinks/add",c=n?"\u4fdd\u5b58\u6210\u529f":"\u521b\u5efa\u6210\u529f";!n&&e._id&&A.get("/novelLinks/get_content",{params:{_id:e._id}}).then(function(t){(e=t.data.data).id=In()});var i=e.remarks;D.a.confirm({title:o,onOk:function(){A.post(r,Object(O.a)({},e,{remarks:i})).then(function(){var o=Object(x.a)(S.a.mark(function o(r){return S.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!r.data.err){o.next=4;break}P.a.info(r.data.err),o.next=11;break;case 4:return(!n&&!e._id||e._id&&n)&&t.history.goBack(),P.a.success(c),o.t0=a,o.next=9,un();case 9:o.t1=o.sent,(0,o.t0)(o.t1);case 11:case"end":return o.stop()}},o)}));return function(e){return o.apply(this,arguments)}}())}})}},hn=function(e,t){return{type:"channel/links/handleInputChange",value:e,name:t}},yn=function(){return function(e){P.a.error("\u56fe\u7247\u4e0d\u5f97\u8d85\u8fc7500k,\u8bf7\u538b\u7f29\u540e\u518d\u6b21\u4e0a\u4f20")}},vn=function(e){return{type:"channel/links/initNovelInfo",record:e}},bn=function(e){return function(t){A.get("/novelLinks/get_content",{params:{_id:e}}).then(function(e){var a=e.data.data;t({type:"channel/links/getContent",data:a})})}},kn=function(){return{type:"channel/links/resetState"}},En=function(){return{type:"channel/links/deleteFinalImg"}},In=function(){for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t="",a=8;a>0;--a)t+=e[Math.floor(Math.random()*e.length)];return t},Mn={type:0,id:In(),gonghao_id:"",pageTitle:"",name:"",picurl:"",capter:"",remarks:"",imgUrl:"",finalImg:"",finalImgUrl:"",gonghaoLogo:"",gonghaoLogoUrl:"",domain_name:"https://t.1yuedu.cn",company:"",bgcolor:"#fff",suffix:"\u256d(\u256f\u03b5\u2570)\u256e"},Cn={novelLinkList:[],domain_name:"",count:null,currentPage:1,novelInfo:Object(O.a)({},Mn)},On=Object(M.c)({links:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cn,t=arguments.length>1?arguments[1]:void 0,a=JSON.parse(JSON.stringify(e));switch(t.type){case"channel/links/getNovelLinkList":return a.novelLinkList=Object(_.a)(t.novelLinkList),a.domain_name=t.domain_name,a.count=t.count,a;case"channel/links/changePage":return a.currentPage=t.page,a;case"channel/links/deleteNovel":return a.novelLinkList.splice(t.index,1),a;case"channel/links/handleInputChange":return a.novelInfo[t.name]=t.value,"picurl"===t.name&&(a.novelInfo.imgUrl=a.domain_name+t.value),"finalImg"===t.name&&(a.novelInfo.finalImgUrl=a.domain_name+t.value),"gonghaoLogo"===t.name&&(a.novelInfo.gonghaoLogoUrl=a.domain_name+t.value),a;case"channel/links/initNovelInfo":return a.novelInfo=Object(O.a)({},t.record),a.novelInfo.imgUrl=a.domain_name+t.record.picurl,a.novelInfo.finalImgUrl=a.domain_name+t.record.finalImg,a.novelInfo.gonghaoLogoUrl=a.domain_name+t.record.gonghaoLogo,a;case"channel/links/getContent":return a.novelInfo.capter=t.data.capter,a;case"channel/links/deleteFinalImg":return a.novelInfo.finalImg=a.novelInfo.finalImgUrl="",a;case"channel/links/resetState":return a=Cn;default:return e}}}),_n=On,wn=Object(M.c)({gonghao:ct,message:sn,channel:_n}),Ln=wn,Sn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||M.d,xn=Object(M.e)(Ln,Sn(Object(M.a)(C.a))),Nn=xn,jn=a(30),Tn=(a(752),a(443)),Gn=a(9),An=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(v.a)(t).call(this,e))).login=a.login.bind(Object(jn.a)(a)),a.state={loginInfo:{username:"",password:""}},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.state.loginInfo,n={minHeight:"100vh",backgroundSize:"100%",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed",backgroundImage:"url(".concat(a(753),")")};return g.a.createElement("div",{className:"login-bg",style:n},g.a.createElement("div",{className:"bg-mask"}),g.a.createElement("div",{className:"content-wrapper"},g.a.createElement("div",{className:"content"},g.a.createElement("p",{className:"title"},"\u660e\u661f\u8bf4\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"),g.a.createElement("p",null,"\u8fd0\u8425\u4e0e\u7ba1\u63a7\u4e00\u4f53\u5316\u7684\u6574\u5408\u5f0f\u670d\u52a1\u5e73\u53f0"),g.a.createElement("p",null,"\u4e00\u8d77\u89e3\u6784\u6570\u5b57\u4e16\u754c\uff0c\u78b0\u649e\u79d1\u6280\u521b\u65b0\u601d\u60f3"))),g.a.createElement("div",{className:"login-form-wrapper"},g.a.createElement("div",{className:"login-form"},g.a.createElement("h4",{className:"login-title"},"\u767b\u5f55"),g.a.createElement(Tn.a,{value:t.username,size:"large",onChange:function(t){return e.changeInputValue(t.target.value,"username")},prefix:g.a.createElement(Gn.a,{type:"user",style:{color:"rgba(0,0,0,.25)",marginRight:10}}),style:{marginBottom:30},placeholder:"\u7528\u6237\u540d",onKeyUp:function(t){return 13===t.keyCode&&e.login()}}),g.a.createElement(Tn.a,{value:t.password,size:"large",type:"password",onChange:function(t){return e.changeInputValue(t.target.value,"password")},prefix:g.a.createElement(Gn.a,{type:"lock",style:{color:"rgba(0,0,0,.25)",marginRight:10}}),placeholder:"\u5bc6\u7801",onKeyUp:function(t){return 13===t.keyCode&&e.login()}}),g.a.createElement("button",{className:"login-btn cursor",onClick:this.login},"\u767b\u5f55"))))}},{key:"changeInputValue",value:function(e,t){var a=this.state.loginInfo;a[t]=e,this.setState(function(e){return{loginInfo:Object(O.a)({},e.loginInfo,{},a)}})}},{key:"login",value:function(){var e=this,t=this.state.loginInfo;t.username&&t.password?(t.password=this.$MD5(t.password).toString(),A.post("/account/login",Object(O.a)({},t)).then(function(t){var a=t.data,n=a.code,o=a.msg,r=a.data;if(-1===n)P.a.error(o);else{var c=JSON.stringify(r[0]);localStorage.setItem("userInfo",c),window.location.href="/admin",e.setState({loginInfo:{}}),P.a.success(o)}})):P.a.warning("\u7528\u6237\u540d\u6216\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a")}}]),t}(m.Component),Pn=An,Dn=a(966),Fn=a(978),Vn=a(155),Rn=a(963),Un=a(964),zn=a(972),Kn=(a(758),function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={userInfo:{}},a.updateInfo=function(){var e=a.props.form.getFieldsValue,t=a.state.userInfo._id,n=e(),o=n.username,r=n.password;r.trim()&&o.trim()?D.a.confirm({title:"\u786e\u5b9a\u4fee\u6539\u7528\u6237\u4fe1\u606f\u5417\uff1f",onOk:function(){var e=a.$MD5(r).toString();j.a.put("/account",{id:t,username:o,password:e}).then(function(e){var t=e.data,n=t.code,o=t.msg;1===n?(P.a.success(o+"\u8bf7\u91cd\u65b0\u767b\u5f55"),a.cancelUpdate(),localStorage.setItem("userInfo",""),window.location.href="/admin/login"):P.a.error(o)})}}):P.a.error("\u8bf7\u68c0\u67e5\u8f93\u5165\u662f\u5426\u6709\u8bef\uff0c\u5bc6\u7801\u9996\u5c3e\u4e0d\u80fd\u4e3a\u7a7a\u683c")},a.cancelUpdate=function(){var e=a.props.form.setFieldsValue;a.setState({showUpdateModal:!1}),e({password:""})},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("userInfo");e&&(e=JSON.parse(e),this.setState({userInfo:e}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.userInfo,o=t.showUpdateModal,r=this.props.form.getFieldDecorator;return g.a.createElement("div",{className:"header-wrapper"},g.a.createElement(E.b,{to:"/"},g.a.createElement("img",{className:"logo fl",src:a(760),alt:""})),g.a.createElement("div",{className:"user-info fr"},g.a.createElement(Vn.a,{title:"\u5e2e\u52a9\u6587\u6863"},g.a.createElement("a",{href:"http://t.dmmup.com/\u5e73\u53f0\u63a5\u7ba1\u53ca\u53d1\u6587\u65b9\u5f0f.pdf",target:"__blank"},g.a.createElement(Rn.a,{size:25,icon:"question",style:{marginRight:10,color:"#f56a00",backgroundColor:"#fde3cf"}}))),g.a.createElement(Rn.a,{size:25,icon:"user"}),g.a.createElement(Un.a,{content:g.a.createElement(g.a.Fragment,null,g.a.createElement("p",{style:{fontSize:12,marginBottom:10},className:"cursor",onClick:function(){return e.setState({showUpdateModal:!0})}},g.a.createElement(Gn.a,{style:{marginRight:5},type:"edit"}),"\u4fee\u6539\u4fe1\u606f"),g.a.createElement("p",{style:{fontSize:12},className:"cursor",onClick:Bn},g.a.createElement(Gn.a,{style:{marginRight:5},type:"logout"}),"\u9000\u51fa"))},g.a.createElement("div",{className:"user fr cursor"},g.a.createElement("p",null,n.username,","),g.a.createElement("p",null,"\u6b22\u8fce\u56de\u6765",g.a.createElement(Gn.a,{type:"down"})))),g.a.createElement(D.a,{visible:o,title:"\u4fee\u6539\u7528\u6237\u4fe1\u606f",onOk:this.updateInfo,onCancel:this.cancelUpdate},g.a.createElement(zn.a,{labelCol:{span:4},wrapperCol:{span:20}},g.a.createElement(zn.a.Item,{label:"\u7528\u6237\u540d\uff1a"},r("username",{initialValue:n.username})(g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}))),g.a.createElement(zn.a.Item,{label:"\u65b0\u5bc6\u7801\uff1a"},r("password",{rules:[{required:!0,message:"\u767b\u5f55\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"}]})(g.a.createElement(Tn.a,{type:"password",placeholder:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"})))))))}}]),t}(m.Component)),Bn=function(){localStorage.setItem("userInfo",""),P.a.success("\u9000\u51fa\u767b\u5f55\u6210\u529f"),setTimeout(function(){window.location.href="/admin/login"},500)},Jn=zn.a.create()(Kn),Hn=a(157),qn=(a(832),Hn.a.SubMenu),Yn=Hn.a.Item,Wn=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).menuList=[{keyIndex:"gonghao",title:"\u516c\u53f7\u7ba1\u7406",icon:"appstore",role:2,subMenuList:[{keyIndex:"tuoguan",title:"\u516c\u53f7\u6258\u7ba1",path:"/admin/gonghao/tuoguan"},{keyIndex:"menu",title:"\u83dc\u5355\u914d\u7f6e",path:"/admin/gonghao/menu"},{keyIndex:"reply",title:"\u81ea\u52a8\u56de\u590d",path:"/admin/gonghao/reply"},{keyIndex:"timingReply",title:"\u5b9a\u65f6\u8bbe\u7f6e\u81ea\u52a8\u56de\u590d",power:1,path:"/admin/gonghao/timingReply"}]},{keyIndex:"message",title:"\u6d88\u606f\u7ba1\u7406",icon:"snippets",role:2,subMenuList:[{keyIndex:"kefu",title:"\u5ba2\u670d\u6d88\u606f",path:"/admin/message/kefu"},{keyIndex:"randomKefu",title:"\u968f\u673a\u5ba2\u670d\u6d88\u606f",power:1,path:"/admin/message/randomKefu/index"},{keyIndex:"group",title:"\u7fa4\u53d1\u6d88\u606f",path:"/admin/message/group"},{keyIndex:"template",title:"\u6a21\u677f\u6d88\u606f",path:"/admin/message/template"}]},{keyIndex:"channel",title:"\u6295\u653e\u63a8\u5e7f",icon:"control",role:2,subMenuList:[{keyIndex:"novelLinks",title:"\u6295\u653e\u94fe\u63a5",power:1,path:"/admin/channel/novelLinks/index"},{keyIndex:"management",title:"\u6295\u653e\u6e20\u9053",power:1,path:"/admin/channel/management"},{keyIndex:"jointDebugging",title:"\u5934\u6761\u8054\u8c03",power:1,path:"/admin/channel/jointDebugging"},{keyIndex:"zhuishuyun",title:"\u8ffd\u4e66\u4e91\u94fe\u63a5",power:1,path:"/admin/channel/zhuishuyun"},{keyIndex:"spread",title:"\u63a8\u5e7f\u94fe\u63a5",path:"/admin/channel/spread/index"}]},{keyIndex:"tools",title:"\u4fbf\u6377\u5de5\u5177",icon:"setting",role:2,subMenuList:[{keyIndex:"tikTok",title:"\u6296\u97f3\u6c34\u5370",path:"/admin/tools/tikTok"}]},{keyIndex:"account",title:"\u8d26\u6237\u7ba1\u7406",icon:"user",role:0,subMenuList:[{keyIndex:"list",title:"\u8d26\u6237\u7ba1\u7406",path:"/admin/account/list"},{keyIndex:"add",title:"\u65b0\u589e\u7528\u6237",path:"/admin/account/add"}]}],a.state={selectedKeys:[],role:null,power:0},a.onSelect=function(){var e=Object(x.a)(S.a.mark(function e(t){var n,o;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.selectedKeys.find(function(e){return-1===a.state.selectedKeys.indexOf(e)}),o=[],e.next=4,a.menuList.map(function(e){return o=[].concat(Object(_.a)(o),Object(_.a)(e.subMenuList))});case 4:return e.next=6,o.find(function(e){return e.keyIndex===n&&a.setState({selectedKeys:n?[n]:[2===a.state.role?"tuoguan":"list"]})});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=localStorage.getItem("userInfo");e&&(e=JSON.parse(e),this.setState({role:e.role,power:e.power,selectedKeys:[window.location.pathname.split("/")[3]||(2===e.role?"tuoguan":"list")]}))}},{key:"render",value:function(){var e=this,t=window.location.pathname,a=this.menuList.map(function(t,a){if(t.role===e.state.role){var n=t.subMenuList.map(function(t){return(e.state.power===t.power||!t.power)&&g.a.createElement(Yn,{key:t.keyIndex},g.a.createElement(E.b,{to:t.path},t.title))});return g.a.createElement(qn,{key:t.keyIndex,title:g.a.createElement("span",{className:"side-item"},g.a.createElement(Gn.a,{className:"side-icon",type:t.icon}),g.a.createElement("span",null,t.title))},n)}return""});return g.a.createElement("div",{className:"side-wrapper"},g.a.createElement(Hn.a,{mode:"inline",theme:"light",selectedKeys:this.state.selectedKeys,defaultOpenKeys:[window.location.pathname.split("/")[2]||(2===this.state.role?"gonghao":"account")],onSelect:this.onSelect,defaultSelectedKeys:[t]},a))}}]),t}(m.Component),Zn=Wn,Xn=a(977),$n=a(965),Qn=(a(838),{"/gonghao":"\u516c\u53f7\u7ba1\u7406","/gonghao/tuoguan":"\u516c\u53f7\u6258\u7ba1","/gonghao/tuoguan/group":"\u5206\u7ec4\u7ba1\u7406","/gonghao/tuoguan/error":"\u9519\u8bef\u4fe1\u606f","/gonghao/tuoguan/config":"\u516c\u53f7\u914d\u7f6e","/gonghao/tuoguan/config/create":"\u65b0\u5efa\u914d\u7f6e","/gonghao/tuoguan/config/update":"\u4fee\u6539\u914d\u7f6e","/gonghao/menu":"\u914d\u7f6e\u83dc\u5355","/gonghao/menu/create":"\u65b0\u5efa\u83dc\u5355","/gonghao/menu/update":"\u4fee\u6539\u83dc\u5355","/gonghao/reply":"\u81ea\u52a8\u56de\u590d","/gonghao/reply/create":"\u65b0\u5efa\u7d20\u6750","/gonghao/reply/update":"\u4fee\u6539\u7d20\u6750","/gonghao/timingReply":"\u5b9a\u65f6\u8bbe\u7f6e\u81ea\u52a8\u56de\u590d","/message":"\u6d88\u606f\u7ba1\u7406","/message/kefu":"\u5ba2\u670d\u6d88\u606f","/message/kefu/create":"\u65b0\u5efa\u6d88\u606f","/message/kefu/update":"\u4fee\u6539\u6d88\u606f","/message/randomKefu/index":"\u968f\u673a\u5ba2\u670d\u6d88\u606f","/message/randomKefu/create":"\u65b0\u5efa\u968f\u673a\u5ba2\u670d\u6d88\u606f","/message/randomKefu/update":"\u4fee\u6539\u968f\u673a\u5ba2\u670d\u6d88\u606f","/message/group":"\u7fa4\u53d1\u6d88\u606f","/message/group/material":"\u7fa4\u53d1\u7d20\u6750","/message/group/history":"\u5386\u53f2\u8bb0\u5f55","/message/template":"\u6a21\u677f\u6d88\u606f","/message/template/create":"\u521b\u5efa\u6d88\u606f","/message/template/update":"\u4fee\u6539\u6d88\u606f","/channel":"\u6295\u653e\u63a8\u5e7f","/channel/novelLinks":"\u6295\u653e\u94fe\u63a5","/channel/novelLinks/create":"\u521b\u5efa\u94fe\u63a5","/channel/novelLinks/update":"\u4fee\u6539\u94fe\u63a5","/channel/management":"\u6295\u653e\u6e20\u9053","/channel/jointDebugging":"\u5934\u6761\u8054\u8c03","/channel/zhuishuyun":"\u8ffd\u4e66\u4e91\u94fe\u63a5","/channel/spread":"\u63a8\u5e7f\u94fe\u63a5","/channel/spread/create":"\u521b\u5efa\u7d20\u6750","/channel/spread/update":"\u4fee\u6539\u7d20\u6750","/source":"\u7d20\u6750\u5e93","/source/group":"\u56fe\u6587\u7d20\u6750","/source/group/create":"\u65b0\u5efa\u7d20\u6750","/source/group/update":"\u4fee\u6539\u7d20\u6750","/wechat/qrcode":"\u53c2\u6570\u4e8c\u7ef4\u7801","/wechat/qrcode/create":"\u65b0\u589e\u4e8c\u7ef4\u7801","/wechat/qrcode/update":"\u4fee\u6539\u4e8c\u7ef4\u7801","/tools":"\u4fbf\u6377\u5de5\u5177","/tools/tikTok":"\u6296\u97f3\u53bb\u6c34\u5370","/account":"\u8d26\u6237\u7ba1\u7406","/account/list":"\u8d26\u6237\u5217\u8868","/account/add":"\u65b0\u589e\u8d26\u6237"}),eo=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(v.a)(t).call(this,e))).getPath=function(){a.setState({pathSnippets:window.location.pathname.split("/").slice(2)}),a.setState(function(e){return{extraBreadcrumbItems:e.pathSnippets.map(function(t,a){var n="/".concat(e.pathSnippets.slice(0,a+1).join("/"));return g.a.createElement(Xn.a.Item,{key:n},Qn[n])})}})},a.seeDetail=function(){$n.a.info({message:"\u7cfb\u7edf\u670d\u52a1\u5f02\u5e38\u516c\u544a",description:"\u4e8e2020\u5e741\u670821\u65e522\uff1a30\u5206\u5de6\u53f3\u5e73\u53f0\u51fa\u73b0\u670d\u52a1\u5f02\u5e38\uff0c\u90e8\u5206\u529f\u80fd\u6545\u969c\uff0c\u5df2\u4e8e\u5f53\u65e523:50\u6392\u67e5\u4fee\u590d\uff0c\u8bf7\u5404\u4f4d\u5c0f\u4f19\u4f34\u77e5\u6089\u3002\u7ed9\u5927\u5bb6\u5e26\u6765\u4e0d\u4fbf\uff0c\u656c\u8bf7\u8c05\u89e3\u3002\u5982\u56e0\u62c5\u5fc3\u518d\u6b21\u6545\u969c\u5f71\u54cd\u4f7f\u7528\uff0c\u8bf7\u81ea\u884c\u5728\u5fae\u4fe1\u516c\u4f17\u540e\u53f0\u89e3\u9664\u6388\u6743\u3002",style:{width:600,marginLeft:-265}})},a.state={pathSnippets:null,extraBreadcrumbItems:null},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(){this.getPath()}},{key:"componentDidMount",value:function(){this.getPath()}},{key:"render",value:function(){var e=this.state.extraBreadcrumbItems;return g.a.createElement("div",{className:"bread-wrapper"},g.a.createElement("div",{className:"bread-nav"},g.a.createElement(Xn.a,null,e)),g.a.createElement("div",{className:"notice"},g.a.createElement("span",{className:"notice-title"},"\u3010\u7cfb\u7edf\u901a\u77e5\u3011"),g.a.createElement("span",{onClick:this.seeDetail,className:"notice-desc textEllipsis"},"\u4e8e2020\u5e741\u670821\u65e522\uff1a30\u5206\u5de6\u53f3\u5e73\u53f0\u51fa\u73b0\u670d\u52a1\u5f02\u5e38\uff0c\u90e8\u5206\u529f\u80fd\u6545\u969c\uff0c\u5df2\u4e8e\u5f53\u65e523:50\u6392\u67e5\u4fee\u590d\uff0c\u8bf7\u5404\u4f4d\u5c0f\u4f19\u4f34\u77e5\u6089\u3002\u7ed9\u5927\u5bb6\u5e26\u6765\u4e0d\u4fbf\uff0c\u656c\u8bf7\u8c05\u89e3\u3002\u5982\u56e0\u62c5\u5fc3\u518d\u6b21\u6545\u969c\u5f71\u54cd\u4f7f\u7528\uff0c\u8bf7\u81ea\u884c\u5728\u5fae\u4fe1\u516c\u4f17\u540e\u53f0\u89e3\u9664\u6388\u6743\u3002")))}}]),t}(m.Component),to=Object(I.g)(eo),ao=(a(839),Dn.a.Content),no=Dn.a.Sider,oo=Dn.a.Header,ro=Dn.a.Footer,co=function(e){return g.a.createElement(Dn.a,{className:"basic-layout"},g.a.createElement(Jn,null),g.a.createElement(Dn.a,null,g.a.createElement(no,{collapsible:!0,className:"basic-sider",theme:"light",width:"180"},g.a.createElement(Zn,null)),g.a.createElement(Dn.a,null,g.a.createElement(ao,{className:"basic-content"},g.a.createElement(Fn.a,{className:"basic-card"},g.a.createElement(Dn.a,null,g.a.createElement(oo,{className:"basic-header"},g.a.createElement(to,null)),g.a.createElement(ao,null,e.content),g.a.createElement("div",{className:"connect"},g.a.createElement(Gn.a,{type:"customer-service",theme:"filled"}),g.a.createElement("p",null,"\u5ba2\u670d"),g.a.createElement("div",{className:"connect-method"},g.a.createElement("img",{className:"connect-qrcode",src:"http://t.dmmup.com/uploads/1861795c12c690ef4df709abcaf73fc2.jpg",alt:""}),g.a.createElement("p",{className:"connect-title"},"\u5fae\u4fe1\u626b\u63cf\u4e8c\u7ef4\u7801\uff0c\u54a8\u8be2\u5ba2\u670d")))))),g.a.createElement(ro,{className:"basic-footer"},"Copyright\xa92019  \u6700\u7ec8\u89e3\u91ca\u6743\u5f52\u672c\u516c\u53f8\u6240\u6709"))))},io=a(182),lo=a(979),so=a(447),uo=a(231),mo=(a(841),a(66)),go={warning:"#F39C12",danger:"#E74C3C",success:"#2ECC71",info:"#7F8C8D",update:"#3498DB"},po=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={buttonStyle:{background:"#3498DB",color:"#fff",marginRight:5,marginLeft:0,marginBottom:0}},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.background,a=void 0===t?"update":t,n=e.color,o=void 0===n?"#fff":n,r=e.mr,c=void 0===r?5:r,i=e.ml,l=void 0===i?0:i,s=e.mb,u=void 0===s?0:s;this.setState({buttonStyle:{background:go[a],color:o,marginRight:c,marginLeft:l,marginBottom:u}})}},{key:"render",value:function(){var e=this.props,t=e.size,a=void 0===t?"small":t,n=e.buttonContent,o=e.disabled,r=void 0!==o&&o,c=e.onClick,i=this.state.buttonStyle;return g.a.createElement(mo.a,{size:a,disabled:r,style:i,onClick:c},n)}}]),t}(m.Component),fo=(a(842),function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.statisticsModal,a=e.statistics,n=e.closeStatisticsModal;return g.a.createElement(D.a,{visible:t,title:"".concat(a.nick_name||""," \u7684\u7c89\u4e1d\u6570\u636e"),onCancel:n,footer:""},g.a.createElement("div",{className:"statistics-modal"},g.a.createElement("div",{className:"statistics-wrapper"},g.a.createElement("h2",{className:"title"},"\u5f53\u65e5\u6570\u636e\u7edf\u8ba1"),g.a.createElement("ul",{className:"statistics-content"},g.a.createElement("li",null,g.a.createElement("span",{className:"category"},"\u7c89\u4e1d\u603b\u6570: "),g.a.createElement("span",{className:"desc"},a.cumulate_user)),g.a.createElement("li",null,g.a.createElement("span",{className:"category"},"\u65b0\u589e\u7c89\u4e1d\u6570: "),g.a.createElement("span",{className:"desc"},a.new_user)),g.a.createElement("li",null,g.a.createElement("span",{className:"category"},"\u53d6\u5173\u7c89\u4e1d\u6570: "),g.a.createElement("span",{className:"desc"},a.cancel_user)),g.a.createElement("li",null,g.a.createElement("span",{className:"category"},"\u6d3b\u8dc3\u7c89\u4e1d\u6570: "),g.a.createElement("span",{className:"desc"},a.todayCount)))),g.a.createElement("div",{className:"statistics-wrapper"},g.a.createElement("h2",{className:"title"},"\u6628\u65e5\u6570\u636e\u7edf\u8ba1"),g.a.createElement("ul",{className:"statistics-content"},g.a.createElement("li",null,g.a.createElement("span",{className:"category"},"\u7c89\u4e1d\u603b\u6570: "),g.a.createElement("span",{className:"desc"},a.y_cumulate_user)),g.a.createElement("li",null,g.a.createElement("span",{className:"category"},"\u65b0\u589e\u7c89\u4e1d\u6570: "),g.a.createElement("span",{className:"desc"},a.y_new_user)),g.a.createElement("li",null,g.a.createElement("span",{className:"category"},"\u53d6\u5173\u7c89\u4e1d\u6570: "),g.a.createElement("span",{className:"desc"},a.y_cancel_user)),g.a.createElement("li",null,g.a.createElement("span",{className:"category"},"\u6d3b\u8dc3\u7c89\u4e1d\u6570: "),g.a.createElement("span",{className:"desc"},a.yesterdayCount))))))}}]),t}(m.Component)),ho=Object(k.b)(function(e){return{statistics:e.gonghao.tuoguan.statistics,statisticsModal:e.gonghao.tuoguan.statisticsModal}},function(e){return{closeStatisticsModal:function(){e(n.closeStatisticsModal())}}})(fo),yo=Tn.a.Search,vo=io.a.Option,bo=Fn.a.Grid,ko=function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.getGroupList(),this.props.getAllGonghaoList()}},{key:"render",value:function(){var e=this.props,t=e.gonghaoTagList,a=e.gonghaoList,n=e.searchByName,o=e.searchName,r=e.changeSearchInput,c=e.jieguan,i=e.addNewGonghao,l=e.openGonghaoModal,s=e.gonghaoModal,u=e.closeGonghaoModal,m=e.gonghaoInfo,d=e.updateGonghaoInfo,p=e.changeGroup,f=e.changeAttribute,h=e.changeAbTest,y=e.deleteGonghao,v=e.viewData,b=e.group,k=e.changeSelectValue,I=e.status,M={pageSize:window.innerWidth>1440?24:12};return g.a.createElement("div",null,g.a.createElement("div",{className:"container"},g.a.createElement(yo,{placeholder:"\u8bf7\u8f93\u5165\u516c\u53f7\u540d\u79f0",className:"search-btn",value:o,onChange:r,onSearch:function(e){return n(e)}}),g.a.createElement(io.a,{value:b,onChange:function(e){return k("group",e)},style:{width:150,marginLeft:10}},g.a.createElement(vo,{value:"\u5168\u90e8"},"\u5168\u90e8\u516c\u53f7"),g.a.createElement(vo,{value:"\u672a\u5206\u7ec4"},"\u672a\u5206\u7ec4"),t.map(function(e){return g.a.createElement(vo,{key:e._id,value:e.name},e.name)})),g.a.createElement(io.a,{value:I,onChange:function(e){return k("status",e)},style:{width:100,marginLeft:10}},g.a.createElement(vo,{value:"\u5168\u90e8"},"\u5168\u90e8"),g.a.createElement(vo,{value:1},"\u5df2\u63a5\u7ba1"),g.a.createElement(vo,{value:-1},"\u63a5\u7ba1\u4e2d"),g.a.createElement(vo,{value:0},"\u5f85\u63a5\u7ba1"),g.a.createElement(vo,{value:-2},"\u672a\u63a5\u7ba1")),g.a.createElement("div",{className:"fr btn-wrapper"},g.a.createElement(po,{background:"success",size:"default",buttonContent:g.a.createElement(E.b,{to:"/admin/gonghao/tuoguan/group"},"\u5206\u7ec4\u7ba1\u7406")}),g.a.createElement(po,{size:"default",buttonContent:"\u6dfb\u52a0\u65b0\u516c\u53f7",onClick:i})),g.a.createElement("div",{className:"table-wrapper"},g.a.createElement(lo.a,{grid:{gutter:16,sm:4,xxl:6},dataSource:a,pagination:M,renderItem:function(e,t){return g.a.createElement(lo.a.Item,null,g.a.createElement(bo,{className:"card-grid"},g.a.createElement(Fn.a,{className:"card-item",actions:[g.a.createElement(Vn.a,{title:"\u4fee\u6539\u5206\u7ec4\u548c\u516c\u53f7\u5c5e\u6027"},g.a.createElement("span",{onClick:function(){return l(e._id,e.group,e.attribute,e.ab_test)}},"\u4fee\u6539")),g.a.createElement(Vn.a,{title:-2===e.status?"\u63a5\u7ba1\u7c89\u4e1d\uff0c\u6253\u6807\u7b7e":-1===e.status?"\u6b63\u5728\u63a5\u7ba1\uff0c\u8bf7\u7a0d\u540e":0===e.status?"\u63a5\u7ba1\u8d26\u53f7\u8f83\u591a\uff0c\u6392\u961f\u4e2d":-3===e.status?"\u63a5\u7ba1\u5931\u8d25\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d":"\u63a5\u7ba1\u5b8c\u6210"},g.a.createElement("span",{className:-2===e.status?"":"disabled-click",onClick:function(){return-2===e.status?c(e.code,t):console.log("\u5df2\u63a5\u7ba1\u6216\u63a5\u7ba1\u4e2d")}},-2===e.status?"\u63a5\u7ba1":-1===e.status?"\u63a5\u7ba1\u4e2d":0===e.status?"\u5f85\u63a5\u7ba1":-3===e.status?"\u63a5\u7ba1\u5931\u8d25":"\u5df2\u63a5\u7ba1")),g.a.createElement(Vn.a,{title:g.a.createElement("p",null,"\u5220\u9664\u516c\u53f7\u4fe1\u606f",g.a.createElement("br",null),"\u89e3\u9664\u6388\u6743\u8bf7\u5728\u516c\u53f7\u540e\u53f0\u64cd\u4f5c")},g.a.createElement("span",{onClick:function(){return y(e._id,t)}},"\u5220\u9664")),g.a.createElement(Vn.a,{title:g.a.createElement("p",null,"\u67e5\u770b\u7c89\u4e1d\u6570\u636e\u7edf\u8ba1")},g.a.createElement("span",{onClick:function(){return v(e)}},"\u7edf\u8ba1"))]},e.head_img?g.a.createElement("img",{src:e.head_img,alt:""}):g.a.createElement(Rn.a,{shape:"circle",size:40,icon:"user",style:{marginRight:5,marginTop:-20}}),g.a.createElement("div",{className:"gonghao-info"},g.a.createElement("p",null,e.nick_name),g.a.createElement(so.a,null,e.group)))))}}))),g.a.createElement(D.a,{visible:s,title:"\u4fee\u6539\u516c\u53f7\u4fe1\u606f",onCancel:u,onOk:function(){return d(m)}},g.a.createElement(zn.a,{labelCol:{span:8},wrapperCol:{span:10}},g.a.createElement(zn.a.Item,{label:"\u516c\u53f7\u5206\u7ec4"},g.a.createElement(io.a,{value:m.group||"\u672a\u5206\u7ec4",onChange:p},g.a.createElement(vo,{value:"\u672a\u5206\u7ec4"},"\u672a\u5206\u7ec4"),t.map(function(e){return g.a.createElement(vo,{key:e._id,value:e.name},e.name)}))),g.a.createElement(zn.a.Item,{label:"\u516c\u53f7\u5c5e\u6027"},g.a.createElement(uo.a.Group,{value:m.attribute,onChange:f},g.a.createElement(uo.a,{value:0},"\u9ed8\u8ba4"),g.a.createElement(uo.a,{value:1},"\u7537"),g.a.createElement(uo.a,{value:2},"\u5973"))),g.a.createElement(zn.a.Item,{label:g.a.createElement("span",null,"\u6d4b\u8bd5\u6027\u522b ",g.a.createElement(Vn.a,{title:g.a.createElement("span",null,"\u5c06\u516c\u53f7\u7537\u7c89\u4e1d\u6216\u5973\u7c89\u4e1d\u5e73\u5747\u5206\u5f00,\u4e00\u822c\u9ed8\u8ba4\u5373\u53ef",g.a.createElement("br",null),"(\u5982\u6709\u9700\u8981\uff0c\u8bf7\u5728\u63a5\u7ba1\u524d\u9009\u62e9)")},g.a.createElement(Gn.a,{className:"cursor",type:"question-circle",theme:"filled"})))},g.a.createElement(uo.a.Group,{value:m.ab_test,onChange:h},g.a.createElement(uo.a,{value:0},"\u9ed8\u8ba4"),g.a.createElement(uo.a,{value:1},"\u7537"),g.a.createElement(uo.a,{value:2},"\u5973"))))),g.a.createElement(ho,null))}}]),t}(m.Component),Eo=Object(k.b)(function(e){return{gonghaoTagList:e.gonghao.tuoguan.gonghaoTagList,allGonghaoList:e.gonghao.tuoguan.allGonghaoList,gonghaoList:e.gonghao.tuoguan.gonghaoList,currentPage:e.gonghao.tuoguan.currentPage,searchName:e.gonghao.tuoguan.searchName,gonghaoModal:e.gonghao.tuoguan.gonghaoModal,gonghaoInfo:e.gonghao.tuoguan.gonghaoInfo,group:e.gonghao.tuoguan.group,status:e.gonghao.tuoguan.status}},function(e){return{getGroupList:function(){e(n.getGroupList())},getAllGonghaoList:function(){e(n.getAllGonghaoList())},changePage:function(t){e(n.changePage(t))},changeSearchInput:function(t){e(n.changeSearchInput(t.target.value))},searchByName:function(t){e(n.searchByName(t))},deleteGonghao:function(t,a){e(n.deleteGonghao(t,a))},jieguan:function(t,a){e(n.jieguan(t,a))},viewData:function(t){e(n.viewData(t))},addNewGonghao:function(){e(n.addNewGonghao())},openGonghaoModal:function(t,a,o,r){e(n.openGonghaoModal(t,a,o,r))},closeGonghaoModal:function(){e(n.closeGonghaoModal())},updateGonghaoInfo:function(t){e(n.updateGonghaoInfo(t))},changeGroup:function(t){e(n.changeGroup(t))},changeAttribute:function(t){var a=t.target.value;e(n.changeAttribute(a))},changeAbTest:function(t){var a=t.target.value;e(n.changeAbTest(a))},changeSelectValue:function(t,a){e(n.changeSelectValue(t,a))}}})(ko),Io=a(971),Mo=Dn.a.Sider,Co=Dn.a.Content,Oo=Tn.a.Search,_o=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).columns=[{key:"nick_name",dataIndex:"nick_name",title:"\u516c\u53f7\u540d\u79f0",align:"center",width:200},{key:"group",dataIndex:"group",title:"\u5206\u7ec4",align:"center"},{key:"action",title:"\u64cd\u4f5c",align:"center",width:100,render:function(e,t,n){return g.a.createElement(mo.a,{type:"primary",size:"small",onClick:function(){return a.setState({gonghaoModal:!0,gonghao_id:t._id,gonghao_index:n})}},"\u4fee\u6539\u5206\u7ec4")}}],a.state={gonghaoTagList:[],gonghaoModal:!1,editGroupModalVisible:!1,group:"",gonghaoList:[],group_id:"",group_index:-1,gonghao_id:"",gonghao_index:-1,selectGroup:"",selectedRowKeys:[]},a.getGonghaoTagList=function(){j.a.get("/gonghaoTag").then(function(e){if(1===e.data.code){var t=e.data.data;a.setState({gonghaoTagList:t})}})},a.getGroupGonghao=function(e){j.a.get("/conf/group",{params:{group:e}}).then(function(e){var t=e.data.data;a.setState({gonghaoList:t}),0===t.length&&P.a.warning("\u8be5\u5206\u7ec4\u4e2d\u8fd8\u6ca1\u6709\u6570\u636e\uff0c\u8bf7\u6dfb\u52a0")})},a.openEditGroupModal=function(){a.setState({editGroupModalVisible:!0})},a.closeEditGroupModal=function(){a.setState({editGroupModalVisible:!1,group:""})},a.confirmEditGroup=function(){var e=a.state,t=e.group,n=e.group_id,o=e.group_index;n?a.updateGroup(t,n,o):a.addGroup(t)},a.addGroup=function(e){D.a.confirm({title:"\u786e\u5b9a\u6dfb\u52a0\u4e00\u4e2a\u5206\u7ec4\u5417\uff1f",onOk:function(){e?j.a.post("/gonghaoTag",{name:e}).then(function(e){if(1===e.data.code&&0===e.data.exist){var t=e.data,n=t.data,o=t.msg;a.setState(function(e){var t=Object(_.a)(e.gonghaoTagList);return t.push(n),{gonghaoTagList:t}}),P.a.success(o),a.closeEditGroupModal()}else 1===e.data.code&&1===e.data.exist?P.a.warning("\u5206\u7ec4\u5df2\u5b58\u5728\uff0c\u8bf7\u66f4\u6362\u5206\u7ec4\u540d\u79f0"):P.a.error(e.data.msg)}):P.a.error("\u5206\u7ec4\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a")}})},a.updateGroup=function(e,t,n){D.a.confirm({title:"\u786e\u5b9a\u4fee\u6539\u5206\u7ec4\u540d\u79f0\u5417\uff1f",onOk:function(){e?j.a.put("/gonghaoTag",{name:e,id:t}).then(function(e){if(1===e.data.code){var t=e.data,o=t.data,r=t.msg;a.setState(function(e){var t=e.gonghaoTagList;return Object.assign(t[n],o),{gonghaoTagList:t}}),P.a.success(r),a.closeEditGroupModal()}else P.a.error(e.data.msg)}):P.a.error("\u5206\u7ec4\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a")}})},a.deleteGroup=function(e,t){D.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u4e2a\u5206\u7ec4\u5417\uff1f",onOk:function(){j.a.delete("/gonghaoTag/"+e).then(function(e){var n=e.data,o=n.code,r=n.msg;1===o?(P.a.success(r),a.getGroupGonghao(),a.setState(function(e){var a=e.gonghaoTagList;return a.splice(t,1),{gonghaoTagList:a}})):P.a.error(r)})}})},a.changeGroupValue=function(e){var t=e.target.value;a.setState({group:t})},a.searchGroupGonghao=function(e){e?j.a.get("/conf/find_one",{params:{nick_name:e}}).then(function(e){var t=e.data,n=t.data,o=t.code,r=t.msg;1===o?(P.a.success(r),a.setState({gonghaoList:n})):P.a.error("\u6ca1\u6709\u67e5\u8be2\u5230\u76f8\u5173\u6570\u636e\uff0c\u8bf7\u68c0\u67e5\u8f93\u5165\u662f\u5426\u6709\u8bef")}):P.a.error("\u516c\u53f7\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a")},a.closeGonghaoModal=function(){a.setState({gonghaoModal:!1,gonghao_id:"",gonghao_index:-1,selectGroup:""})},a.submitGonghaoModal=function(){var e=a.state,t=e.gonghao_id,n=e.gonghao_index,o=e.selectGroup,r=e.selectedRowKeys;t?a.updateOne(t,n,o):a.updateMore(r,o)},a.openUpdateMoreModal=function(){0===a.state.selectedRowKeys.length?P.a.warning("\u8bf7\u5148\u9009\u62e9\u516c\u53f7"):a.setState({gonghaoModal:!0})},a.updateOne=function(e,t,n){D.a.confirm({title:"\u786e\u5b9a\u4fee\u6539\u5206\u7ec4\u5417\uff1f",onOk:function(){j.a.put("/conf",{id:e,group:n}).then(function(e){var n=e.data,o=n.code,r=n.msg;1===o?(P.a.success(r),a.setState(function(e){var a=Object(_.a)(e.gonghaoList);return a.splice(t,1),{gonghaoList:a}}),a.closeGonghaoModal()):P.a.error(r)})}})},a.updateMore=function(e,t){D.a.confirm({title:"\u786e\u5b9a\u4fee\u6539\u5206\u7ec41\u5417\uff1f",onOk:function(){j.a.put("/conf/multi_select",{ids:e,group:t}).then(function(e){var t=e.data,n=t.code,o=t.msg;1===n?(P.a.success(o),a.getGroupGonghao(),a.closeGonghaoModal(),a.setState({selectedRowKeys:[]})):P.a.error(o)})}})},a.changeSelectGroup=function(e){var t=e.target.value;a.setState({selectGroup:t})},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.getGonghaoTagList(),this.getGroupGonghao()}},{key:"render",value:function(){var e=this,t=this.state,a=t.gonghaoTagList,n=t.gonghaoModal,o=t.editGroupModalVisible,r=t.gonghaoList,c=t.group,i=t.selectGroup,l={selectedRowKeys:this.state.selectedRowKeys,onChange:function(t){e.setState({selectedRowKeys:t})}};return g.a.createElement("div",null,g.a.createElement("div",{className:"container"},g.a.createElement(Dn.a,null,g.a.createElement(Mo,{theme:"light"},g.a.createElement(lo.a,{header:g.a.createElement("div",{className:"cursor userSelect",onClick:function(){return e.getGroupGonghao("\u672a\u5206\u7ec4")}},"\u672a\u5206\u7ec4"),bordered:!0,dataSource:a,style:{marginRight:10},renderItem:function(t,a){return g.a.createElement(lo.a.Item,{className:"userSelect"},g.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%",lineHeight:1}},g.a.createElement("p",{className:"cursor",onClick:function(){return e.getGroupGonghao(t.name)}},t.name),g.a.createElement("div",null,g.a.createElement(Gn.a,{className:"cursor",style:{marginRight:10},type:"form",onClick:function(){return e.setState({editGroupModalVisible:!0,group_id:t._id,group_index:a})}}),g.a.createElement(Gn.a,{className:"cursor",type:"close-square",onClick:function(){return e.deleteGroup(t._id,a)}}))))}}),g.a.createElement("div",{className:"tc cursor userSelect",style:{width:"90%",margin:"15px auto 0",padding:"10px 0",borderRadius:5,border:"1px dashed #999"},onClick:this.openEditGroupModal},"+ \u6dfb\u52a0\u5206\u7ec4")),g.a.createElement(Co,null,g.a.createElement(Fn.a,{style:{padding:20}},g.a.createElement(Oo,{placeholder:"\u8bf7\u8f93\u5165\u516c\u4f17\u53f7\u540d\u79f0",style:{width:200,marginBottom:20,marginTop:-10},onSearch:this.searchGroupGonghao}),g.a.createElement(mo.a,{type:"primary",style:{display:"block",marginBottom:20},onClick:this.openUpdateMoreModal},"\u6279\u91cf\u4fee\u6539"),g.a.createElement(Io.a,{rowSelection:l,bordered:!0,size:"small",rowKey:function(e){return e._id},columns:this.columns,dataSource:r}))))),g.a.createElement(D.a,{visible:n,onCancel:this.closeGonghaoModal,onOk:this.submitGonghaoModal},g.a.createElement(uo.a.Group,{value:i,onChange:this.changeSelectGroup},g.a.createElement(uo.a,{value:"\u672a\u5206\u7ec4"},"\u672a\u5206\u7ec4"),a.map(function(e){return g.a.createElement(uo.a,{key:e._id,value:e.name},e.name)}))),g.a.createElement(D.a,{visible:o,title:"\u65b0\u5efa\u5206\u7ec4\u540d\u79f0",onCancel:this.closeEditGroupModal,onOk:this.confirmEditGroup},"\u5206\u7ec4\u540d\u79f0\uff1a",g.a.createElement(Tn.a,{onChange:this.changeGroupValue,value:c,style:{width:300},placeholder:"\u8bf7\u8f93\u5165\u5206\u7ec4\u540d\u79f0"})))}}]),t}(m.Component),wo=function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.menuList,a=e.deleteMenu,n=[{title:"\u83dc\u5355\u7c7b\u578b",key:"individual",dataIndex:"individual",align:"center",render:function(e,t){return t.individual?"\u4e2a\u6027\u5316\u83dc\u5355":"\u901a\u7528\u83dc\u5355"}},{title:"\u83dc\u5355\u6027\u522b",key:"sex",dataIndex:"sex",align:"center",render:function(e,t){return t.individual?"0"===t.sex?"\u672a\u77e5":"1"===t.sex?"\u7537":"\u5973":"\u2014\u2014"}},{key:"title",dataIndex:"title",title:"\u6807\u9898",align:"center"},{title:"Action",key:"Action",align:"center",render:function(e,t,n){return g.a.createElement("div",null,g.a.createElement(mo.a,{size:"small",type:"primary",style:{marginRight:"10px"}},g.a.createElement(E.b,{to:{pathname:"/admin/gonghao/menu/update",query:t}},"\u7f16\u8f91")),g.a.createElement(mo.a,{size:"small",type:"danger",onClick:function(){return a(t._id,n)}},"\u5220\u9664"))}}];return g.a.createElement("div",null,g.a.createElement("div",{className:"container"},g.a.createElement(mo.a,{type:"primary",style:{marginBottom:"20px"}},g.a.createElement(E.b,{to:"/admin/gonghao/menu/create"},"\u914d\u7f6e\u65b0\u83dc\u5355\u680f")),g.a.createElement(Io.a,{size:"small",rowKey:function(e){return e._id},columns:n,dataSource:t,pagination:{onChange:function(){return F()}}})))}},{key:"componentDidMount",value:function(){this.props.getMenuList()}}]),t}(m.Component),Lo=Object(k.b)(function(e){return{menuList:e.gonghao.menu.menuList}},function(e){return{getMenuList:function(){e(o.getMenuList())},deleteMenu:function(t,a){e(o.deleteMenu(t,a))}}})(wo),So=a(975),xo=a(968),No=(a(892),a(970)),jo=a(967),To=(a(893),function(e){var t=e.messageList,a=e.updateMessageItem;return g.a.createElement("div",{className:"graphic-message-list-wrapper"},g.a.createElement(Fn.a,{className:"message-list-card",title:t.length>1?g.a.createElement(lo.a,{className:"message-list"},g.a.createElement(lo.a.Item,{className:"cursor",onClick:function(){return a(t[0],0)}},g.a.createElement("div",{className:"head-message"},g.a.createElement("p",{className:"ellipse-two"},t[0].title),g.a.createElement("img",{src:t[0].picurl,alt:""}))),t.slice(1).map(function(e,t){return g.a.createElement(lo.a.Item,{className:"border_btm cursor",onClick:function(){return a(e,t+1)},key:t},g.a.createElement("div",{className:"rest-message"},g.a.createElement("p",{className:"ellipse-two"},e.title),g.a.createElement("img",{src:e.picurl,alt:""})))})):g.a.createElement("div",{className:"cursor",onClick:function(){return a(t[0],0)}},g.a.createElement("div",{className:"head-other"},g.a.createElement("img",{src:t[0].picurl,alt:""}),g.a.createElement("h3",{className:"title textEllipsis"},t[0].title),g.a.createElement("p",{className:"ellipse-two"},t[0].description)))}))}),Go=function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e,t,a=this.props,n=a.messageInfo,o=a.changeMessageInfo,r=a.uploadImg,c=a.updateCurrentMessage,i=a.deleteCurrentMessage,l=a.addToList,s=a.updateIndex,u=a.updateMessageItem;0===n.replyType?e=g.a.createElement(zn.a.Item,{className:"inputtxt",label:"\u6587\u672c\u6d88\u606f"},g.a.createElement(Tn.a.TextArea,{onChange:function(e){return o("content",e.target.value)},value:n.content,autoSize:{minRows:3,maxRows:6},placeholder:"\u8bf7\u8f93\u5165\u56de\u590d\u6587\u672c\u6d88\u606f"})):(t=n.picurl?g.a.createElement("img",{style:{width:"100px"},src:n.picurl,alt:"\u56fe\u7247\u8d70\u4e22\u5566~"}):g.a.createElement(mo.a,null,g.a.createElement(Gn.a,{type:"upload"})," \u4e0a\u4f20\u56fe\u7247 "),e=g.a.createElement(m.Fragment,null,g.a.createElement(zn.a.Item,{label:"\u56fe\u6587\u6807\u9898"},g.a.createElement(Tn.a,{onChange:function(e){return o("title",e.target.value)},value:n.title,placeholder:"\u8bf7\u8f93\u5165\u56fe\u6587\u6807\u9898"})),g.a.createElement(zn.a.Item,{label:"\u56fe\u6587\u94fe\u63a5"},g.a.createElement(Tn.a,{onChange:function(e){return o("url",e.target.value)},value:n.url,placeholder:"\u8bf7\u8f93\u5165\u56fe\u6587\u94fe\u63a5\uff0c\u5fc5\u987b\u4ee5 http \u6216 https \u5f00\u5934"})),g.a.createElement(zn.a.Item,{label:"\u56fe\u6587\u63cf\u8ff0"},g.a.createElement(Tn.a.TextArea,{onChange:function(e){return o("description",e.target.value)},value:n.description,autoSize:{minRows:3,maxRows:6},placeholder:"\u8bf7\u8f93\u5165\u56fe\u6587\u63cf\u8ff0"})),g.a.createElement(zn.a.Item,{label:"\u4e0a\u4f20\u56fe\u7247"},g.a.createElement(No.a,{name:"imageFile",action:"/reply/upload",showUploadList:!1,onChange:r},t)),g.a.createElement(zn.a.Item,{label:" ",colon:!1},s>-1?g.a.createElement("div",null,g.a.createElement(mo.a,{onClick:c,type:"primary",style:{marginRight:20}},"\u4fdd\u5b58"),g.a.createElement(mo.a,{onClick:i},"\u5220\u9664\u6b64\u6761\u6d88\u606f")):g.a.createElement("div",null,g.a.createElement(mo.a,{onClick:l},"\u6dfb\u52a0\u5230\u56fe\u6587\u5217\u8868"),g.a.createElement("p",{className:"tips"},"Tips: \u5f53\u7528\u6237\u53d1\u9001\u6587\u672c\u3001\u56fe\u7247\u3001\u89c6\u9891\u3001\u56fe\u6587\u3001\u5730\u7406\u4f4d\u7f6e\u8fd9\u4e94\u79cd\u6d88\u606f\u65f6\uff0c\u53ea\u80fd\u56de\u590d1\u6761\u56fe\u6587\u6d88\u606f\uff1b\u5176\u4f59\u573a\u666f\u6700\u591a\u53ef\u56de\u590d8\u6761\u56fe\u6587\u6d88\u606f"))),g.a.createElement(jo.a,{dashed:!0}),g.a.createElement("div",{style:{width:"50%",margin:"auto"}},n.articles.length>0&&g.a.createElement(To,{messageList:n.articles,updateMessageItem:u}))));return g.a.createElement("div",null,g.a.createElement(zn.a.Item,{wrapperCol:{offset:2}},g.a.createElement(uo.a.Group,{value:n.replyType,onChange:function(e){return o("replyType",e.target.value)}},g.a.createElement(uo.a.Button,{value:0},"\u6587\u672c\u6d88\u606f"),g.a.createElement(uo.a.Button,{value:1},"\u56fe\u6587\u6d88\u606f"))),e)}}]),t}(m.Component),Ao=function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.history.location.query;e&&this.props.initMenuInfo(e)}},{key:"render",value:function(){var e,t,a,n,o,r,c=this,i=this.props,l=i.menuInfo,s=i.menuForm,u=i.sub_button,m=i.menuIndex,d=i.handleInputChange,p=i.handleSubInputChange,f=i.addFirstMenu,h=i.editMenu,y=i.submitMenu,v=i.addSecondMenu,b=i.editSecMenu,k=i.deleteFirMenu,E=i.deleteSubMenu,I=i.allCodes,M=i.targetKeys,C=i.changeGonghao,O=i.isSubmit,_=i.cancelMenu,w=i.handleInfoChange,L=i.handleIndividualChange,S=i.openModal,x=i.resetState,N=i.messageInfo,j=i.changeMessageInfo,T=i.uploadImg,G=i.addToList,A=i.updateMessageItem,P=i.updateCurrentMessage,D=i.deleteCurrentMessage,F=i.updateIndex,V={labelCol:{sm:{span:4}},wrapperCol:{sm:{span:16,offset:0}},colon:!1},R=l.values.map(function(e,t){return g.a.createElement("div",{className:"menu",style:{width:1===l.values.length?"50%":(l.values.length,"33.33%")},key:t,onClick:function(){return h(e,t)}},g.a.createElement("span",{className:"nav-title cursor"},e.name||"\u83dc\u5355\u540d\u79f0"),g.a.createElement("ul",{className:"sub-menu-list",style:{top:e.sub_button&&e.sub_button.length?5===e.sub_button.length?-239:46*-e.sub_button.length-55:-55,display:m===t?"block":"none"}},e.sub_button&&e.sub_button.map(function(e,t){return g.a.createElement("li",{className:"textEllipsis",key:t,onClick:function(a){return b(a,e,t)}},e.name||"\u5b50\u83dc\u5355\u540d\u79f0")}),g.a.createElement("li",{className:"add",style:{display:e.sub_button&&e.sub_button.length<5?"blcok":"none"},onClick:v},"+"),g.a.createElement("div",{className:"sanjiao sanjiao-out"}),g.a.createElement("div",{className:"sanjiao sanjiao-in"})))});("view"===u.type?t=g.a.createElement(zn.a.Item,{label:"\u94fe\u63a5"},g.a.createElement(Tn.a,{value:u.url,placeholder:"\u8bf7\u8f93\u5165\u7f51\u9875\u8df3\u8f6c\u94fe\u63a5\uff0c\u5fc5\u987b\u4ee5 http \u6216 https \u5f00\u5934",onChange:function(e){return p(e,"url")}})):"click"===u.type&&(t=g.a.createElement("div",{className:"content-wrapper"},N&&g.a.createElement(Go,{messageInfo:N,changeMessageInfo:j,uploadImg:T,addToList:G,updateMessageItem:A,updateCurrentMessage:P,deleteCurrentMessage:D,updateIndex:F}))),"view"===s.type?e=g.a.createElement(zn.a.Item,{label:"\u94fe\u63a5"},g.a.createElement(Tn.a,{value:s.url,placeholder:"\u8bf7\u8f93\u5165\u7f51\u9875\u8df3\u8f6c\u94fe\u63a5\uff0c\u5fc5\u987b\u4ee5 http \u6216 https \u5f00\u5934",onChange:function(e){return d(e,"url")}})):"click"===s.type&&(e=g.a.createElement("div",{className:"content-wrapper"},g.a.createElement(Go,{messageInfo:N,changeMessageInfo:j,uploadImg:T,addToList:G,updateMessageItem:A,updateCurrentMessage:P,deleteCurrentMessage:D,updateIndex:F}))),0!==l.values.length&&(a=s.sub_button&&0!==s.sub_button.length?g.a.createElement("div",{className:"menu-right fl"},g.a.createElement("div",{className:"menu-parent"},g.a.createElement("div",{className:"menu-title"},g.a.createElement("h4",{className:"fl"},"\u83dc\u5355\u7f16\u8f91"),g.a.createElement(mo.a,{className:"fr",type:"link",onClick:k},"\u5220\u9664\u83dc\u5355")),g.a.createElement(zn.a,V,g.a.createElement(zn.a.Item,{label:"\u83dc\u5355\u540d\u79f0"},g.a.createElement(Tn.a,{value:s.name,placeholder:"\u4e00\u7ea7\u83dc\u5355\u540d\u79f0",maxLength:8,allowClear:!0,onChange:function(e){return d(e,"name")}}),g.a.createElement("span",{className:"menu-name-tips"},"Tips: \u83dc\u5355\u540d\u79f0\u4e2d\u6c49\u5b57\u4e0d\u53ef\u4ee5\u8d85\u8fc74\u4e2a\uff0c\u5199\u56db\u4e2a\u6c49\u5b57\u7684\u540c\u65f6\u53ef\u4ee5\u6dfb\u52a02\u4e2a\u8868\u60c5"))),g.a.createElement("div",{className:"menu-children"},g.a.createElement("div",{className:"menu-title"},g.a.createElement("h4",{className:"fl"},"\u5b50\u83dc\u5355\u7f16\u8f91"),g.a.createElement(mo.a,{className:"fr",type:"link",onClick:E},"\u5220\u9664\u5b50\u83dc\u5355")),g.a.createElement(zn.a,V,g.a.createElement(zn.a.Item,{label:"\u5b50\u83dc\u5355\u540d\u79f0"},g.a.createElement(Tn.a,{value:u.name,placeholder:"\u4e8c\u7ea7\u83dc\u5355\u540d\u79f0\uff0c\u4ec5\u652f\u6301\u4e2d\u82f1\u6587\u548c\u6570\u5b57\uff0c\u5b57\u6570\u4e0d\u8d85\u8fc78\u4e2a",maxLength:16,onChange:function(e){return p(e,"name")}})),g.a.createElement(zn.a.Item,{label:"\u5b50\u83dc\u5355\u5185\u5bb9"},g.a.createElement(uo.a.Group,{value:u.type,onChange:function(e){return p(e,"type")}},g.a.createElement(uo.a,{value:"view"},"\u8df3\u8f6c\u7f51\u9875"),g.a.createElement(uo.a,{value:"click"},"\u53d1\u9001\u6d88\u606f"))),t)))):g.a.createElement("div",{className:"menu-right fl"},g.a.createElement("div",{className:"menu-parent"},g.a.createElement("div",{className:"menu-title"},g.a.createElement("h4",{className:"fl"},"\u83dc\u5355\u7f16\u8f91"),g.a.createElement(mo.a,{className:"fr",type:"link",onClick:k},"\u5220\u9664\u83dc\u5355")),g.a.createElement(zn.a,V,g.a.createElement(zn.a.Item,{label:"\u83dc\u5355\u540d\u79f0"},g.a.createElement(Tn.a,{value:s.name,maxLength:8,allowClear:!0,placeholder:"\u4e00\u7ea7\u83dc\u5355\u540d\u79f0",onChange:function(e){return d(e,"name")}}),g.a.createElement("span",{className:"menu-name-tips"},"Tips: \u83dc\u5355\u540d\u79f0\u4e2d\u6c49\u5b57\u4e0d\u53ef\u4ee5\u8d85\u8fc74\u4e2a\uff0c\u5199\u56db\u4e2a\u6c49\u5b57\u7684\u540c\u65f6\u53ef\u4ee5\u6dfb\u52a02\u4e2a\u8868\u60c5")),g.a.createElement(zn.a.Item,{label:"\u83dc\u5355\u5185\u5bb9"},g.a.createElement(uo.a.Group,{value:s.type,onChange:function(e){return d(e,"type")}},g.a.createElement(uo.a,{value:"view"},"\u8df3\u8f6c\u7f51\u9875"),g.a.createElement(uo.a,{value:"click"},"\u53d1\u9001\u6d88\u606f"))),e))),n=g.a.createElement("div",{className:"menu-right-btm fl"},g.a.createElement(mo.a,{type:"primary",onClick:function(){S(),c.props.getAllCodes()}},"\u63d0\u4ea4"))),O)&&(l.individual&&(r=g.a.createElement(zn.a.Item,{label:"\u6027\u522b"},g.a.createElement(uo.a.Group,{value:l.sex,onChange:function(e){return w(e,"sex")}},g.a.createElement(uo.a,{value:"0"},"\u672a\u77e5"),g.a.createElement(uo.a,{value:"1"},"\u7537"),g.a.createElement(uo.a,{value:"2"},"\u5973")))),o=g.a.createElement("div",{className:"menu-modal-wrapper"},g.a.createElement("div",{className:"menu-modal"},g.a.createElement(So.a,{dataSource:I,showSearch:!0,targetKeys:M,onChange:C,render:function(e){return e.nick_name},rowKey:function(e){return e.code},className:"menu-transfer fl"}),g.a.createElement(zn.a,{className:"fl",colon:!1,labelCol:{sm:{span:30}},wrapperCol:{sm:{span:30,offset:0}},labelAlign:"left"},g.a.createElement(zn.a.Item,{label:"\u6807\u9898"},g.a.createElement(Tn.a,{value:l.title,placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",onChange:function(e){return w(e,"title")}})),g.a.createElement(zn.a.Item,{label:"\u4e2a\u6027\u5316\u83dc\u5355"},g.a.createElement(xo.a,{onChange:L,checked:l.individual})),r,g.a.createElement(zn.a.Item,{label:" "},g.a.createElement(mo.a,{style:{marginRight:"10px"},type:"primary",onClick:function(){return y(c.props)}},"\u63d0\u4ea4"),g.a.createElement(mo.a,{onClick:_},"\u53d6\u6d88"))))));return g.a.createElement("div",null,g.a.createElement("div",{className:"container edit-menu"},g.a.createElement("div",{className:"title-wrapper"},g.a.createElement("h2",null,"\u83dc\u5355\u914d\u7f6e"),g.a.createElement(mo.a,{className:"fr",onClick:function(){return x(c.props)}},"\u8fd4\u56de\u4e0a\u4e00\u7ea7")),g.a.createElement("div",{className:"menu-left fl"},g.a.createElement("div",{className:"menu-wrapper"},g.a.createElement("div",{className:"menu-cont"},g.a.createElement("div",{className:"menu-list"},R,g.a.createElement("div",{className:"menu add",style:1===R.length?{width:"50%"}:2===R.length?{width:"33%"}:3===R.length?{display:"none"}:{width:"100%"},onClick:f},g.a.createElement("span",{className:"nav-title cursor"},"+ \u6dfb\u52a0\u83dc\u5355")))))),a,n),o)}},{key:"componentWillUnmount",value:function(){this.props.unMountState(),this.props.resetMessageInfo()}}]),t}(m.Component),Po=Object(k.b)(function(e){return{menuInfo:e.gonghao.menu.menuInfo,menuForm:e.gonghao.menu.menuForm,sub_button:e.gonghao.menu.sub_button,menuIndex:e.gonghao.menu.menuIndex,allCodes:e.gonghao.menu.allCodes,isSubmit:e.gonghao.menu.isSubmit,targetKeys:e.gonghao.menu.targetKeys,messageInfo:e.gonghao.menu.messageInfo,updateIndex:e.gonghao.menu.updateIndex}},function(e){return{initMenuInfo:function(t){e(De(t))},handleInfoChange:function(t,a){e(Ee(t.target.value,a))},handleIndividualChange:function(t){e(Ie(t))},handleInputChange:function(t,a){e(Me(a,t.target.value))},handleSubInputChange:function(t,a){e(Ce(a,t.target.value))},addFirstMenu:function(){e(Oe())},editMenu:function(t,a){e(_e(t,a))},addSecondMenu:function(t){t.stopPropagation(),e(we())},submitMenu:function(t){e(je(t))},openModal:function(){e(Ne())},editSecMenu:function(t,a,n){t.stopPropagation(),e(Le(a,n))},deleteFirMenu:function(){e(Se())},deleteSubMenu:function(){e(xe())},changeGonghao:function(t){e(Pe(t))},getAllCodes:function(){e(Ae())},cancelMenu:function(){e(Ge())},resetState:function(t){t.history.goBack(),e(Te())},unMountState:function(){e(Te())},uploadImg:function(t){if("done"===t.file.status){var a="http://t.dmmup.com/uploads/".concat(t.file.response.filename);e(Fe("picurl",a))}},changeMessageInfo:function(t,a){e(Fe(t,a))},addToList:function(){e(Ve())},updateMessageItem:function(t,a){e(Re(t,a))},updateCurrentMessage:function(){e(Ue())},deleteCurrentMessage:function(){e(ze())},resetMessageInfo:function(){e(Te())}}})(zn.a.create({name:"editMenuInfo"})(Ao)),Do=a(100),Fo=a.n(Do),Vo=(a(942),function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={power:0},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state.power,t=this.props,a=t.replyMessageList,n=t.allCodes,o=t.deleteReplyMessage,r=[{key:"_id",title:"\u6d88\u606fID",dataIndex:"_id",align:"center",width:220,className:e?"":"powerHide"},{key:"replyType",title:"\u6d88\u606f\u7c7b\u578b",dataIndex:"replyType",align:"center",render:function(e){return 0===e?"\u6587\u672c\u6d88\u606f":"\u56fe\u6587\u6d88\u606f"}},{key:"type",title:"\u4e92\u52a8\u7c7b\u578b",dataIndex:"type",align:"center",render:function(e){return 0===e?"\u7528\u6237\u56de\u590d":2===e?"\u7528\u6237\u5173\u6ce8":4===e?"\u9ed8\u8ba4\u56de\u590d":"~~"}},{key:"name",dataIndex:"name",title:"\u6d88\u606f\u540d\u79f0",align:"center"},{key:"sex",title:"\u6027\u522b",dataIndex:"sex",align:"center",render:function(e,t,a){return g.a.createElement("span",null,1===t.sex?"\u7537":2===t.sex?"\u5973":0===t.sex?"\u672a\u77e5":"\u9ed8\u8ba4")}},{key:"text",title:"\u7528\u6237\u56de\u590d\u6587\u672c",dataIndex:"text",align:"center",render:function(e){return e||"\u2014\u2014"}},{key:"codes",title:"\u516c\u53f7\u540d\u79f0",dataIndex:"codes",align:"center",render:function(e){return e.length>0?e.slice(0,4).map(function(e){var t=n.filter(function(t){return t.code===e})[0];return t&&t.nick_name}):"\u65e0"}},{key:"copy_id",title:"\u590d\u5236\u6d88\u606fID",align:"center",className:e?"":"powerHide",render:function(e,t){return g.a.createElement(Fo.a,{className:"btn-wrapper",text:t._id,onCopy:function(){return P.a.success("\u590d\u5236\u6210\u529f")}},g.a.createElement(mo.a,{size:"small",type:"primary"},"\u590d\u5236\u6d88\u606fID"))}},{key:"Action",title:"Action",align:"center",width:120,render:function(e,t,a){return g.a.createElement("div",{className:"btn-wrapper"},g.a.createElement(mo.a,{size:"small",type:"primary"},g.a.createElement(E.b,{to:{pathname:"./update",state:{record:t,index:a}}},"\u7f16\u8f91")),g.a.createElement(mo.a,{size:"small",style:{background:"red",marginLeft:"5px"},onClick:function(){return o(t._id,a)}},"\u5220\u9664"))}}];return g.a.createElement("div",{className:"container"},g.a.createElement("div",{className:"edit-config"},g.a.createElement(mo.a,{type:"primary",className:"edit-btn"},g.a.createElement(E.b,{to:"./create"},"\u65b0\u5efa\u56de\u590d\u89c4\u5219")),g.a.createElement(Io.a,{className:"config-table",size:"small",rowKey:function(e){return e._id},columns:r,dataSource:a,bordered:!0})))}},{key:"componentDidMount",value:function(){var e=localStorage.getItem("userInfo");if(e){var t=JSON.parse(e).power;this.setState({power:t})}this.props.getReplyMessageList(),this.props.getAllCodes()}}]),t}(m.Component)),Ro=Object(k.b)(function(e){return{allCodes:e.gonghao.reply.allCodes,replyMessageList:e.gonghao.reply.replyMessageList}},function(e){return{getAllCodes:function(){e(r.getAllCodes())},getReplyMessageList:function(){e(r.getReplyMessageList())},deleteReplyMessage:function(t,a){e(r.deleteReplyMessage(t,a))}}})(Vo),Uo=a(95),zo=a(158),Ko=(a(943),a(944),Dn.a.Sider),Bo=Dn.a.Content,Jo=io.a.Option,Ho=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={gonghaoTagList:[],gonghaoList:[],nick_name:"",group:"\u5168\u90e8",codes:[],AllGonghaoList:[]},a.search=function(e){if(""!==e)j.a.get("/conf/find_one",{params:{nick_name:e}}).then(function(e){if(0!==e.data.data.length){var t=e.data.data;a.setState({gonghaoList:t})}else P.a.info("\u6ca1\u6709\u67e5\u8be2\u5230\u5305\u542b\u8be5\u5b57\u7b26\u7684\u516c\u53f7\uff0c\u8bf7\u68c0\u67e5\u540e\u91cd\u65b0\u8f93\u5165")});else{var t=a.state.AllGonghaoList;a.setState({gonghaoList:t})}},a.changeSearchInput=function(e){var t=e.target.value;a.setState({nick_name:t,group:"\u5168\u90e8"})},a.selectGonghao=function(e){var t=a.state.codes,n=e.code,o=t.indexOf(n);o>-1?t.splice(o,1):t.push(n),a.setState({codes:t}),a.props.selectGonghao(t)},a.handleChangeGroup=function(e){var t=a.state.AllGonghaoList;a.setState({group:e,nick_name:"",gonghaoList:t})},a.getGonghaoTagList=function(){j.a.get("/gonghaoTag").then(function(e){if(1===e.data.code){var t=e.data.data;a.setState({gonghaoTagList:t})}})},a.getGonghaoList=function(){j.a.get("/conf").then(function(e){var t=e.data,n=t.data;1===t.code&&a.setState({gonghaoList:n,AllGonghaoList:n})})},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({codes:e.codes})}},{key:"render",value:function(){var e=this,t=this.state,a=t.gonghaoTagList,n=t.gonghaoList,o=t.nick_name,r=t.group,c=t.codes;return g.a.createElement(Dn.a,{style:{background:"#fff"},className:"multi-gonghao-wrapper"},g.a.createElement(Ko,{className:"message-sider-wrapper",theme:"light",width:"200"},g.a.createElement(io.a,{placeholder:"\u6309\u5206\u7ec4\u67e5\u8be2",value:r,className:"search-input",onChange:this.handleChangeGroup},g.a.createElement(Jo,{value:"\u5168\u90e8"},"\u6240\u6709\u516c\u53f7"),a.map(function(e){return g.a.createElement(Jo,{key:e._id,value:e.name},e.name)})),g.a.createElement(Tn.a.Search,{className:"search-input",placeholder:"\u8bf7\u8f93\u5165\u516c\u53f7\u540d\u79f0",onSearch:this.search,value:o,allowClear:!0,onChange:this.changeSearchInput}),g.a.createElement(lo.a,{className:"gonghao-list",dataSource:"\u5168\u90e8"!==r?n.filter(function(e){return e.group===r}):n,locale:{emptyText:g.a.createElement("span",{style:{display:"none"}},"123")},renderItem:function(t){return g.a.createElement(lo.a.Item,{className:c.indexOf(t.code)>-1?"cursor selected":"cursor",onClick:function(){return e.selectGonghao(t)},key:t._id},g.a.createElement(Rn.a,{shape:"square",size:22,src:t.head_img}),t.nick_name)}})),g.a.createElement(Bo,null,this.props.content))}},{key:"componentDidMount",value:function(){this.getGonghaoTagList(),this.getGonghaoList()}}]),t}(m.Component),qo={labelCol:{sm:{span:4}},wrapperCol:{sm:{span:14,offset:0}}},Yo=function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.location.state,a=e.getAllCodes,n=e.initState;a(),t&&n(t.record,t.index)}},{key:"render",value:function(){var e,t,a,n=this,o=this.props,r=o.allCodes,c=o.selectGonghao,i=o.deleteGonghao,l=o.submitForm,s=o.messageInfo,u=o.updateMessageItem,d=o.addToList,p=o.changeMessageInfo,f=o.uploadImg,h=o.history,y=o.updateIndex,v=o.updateCurrentMessage,b=o.deleteCurrentMessage;(0===s.type?e=g.a.createElement(zn.a.Item,{label:"\u7528\u6237\u56de\u590d\u5185\u5bb9"},g.a.createElement(Tn.a,{onChange:function(e){return p("text",e.target.value)},value:s.text,placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u56de\u590d\u5185\u5bb9"})):1===s.type&&(e=g.a.createElement(zn.a.Item,{label:"\u70b9\u51fb\u5173\u952e\u8bcd"},g.a.createElement(Tn.a,{onChange:function(e){return p("key",e.target.value)},value:s.key,placeholder:"\u8bf7\u8f93\u5165\u83dc\u5355\u680f\u70b9\u51fb\u5173\u952e\u8bcd"}))),0===s.replyType)?t=g.a.createElement(zn.a.Item,{className:"inputtxt",label:"\u6587\u672c\u6d88\u606f"},g.a.createElement(Tn.a.TextArea,{onChange:function(e){return p("content",e.target.value)},value:s.content,autoSize:{minRows:3,maxRows:6},placeholder:"\u8bf7\u8f93\u5165\u56de\u590d\u6587\u672c\u6d88\u606f"})):(a=s.picurl?g.a.createElement("img",{style:{width:"100px"},src:s.picurl,alt:"\u56fe\u7247\u8d70\u4e22\u5566~"}):g.a.createElement(mo.a,null,g.a.createElement(Gn.a,{type:"upload"})," \u4e0a\u4f20\u56fe\u7247 "),t=g.a.createElement(m.Fragment,null,g.a.createElement(zn.a.Item,{label:"\u56fe\u6587\u6807\u9898"},g.a.createElement(Tn.a,{onChange:function(e){return p("title",e.target.value)},value:s.title,placeholder:"\u8bf7\u8f93\u5165\u56fe\u6587\u6807\u9898"})),g.a.createElement(zn.a.Item,{label:"\u56fe\u6587\u94fe\u63a5"},g.a.createElement(Tn.a,{onChange:function(e){return p("url",e.target.value)},value:s.url,placeholder:"\u8bf7\u8f93\u5165\u56fe\u6587\u94fe\u63a5"})),g.a.createElement(zn.a.Item,{label:"\u56fe\u6587\u63cf\u8ff0"},g.a.createElement(Tn.a.TextArea,{onChange:function(e){return p("description",e.target.value)},value:s.description,autoSize:{minRows:3,maxRows:6},placeholder:"\u8bf7\u8f93\u5165\u56fe\u6587\u63cf\u8ff0"})),g.a.createElement(zn.a.Item,{label:"\u4e0a\u4f20\u56fe\u7247"},g.a.createElement(No.a,{name:"imageFile",action:"/reply/upload",showUploadList:!1,onChange:f},a)),g.a.createElement(zn.a.Item,{label:" ",colon:!1},y>-1?g.a.createElement("div",null,g.a.createElement(mo.a,{onClick:v,type:"primary",style:{marginRight:20}},"\u4fdd\u5b58"),g.a.createElement(mo.a,{onClick:b},"\u5220\u9664\u6b64\u6761\u6d88\u606f")):g.a.createElement("div",null,g.a.createElement(mo.a,{onClick:d},"\u6dfb\u52a0\u5230\u56fe\u6587\u5217\u8868"),g.a.createElement("p",{className:"tips"},"Tips: \u5f53\u7528\u6237\u53d1\u9001\u6587\u672c\u3001\u56fe\u7247\u3001\u89c6\u9891\u3001\u56fe\u6587\u3001\u5730\u7406\u4f4d\u7f6e\u8fd9\u4e94\u79cd\u6d88\u606f\u65f6\uff0c\u53ea\u80fd\u56de\u590d1\u6761\u56fe\u6587\u6d88\u606f\uff1b\u5176\u4f59\u573a\u666f\u6700\u591a\u53ef\u56de\u590d8\u6761\u56fe\u6587\u6d88\u606f")))));return g.a.createElement("div",{className:"container"},g.a.createElement(Ho,{selectGonghao:c,codes:s.codes,content:g.a.createElement(zn.a,Object.assign({className:"reply-form",labelAlign:"right"},qo),g.a.createElement(Uo.a,{span:14},g.a.createElement(zn.a.Item,{label:"\u9009\u62e9\u516c\u53f7"},g.a.createElement("div",{style:{width:"180%"}},r.map(function(e){return s.codes.indexOf(e.code)>-1&&g.a.createElement(so.a,{key:e._id,className:"cursor gonghao-tag",closable:!0,onClose:function(){return i(s.codes,e.code)}},e.nick_name)}))),g.a.createElement(zn.a.Item,{label:"\u6d88\u606f\u540d\u79f0"},g.a.createElement(Tn.a,{onChange:function(e){return p("name",e.target.value)},value:s.name,placeholder:"\u8bf7\u8f93\u5165\u6d88\u606f\u540d\u79f0,(\u4ec5\u4f9b\u5907\u6ce8\uff0c\u4e0d\u4f1a\u53d1\u9001\u7ed9\u7c89\u4e1d)"}))),g.a.createElement(jo.a,{style:{width:"110%",marginLeft:-50}}),g.a.createElement("h2",{className:"block-title"},"\u8bbe\u7f6e\u81ea\u52a8\u56de\u590d"),g.a.createElement(zo.a,null,g.a.createElement(Uo.a,{span:14},g.a.createElement(zn.a.Item,{wrapperCol:{offset:1}},g.a.createElement(uo.a.Group,{value:s.replyType,onChange:function(e){return p("replyType",e.target.value)}},g.a.createElement(uo.a.Button,{value:0},"\u6587\u672c\u6d88\u606f"),g.a.createElement(uo.a.Button,{value:1},"\u56fe\u6587\u6d88\u606f"))),g.a.createElement(zn.a.Item,{label:"\u7528\u6237\u6635\u79f0"},g.a.createElement(xo.a,{checked:s.is_nickname,onChange:function(e){return p("is_nickname",e)}}),g.a.createElement("span",{className:"tips"},s.is_nickname&&"Tips: \u70b9\u51fb\u5f00\u542f\u7528\u6237\u6635\u79f0\u540e\uff0c\u9700\u8981\u624b\u52a8\u6dfb\u52a0\u66ff\u6362\u6587\u5b57")),t),g.a.createElement(Uo.a,{span:7},s.articles.length>0&&g.a.createElement(To,{messageList:s.articles,updateMessageItem:u}))),g.a.createElement(jo.a,{style:{width:"110%",marginLeft:-50}}),g.a.createElement("h2",{className:"block-title"},"\u8bbe\u7f6e\u6a21\u677f\u6d88\u606f"),g.a.createElement(Uo.a,{span:14},g.a.createElement(zn.a.Item,{wrapperCol:{offset:1}},g.a.createElement(uo.a.Group,{value:s.type,onChange:function(e){return p("type",e.target.value)}},g.a.createElement(uo.a.Button,{value:0},"\u7279\u5b9a\u56de\u590d"),g.a.createElement(uo.a.Button,{value:2},"\u7528\u6237\u5173\u6ce8"),g.a.createElement(uo.a.Button,{value:4},"\u9ed8\u8ba4\u56de\u590d"))),g.a.createElement(zn.a.Item,{label:"\u7c89\u4e1d\u6027\u522b"},g.a.createElement(uo.a.Group,{value:s.sex,onChange:function(e){return p("sex",e.target.value)}},g.a.createElement(uo.a,{value:3},"\u9ed8\u8ba4"),g.a.createElement(uo.a,{value:1},"\u7537"),g.a.createElement(uo.a,{value:2},"\u5973"),g.a.createElement(uo.a,{value:0},"\u672a\u77e5"))),g.a.createElement(zn.a.Item,{label:g.a.createElement("span",null,"\u672a\u77e5\u6027\u522b",g.a.createElement(Vn.a,{title:"\u672a\u77e5\u5c5e\u6027\u7c89\u4e1d\u6309\u7167`\u7537`\u6216`\u5973`\u53d1\u9001"},g.a.createElement(Gn.a,{className:"cursor",type:"question-circle",theme:"filled"}))," ")},g.a.createElement(uo.a.Group,{value:s.attribute,onChange:function(e){return p("attribute",e.target.value)}},g.a.createElement(uo.a,{value:1},"\u7537"),g.a.createElement(uo.a,{value:2},"\u5973"))),e),g.a.createElement(jo.a,{style:{width:"110%",marginLeft:-50}}),g.a.createElement(zn.a.Item,{wrapperCol:{offset:1}},g.a.createElement(mo.a,{type:"primary",style:{marginRight:20},onClick:function(){return l(s,n.props)}},"\u63d0\u4ea4"),g.a.createElement(mo.a,{onClick:function(){return h.goBack()}},"\u53d6\u6d88")))}))}},{key:"componentWillUnmount",value:function(){this.props.resetState()}}]),t}(m.Component),Wo=Object(k.b)(function(e){return{messageInfo:e.gonghao.reply.messageInfo,allCodes:e.gonghao.reply.allCodes,selectGonghaoModal:e.gonghao.reply.selectGonghaoModal,updateIndex:e.gonghao.reply.updateIndex}},function(e){return{getAllCodes:function(){e(Ye())},selectGonghao:function(t){e(We(t))},deleteGonghao:function(t,a){t.splice(t.indexOf(a),1),e(We(t))},changeMessageInfo:function(t,a){e(Ze(t,a))},uploadImg:function(t){if("done"===t.file.status){var a="http://t.dmmup.com/uploads/".concat(t.file.response.filename);e(Ze("picurl",a))}},addToList:function(){e(Xe())},updateMessageItem:function(t,a){e($e(t,a))},updateCurrentMessage:function(){e(Qe())},deleteCurrentMessage:function(){e(et())},submitForm:function(t,a){var n=t.title,o=t.picurl,r=t.url,c=t.description,i=a.location.state;0===t.articles.length&&t.articles.push({title:n,picurl:o,url:r,description:c}),t.title=t.picurl=t.url=t.description="",i?(t._id=i.record._id,e(at(t,a.history))):e(tt(t,a.history))},resetState:function(){e(nt())},initState:function(t,a){e(ot(t,a))}}})(zn.a.create({name:"editConfigInfo"})(Yo)),Zo=a(969),Xo=a(19),$o=a.n(Xo),Qo=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(v.a)(t).call(this,e))).state={replyList:[],replyModal:!1,replyInfo:{reply_id:"",is_nickname:!1,content:"",timing_time:new Date,remarks:""}},a.submitReplyInfo=a.submitReplyInfo.bind(Object(jn.a)(a)),a.cancelAction=a.cancelAction.bind(Object(jn.a)(a)),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"getReplyList",value:function(){var e=this;A.get("/replyTime").then(function(t){var a=t.data,n=a.code,o=a.data;1===n?e.setState({replyList:o}):e.setState({replyList:[]})})}},{key:"openUpdateModal",value:function(e){this.setState({replyModal:!0,replyInfo:Object(O.a)({},e)})}},{key:"changeReplyInfoInput",value:function(e,t){var a=this.state.replyInfo;a[t]=e,this.setState({replyInfo:a})}},{key:"createReplyInfo",value:function(e){var t=this;console.log(e),D.a.confirm({title:"\u786e\u5b9a\u521b\u5efa\u4e00\u6761\u65b0\u5185\u5bb9\u5417\uff1f",onOk:function(){A.post("/replyTime/create",Object(O.a)({},e)).then(function(e){var a=e.data,n=a.code,o=a.msg;1===n?(P.a.success(o),t.getReplyList(),t.cancelAction()):P.a.error(o)})}})}},{key:"updateReplyInfo",value:function(e){var t=this;console.log(e),D.a.confirm({title:"\u786e\u5b9a\u4fee\u6539\u8fd9\u6761\u5185\u5bb9\u5417\uff1f",onOk:function(){A.post("/replyTime/update",Object(O.a)({},e)).then(function(e){var a=e.data,n=a.code,o=a.msg;1===n?(P.a.success(o),t.getReplyList(),t.cancelAction()):P.a.error(o)})}})}},{key:"submitReplyInfo",value:function(){var e=this.state.replyInfo;e._id?this.updateReplyInfo(e):this.createReplyInfo(e)}},{key:"cancelAction",value:function(){this.setState({replyModal:!1,replyInfo:{reply_id:"",is_nickname:!1,content:"",timing_time:+new Date}})}},{key:"deleteReply",value:function(e){var t=this;D.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u6761\u5185\u5bb9\u5417\uff1f",onOk:function(){A.get("/replyTime/del",{params:{_id:e}}).then(function(e){var a=e.data,n=a.code,o=a.msg;1===n?(t.getReplyList(),P.a.success(o)):P.a.error(o)})}})}},{key:"componentDidMount",value:function(){this.getReplyList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.replyList,n=t.replyModal,o=t.replyInfo,r=[{key:"reply_id",dataIndex:"reply_id",title:"\u81ea\u52a8\u56de\u590d\u6d88\u606fID",align:"center",width:120},{key:"remarks",dataIndex:"remarks",title:"\u6d88\u606f\u540d\u79f0",align:"center",width:150},{key:"timing_time",dataIndex:"timing_time",title:"\u8bbe\u7f6e\u65f6\u95f4",align:"center",width:180,render:function(e){return $o()(e).format("YYYY-MM-DD HH:mm:ss")}},{key:"is_nickname",dataIndex:"is_nickname",title:"\u5f00\u542f\u7528\u6237\u6635\u79f0",align:"center",width:80,render:function(e){return e?"\u5f00\u542f":"\u5173\u95ed"}},{key:"content",dataIndex:"content",title:"\u56de\u590d\u6d88\u606f",align:"center",ellipsis:!0},{key:"action",title:"\u64cd\u4f5c",align:"center",render:function(t,a,n){return g.a.createElement("div",null,g.a.createElement(po,{onClick:function(){return e.openUpdateModal(a)},buttonContent:"\u7f16\u8f91"}),g.a.createElement(po,{onClick:function(){return e.deleteReply(a._id)},background:"danger",buttonContent:"\u5220\u9664"}))}}];return g.a.createElement("div",{className:"container"},g.a.createElement(po,{mb:20,size:"default",onClick:function(){return e.setState({replyModal:!0})},buttonContent:"\u65b0\u5efa\u6d88\u606f"}),g.a.createElement(Io.a,{size:"small",dataSource:a,rowKey:function(e){return e._id},columns:r}),g.a.createElement(D.a,{visible:n,title:"\u7f16\u8f91\u56de\u590d\u6d88\u606f",onOk:this.submitReplyInfo,onCancel:this.cancelAction},g.a.createElement(zn.a,{labelCol:{span:4},wrapperCol:{span:16,offser:0}},g.a.createElement(zn.a.Item,{label:"\u6d88\u606f\u5907\u6ce8"},g.a.createElement(Tn.a,{value:o.remarks,placeholder:"\u81ea\u884c\u586b\u5199\uff0c\u4fbf\u4e8e\u533a\u5206\u5bf9\u5e94",onChange:function(t){return e.changeReplyInfoInput(t.target.value,"remarks")}})),g.a.createElement(zn.a.Item,{label:"\u6d88\u606fID"},g.a.createElement(Tn.a,{value:o.reply_id,placeholder:"\u8bf7\u5728\u81ea\u52a8\u56de\u590d\u4e2d\u590d\u5236",onChange:function(t){return e.changeReplyInfoInput(t.target.value,"reply_id")}})),g.a.createElement(zn.a.Item,{label:"\u5f00\u542f\u6635\u79f0"},g.a.createElement(xo.a,{checked:o.is_nickname,onChange:function(t){return e.changeReplyInfoInput(t,"is_nickname")}})),g.a.createElement(zn.a.Item,{label:"\u56de\u590d\u5185\u5bb9"},g.a.createElement(Tn.a.TextArea,{value:o.content,spellCheck:!1,autoSize:{minRows:3},onChange:function(t){return e.changeReplyInfoInput(t.target.value,"content")}})),g.a.createElement(zn.a.Item,{label:"\u8bbe\u7f6e\u65f6\u95f4"},g.a.createElement(Zo.a,{showTime:!0,value:$o()(o.timing_time),onChange:function(t){return e.changeReplyInfoInput(t,"timing_time")}})))))}}]),t}(m.Component),er=function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return g.a.createElement(I.b,{path:"/admin/gonghao",render:function(){return g.a.createElement(I.d,null,g.a.createElement(I.b,{path:"/admin/gonghao/tuoguan/"},g.a.createElement(I.d,null,g.a.createElement(I.b,{path:"/admin/gonghao/tuoguan/index",component:Eo}),g.a.createElement(I.b,{path:"/admin/gonghao/tuoguan/group",component:_o}),g.a.createElement(I.a,{from:"/admin/gonghao/tuoguan",exact:!0,to:"/admin/gonghao/tuoguan/index"}))),g.a.createElement(I.b,{path:"/admin/gonghao/menu/"},g.a.createElement(I.d,null,g.a.createElement(I.b,{path:"/admin/gonghao/menu/index",component:Lo}),g.a.createElement(I.b,{path:"/admin/gonghao/menu/create",component:Po}),g.a.createElement(I.b,{path:"/admin/gonghao/menu/update",component:Po}),g.a.createElement(I.a,{from:"/admin/gonghao/menu",exact:!0,to:"/admin/gonghao/menu/index"}))),g.a.createElement(I.b,{path:"/admin/gonghao/reply"},g.a.createElement(I.d,null,g.a.createElement(I.b,{path:"/admin/gonghao/reply/index",component:Ro}),g.a.createElement(I.b,{path:"/admin/gonghao/reply/create",component:Wo}),g.a.createElement(I.b,{path:"/admin/gonghao/reply/update",component:Wo}),g.a.createElement(I.a,{from:"/admin/gonghao/reply",exact:!0,to:"/admin/gonghao/reply/index"}))),g.a.createElement(I.b,{path:"/admin/gonghao/timingReply",component:Qo}),g.a.createElement(I.a,{from:"/admin/gonghao",exact:!0,to:"/admin/gonghao/tuoguan"}))}})}}]),t}(m.Component),tr=a(303),ar=a(159),nr=(a(945),a(22)),or=a(445),rr=a(101),cr=a(118),ir=(a(178),a(946),function(e){var t=e.messageList,a=e.openSyncModal,n=e.openModal,o=e.openTimingModal,r=e.copy,c=e.deleteMaterial,i=e.openUpdateMaterialModal;return g.a.createElement("div",{className:"message-list-wrapper"},g.a.createElement(lo.a,{grid:{gutter:20,sm:3,xxl:6},dataSource:t,renderItem:function(e,t){return g.a.createElement(lo.a.Item,{key:e._id},g.a.createElement(Fn.a,{className:"message-list-card",title:g.a.createElement(lo.a,{className:"message-list"},g.a.createElement("div",{className:"update-time"},g.a.createElement(Gn.a,{type:"info-circle"}),e.isTiming?"\u4e8e ".concat($o()(e.timing).format("YYYY-MM-DD HH:mm:ss")," \u53d1\u9001"):"\u672a\u8bbe\u7f6e\u5b9a\u65f6\u65f6\u95f4\uff0c\u8bf7\u624b\u52a8\u53d1\u9001"),g.a.createElement(Vn.a,{title:"",key:e.content.news_item[0].thumb_media_id+"0"},g.a.createElement(lo.a.Item,{className:"cursor",onClick:function(){return i(e.media_id,0,e.content.news_item[0],e._id)}},g.a.createElement("div",{className:"head-message"},g.a.createElement("p",{className:"ellipse-two"},e.content.news_item[0].title),g.a.createElement("img",{src:e.content.news_item[0].local_img_path,alt:"\u8bf7\u5148\u5728\u5fae\u4fe1\u540e\u53f0\u4e0a\u4f20\u56fe\u7247"})))),e.content.news_item.slice(1).map(function(t,a){return g.a.createElement(Vn.a,{title:"\u70b9\u51fb\u4fee\u6539\u539f\u6587\u94fe\u63a5",key:t.thumb_media_id+a+1,placement:"rightTop"},g.a.createElement(lo.a.Item,{className:"border_btm cursor",onClick:function(){return i(e.media_id,a+1,e.content.news_item[a+1],e._id)}},g.a.createElement("div",{className:"rest-message"},g.a.createElement("p",{className:"ellipse-two"},t.title),g.a.createElement("img",{src:t.local_img_path,alt:"miss"}))))})),actions:[g.a.createElement(Vn.a,{title:"\u540c\u6b65"},g.a.createElement(Gn.a,{onClick:function(){return a(e)},type:"cloud-upload",key:"sync"})),g.a.createElement(Vn.a,{title:"\u53d1\u9001"},g.a.createElement(Gn.a,{onClick:function(){return n(e)},type:"message",key:"send"})),g.a.createElement(Vn.a,{title:"\u5b9a\u65f6\u53d1\u9001"},g.a.createElement(Gn.a,{onClick:function(){return o(e)},type:"history",key:"timing"})),g.a.createElement(Vn.a,{title:"\u590d\u5236"},g.a.createElement(Gn.a,{onClick:function(){return r(e._id)},type:"fork",key:"copy"})),g.a.createElement(Vn.a,{title:"\u5220\u9664"},g.a.createElement(Gn.a,{onClick:function(){return c(e._id,t)},type:"delete",key:"del"}))]}))}}))}),lr=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(v.a)(t).call(this,e))).getGonghaoList=function(){j.a.get("/conf").then(function(e){var t=e.data,n=t.data;1===t.code&&a.setState({gonghaoList:n})})},a.syncMaterial=function(){var e=a.state,t=e.messageInfo,n=e.checkedList;D.a.confirm({title:"\u786e\u5b9a\u540c\u6b65\u8fd9\u6761\u7d20\u6750\u5417\uff1f",onOk:function(){j.a.post("/material/syncMaterial",{codes:n,docs:[t]}).then(function(e){var t=e.data,n=t.code,o=t.msg;1===n?(P.a.success(o),a.closeSyncModal()):P.a.error(o)})}})},a.closeSyncModal=function(){a.setState({syncModal:!1,checkedList:[],indeterminate:!1,checkAll:!1,messageInfo:{}})},a.onCheckAllChange=function(e){var t=a.state,n=t.code,o=t.gonghaoList.filter(function(e){return e.code!==n}).map(function(e){return e.code});a.setState({checkedList:e.target.checked?o:[],indeterminate:!1,checkAll:e.target.checked})},a.onChange=function(e){var t=a.state,n=t.code,o=t.gonghaoList.filter(function(e){return e.code!==n}).map(function(e){return e.code});a.setState({checkedList:e,indeterminate:!!e.length&&e.length<o.length,checkAll:e.length===o.length})},a.state={syncModal:!1,checkedList:[],indeterminate:!1,checkAll:!1,messageInfo:{},code:e.code,gonghaoList:[]},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.code;this.props.getMessageList(e),this.props.getTagList(e),this.props.getGroupGonghao(),this.getGonghaoList()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){if(this.props.code!==e.code){var a=e.code;this.props.getMessageList(a)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.messageList,n=t.openModal,o=t.sendModal,r=t.sendMessage,c=t.sendInfo,i=t.tagList,l=t.closeModal,s=t.changeTagId,u=t.sendTimingModal,m=t.sendTimingMessage,d=t.sendTimingInfo,p=t.openTimingModal,f=t.changeTimingState,h=t.copy,y=t.changeTime,v=t.deleteMaterial,b=t.isComplete,k=t.openUpdateMaterialModal,E=t.closeUpdateMaterialModal,I=t.updateMaterialModal,M=t.updateMaterial,C=t.updateInfo,O=t.changeContentSourceUrl,_=this.state,w=_.code,L=_.gonghaoList.filter(function(e){return e.code!==w});return g.a.createElement(nr.a,{locale:cr.a},g.a.createElement("div",{className:"container",style:{padding:0}},g.a.createElement(ir,{messageList:a,openSyncModal:function(t){return e.setState({syncModal:!0,messageInfo:t})},openModal:n,openTimingModal:p,copy:h,deleteMaterial:v,isComplete:b,openUpdateMaterialModal:k})),g.a.createElement(D.a,{title:"\u8bf7\u9009\u62e9\u8981\u53d1\u9001\u7684\u6807\u7b7e",visible:o,onOk:function(){return r(c)},onCancel:l},g.a.createElement(uo.a.Group,{value:c.tagId,onChange:function(e){return s(e,!1)}},g.a.createElement(uo.a,{value:-1},"\u5168\u90e8"),i.map(function(e){return g.a.createElement(uo.a,{key:e._id,value:e.id},e.name)}))),g.a.createElement(D.a,{title:"\u521b\u5efa\u5b9a\u65f6\u53d1\u9001\u4efb\u52a1\uff1f",visible:u,onOk:function(){return m(d,w)},onCancel:l},g.a.createElement("label",{htmlFor:"tagId"},"\u6807\u7b7e\uff1a",g.a.createElement(uo.a.Group,{id:"tagId",value:d.tagId,onChange:function(e){return s(e,!0)}},g.a.createElement(uo.a,{value:-1},"\u5168\u90e8"),i.map(function(e){return g.a.createElement(uo.a,{key:e._id,value:e.id},e.name)}))),g.a.createElement("label",{style:{display:"block",margin:"20px 0"},htmlFor:"isTiming"},"\u662f\u5426\u5b9a\u65f6\uff1a",g.a.createElement(xo.a,{checked:d.isTiming,onChange:f})),g.a.createElement("label",{htmlFor:"timing",style:{display:d.isTiming?"block":"none"}},"\u65f6\u95f4\u9009\u62e9\uff1a",g.a.createElement(Zo.a,{value:$o()(new Date(d.timing),"YYYY-MM-DD"),onChange:function(e,t){return y(t,"date")}}),g.a.createElement(or.a,{value:$o()(new Date(d.timing),"HH-MM-SS"),onChange:function(e,t){return y(t,"time")}}))),g.a.createElement(D.a,{width:640,title:"\u8bf7\u9009\u62e9\u9700\u8981\u540c\u6b65\u7d20\u6750\u7684\u516c\u53f7\uff1a",visible:this.state.syncModal,onOk:this.syncMaterial,onCancel:this.closeSyncModal},g.a.createElement("div",{style:{borderBottom:"1px solid #E9E9E9",paddingBottom:10,marginBottom:10}},g.a.createElement(rr.a,{indeterminate:this.state.indeterminate,onChange:this.onCheckAllChange,checked:this.state.checkAll},"\u5168\u9009")),g.a.createElement(rr.a.Group,{style:{width:"100%"},onChange:this.onChange,value:this.state.checkedList},g.a.createElement(zo.a,null,L.map(function(e){return g.a.createElement(Uo.a,{span:6,key:e._id},g.a.createElement(rr.a,{value:e.code},e.nick_name))})))),g.a.createElement(D.a,{visible:I,onCancel:E,onOk:function(){return M(C,w)},title:"\u4fee\u6539\u539f\u6587\u94fe\u63a5"},g.a.createElement(Tn.a,{value:C.articles.content_source_url,placeholder:"\u8bf7\u8f93\u5165\u65b0\u7684\u539f\u6587\u94fe\u63a5",onChange:O})))}},{key:"componentWillUnmount",value:function(){this.props.resetState()}}]),t}(m.PureComponent),sr=Object(k.b)(function(e){return{tagList:e.message.group.tagList,messageList:e.message.group.messageList,sendInfo:e.message.group.sendInfo,sendTimingInfo:e.message.group.sendTimingInfo,sendModal:e.message.group.sendModal,sendTimingModal:e.message.group.sendTimingModal,gonghaoList:e.message.group.gonghaoList,isComplete:e.message.group.isComplete,updateMaterialModal:e.message.group.updateMaterialModal,updateInfo:e.message.group.updateInfo}},function(e){return{getTagList:function(t){e(c.getTagList(t))},getMessageList:function(t){e(c.getMessageList(t))},openModal:function(t){e(c.openModal(t))},sendMessage:function(t){e(c.sendMessage(t))},changeTagId:function(t,a){e(c.changeTagId(t.target.value,a))},openTimingModal:function(t){e(c.openTimingModal(t))},closeModal:function(){e(c.closeModal())},sendTimingMessage:function(t,a){e(c.sendTimingMessage(t,a))},changeTimingState:function(t){e(c.changeTimingState(t))},changeTime:function(t,a){e(c.changeTime(t,a))},copy:function(t){e(c.copy(t))},deleteMaterial:function(t,a){e(c.deleteMaterial(t,a))},resetState:function(){e(c.resetState())},getGroupGonghao:function(){e(c.getGroupGonghao())},openUpdateMaterialModal:function(t,a,n,o){e(c.openUpdateMaterialModal({media_id:t,index:a,articles:n,id:o}))},closeUpdateMaterialModal:function(){e(c.closeUpdateMaterialModal())},updateMaterial:function(t,a){e(c.updateMaterial(t,a))},changeContentSourceUrl:function(t){var a=t.target.value;e(c.changeContentSourceUrl(a))}}})(lr),ur=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(v.a)(t).call(this,e))).state={openidModalVisible:!1,tagList:[]},console.log(e.initMaterial),a.openOpenidModal=a.openOpenidModal.bind(Object(jn.a)(a)),a.prevTextMaterial=a.prevTextMaterial.bind(Object(jn.a)(a)),a.cancelPrev=a.cancelPrev.bind(Object(jn.a)(a)),a.submitForm=a.submitForm.bind(Object(jn.a)(a)),a.closeModal=a.closeModal.bind(Object(jn.a)(a)),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"openOpenidModal",value:function(){this.setState({openidModalVisible:!0})}},{key:"prevTextMaterial",value:function(){var e=this.props,t=e.form.getFieldsValue,a=e.code,n=t(),o=n.openid,r=n.content;j.a.post("/textMaterial/preview",{code:a,openid:o,content:r}).then(function(e){var t=e.data,a=t.code,n=t.msg;1===a&&P.a.success(n)}),this.cancelPrev()}},{key:"cancelPrev",value:function(){(0,this.props.form.setFieldsValue)({openid:""}),this.setState({openidModalVisible:!1})}},{key:"submitForm",value:function(){var e=this.props.form.getFieldsValue;this.props.submitTextMaterial(e())}},{key:"closeModal",value:function(){(0,this.props.form.resetFields)(),this.props.cancelEditMaterial()}},{key:"componentDidMount",value:function(){var e=this,t=this.props.code;j.a.get("/material/tag",{params:{code:t}}).then(function(t){e.setState({tagList:t.data.data})})}},{key:"render",value:function(){var e=this.props,t=e.form,a=t.getFieldDecorator,n=t.getFieldValue,o=e.editMaterialModalVisible,r=e.initMaterial,c=void 0===r?{}:r,i=this.state,l=i.openidModalVisible,s=i.tagList;return g.a.createElement(D.a,{visible:o,title:"\u7f16\u8f91\u6587\u672c\u7d20\u6750",footer:g.a.createElement("div",null,g.a.createElement(mo.a,{onClick:this.openOpenidModal},"\u53d1\u9001\u9884\u89c8"),g.a.createElement(mo.a,{onClick:this.submitForm},"\u63d0\u4ea4")),onCancel:this.closeModal},g.a.createElement(zn.a,{labelCol:{span:4},wrapperCol:{span:20,offset:0}},g.a.createElement(zn.a.Item,{label:"\u6587\u672c\u7d20\u6750"},a("content",{initialValue:c.content||"",rules:[{required:!0,message:"Please input your content!"}]})(g.a.createElement(Tn.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u6587\u672c\u7d20\u6750\u5185\u5bb9"}))),g.a.createElement(zn.a.Item,{label:"\u7c89\u4e1d\u5c5e\u6027"},a("tagId",{initialValue:c.tagId||null,rules:[{required:!0}]})(g.a.createElement(uo.a.Group,null,g.a.createElement(uo.a,{value:-1},"\u5168\u90e8\u7528\u6237"),s.map(function(e){return g.a.createElement(uo.a,{key:e._id,value:e.id},e.name)})))),g.a.createElement(zn.a.Item,{label:"\u662f\u5426\u5b9a\u65f6"},a("is_timing",{valuePropName:"checked",initialValue:c.is_timing||!1})(g.a.createElement(xo.a,null))),n("is_timing")?g.a.createElement(zn.a.Item,{label:"\u53d1\u9001\u65f6\u95f4"},a("timing_time",{initialValue:c.is_timing?$o()(c.timing_time):null})(g.a.createElement(Zo.a,{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",placeholder:"\u8bf7\u9009\u62e9\u5b9a\u65f6\u53d1\u9001\u65f6\u95f4"}))):""),g.a.createElement(D.a,{visible:l,title:"\u53d1\u9001\u9884\u89c8\u6d88\u606f",onOk:this.prevTextMaterial,onCancel:this.cancelPrev},a("openid",{rules:[{required:!0,message:"Please input your openid!"}],initialValue:""})(g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165openid"}))))}}]),t}(m.Component),mr=zn.a.create()(ur),gr=(a(947),function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(v.a)(t).call(this,e))).state={editMaterialModalVisible:!1,textMaterialList:[],initMaterial:{},index:-1},a.openEditMaterialModal=a.openEditMaterialModal.bind(Object(jn.a)(a)),a.submitTextMaterial=a.submitTextMaterial.bind(Object(jn.a)(a)),a.cancelEditMaterial=a.cancelEditMaterial.bind(Object(jn.a)(a)),a.updateTextMaterial=a.updateTextMaterial.bind(Object(jn.a)(a)),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"openEditMaterialModal",value:function(){this.setState({editMaterialModalVisible:!0})}},{key:"submitTextMaterial",value:function(e){var t=this,a=this.state,n=a.initMaterial._id,o=void 0===n?"":n,r=a.index,c=a.textMaterialList;e.timing_time=+e.timing_time,e.code=this.props.code,e.tagId=parseInt(e.tagId),o&&(e._id=o),D.a.confirm({title:"\u786e\u5b9a\u63d0\u4ea4\u8fd9\u6761\u6587\u672c\u7d20\u6750\u5417\uff1f",onOk:function(){o?A.put("/textMaterial",Object(O.a)({},e)).then(function(e){var a=e.data,n=a.code,o=a.msg,i=a.data;1===n?(c.splice(r,1,i),t.setState({textMaterialList:c}),P.a.success(o),t.cancelEditMaterial()):P.a.warning(o)}):A.post("/textMaterial",Object(O.a)({},e)).then(function(e){var a=e.data,n=a.code,o=a.msg,r=a.data;1===n?(t.setState(function(e){return{textMaterialList:[r].concat(Object(_.a)(e.textMaterialList))}}),P.a.success(o),t.cancelEditMaterial()):P.a.warning(o)})}})}},{key:"cancelEditMaterial",value:function(){this.setState({editMaterialModalVisible:!1,initMaterial:{}})}},{key:"updateTextMaterial",value:function(e,t){this.openEditMaterialModal(),this.setState({initMaterial:Object(O.a)({},e),index:t})}},{key:"sendMaterial",value:function(e,t){var a=this,n=this.state.textMaterialList;D.a.confirm({title:"\u662f\u5426\u53d1\u9001\u8fd9\u6761\u7d20\u6750",onOk:function(){A.post("/textMaterial/send",Object(O.a)({},e)).then(function(e){var o=e.data,r=o.code,c=o.msg;1===r?(P.a.success(c),Object.assign(n[t],{isSend:1}),a.setState({textMaterialList:n})):P.a.warning(c)})}})}},{key:"deleteMaterial",value:function(e,t){var a=this;D.a.confirm({title:"\u662f\u5426\u5220\u9664\u8fd9\u6761\u7d20\u6750\uff1f",onOk:function(){A.delete("/textMaterial",{params:{_id:e}}).then(function(e){var n=e.data,o=n.code,r=n.msg;1===o?(P.a.success(r),a.setState(function(e){var a=e.textMaterialList;return a.splice(t,1),{textMaterialList:a}})):P.a.warning(r)})}})}},{key:"componentDidMount",value:function(){var e=this;A.get("/textMaterial",{params:{code:this.props.code}}).then(function(t){var a=t.data,n=a.code,o=a.data;1===n&&e.setState({textMaterialList:o.reverse()})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.editMaterialModalVisible,n=t.textMaterialList,o=t.initMaterial,r=this.props.code,c={pageSize:window.innerWidth>1440?18:9};return g.a.createElement(nr.a,{locale:cr.a},g.a.createElement("div",{className:"text-material"},g.a.createElement(mo.a,{className:"mb15",onClick:this.openEditMaterialModal},"\u521b\u5efa\u6587\u672c\u7d20\u6750"),g.a.createElement(lo.a,{grid:{gutter:16,xl:3,xxl:6},dataSource:n,renderItem:function(t,a){return g.a.createElement(lo.a.Item,{key:t._id},g.a.createElement(Fn.a,{title:t.is_timing?g.a.createElement("p",null,"\u4e8e ",g.a.createElement("span",{className:"date"},$o()(t.timing_time).format("YYYY-MM-DD HH:mm"))," \u53d1\u9001"):"\u672a\u8bbe\u7f6e\u5b9a\u65f6\u65f6\u95f4",actions:t.isSend?[g.a.createElement("span",{className:"see-msg-id",onClick:function(){return D.a.warning({title:"msg_id",content:g.a.createElement("p",{style:{userSelect:"text"}},t.msg_id)})}},g.a.createElement(Gn.a,{type:"eye",key:"eye"}),g.a.createElement("span",null,"\u67e5\u770bmsg_id"))]:[g.a.createElement(Gn.a,{type:"setting",key:"setting",onClick:function(){return e.updateTextMaterial(t,a)}}),g.a.createElement(Gn.a,{disabled:!0,type:"share-alt",key:"edit",onClick:function(){return t.is_timing?P.a.warning("\u5df2\u8bbe\u7f6e\u4e3a\u5b9a\u65f6\u53d1\u9001\uff0c\u5982\u6709\u9700\u8981\uff0c\u8bf7\u70b9\u51fb\u4fee\u6539"):e.sendMaterial(t,a)}}),g.a.createElement(Gn.a,{type:"delete",key:"delete",onClick:function(){return e.deleteMaterial(t._id,a)}})]},g.a.createElement("p",{className:"card-content1"},t.content)))},pagination:c}),a&&g.a.createElement(mr,{initMaterial:o,editMaterialModalVisible:a,cancelEditMaterial:this.cancelEditMaterial,code:r,submitTextMaterial:this.submitTextMaterial})))}}]),t}(m.Component)),dr=a(973),pr=(a(948),Dn.a.Sider),fr=Dn.a.Content,hr=dr.a.Panel,yr=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={gonghaoTagList:[],gonghaoList:[],nick_name:"",_id:"",activeKey:""},a.search=function(e){var t=a.state.gonghaoTagList;""!==e?j.a.get("/conf/find_one",{params:{nick_name:e}}).then(function(e){if(0!==e.data.data.length){var n=e.data.data;a.props.setCode(n[0].code);var o=t.filter(function(e){return n[0].group===e.name});a.setState({nick_name:"",_id:n[0]._id,activeKey:o[0].name})}else P.a.info("\u6ca1\u6709\u67e5\u8be2\u5230\u5305\u542b\u8be5\u5b57\u7b26\u7684\u516c\u53f7\uff0c\u8bf7\u68c0\u67e5\u540e\u91cd\u65b0\u8f93\u5165")}):P.a.info("\u516c\u53f7\u540d\u4e0d\u80fd\u4e3a\u7a7a")},a.changeSearchInput=function(e){var t=e.target.value;a.setState({nick_name:t})},a.selectGonghao=function(e){var t=e.code,n=e._id;a.props.setCode(t),a.setState({_id:n})},a.handleChangeGroup=function(e){a.setState({activeKey:e||""})},a.getGonghaoTagList=function(){j.a.get("/gonghaoTag").then(function(e){if(1===e.data.code){var t=e.data.data;a.setState({gonghaoTagList:t})}})},a.getGonghaoList=function(){j.a.get("/conf").then(function(e){var t=e.data,n=t.data;1===t.code&&a.setState({gonghaoList:n})})},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.gonghaoTagList,n=t.gonghaoList,o=t.nick_name,r=t._id,c=t.activeKey,i=function(t){return g.a.createElement(lo.a,{className:"gonghao-list",dataSource:n.length?n.filter(function(e){return e.group===t}):[],locale:{emptyText:g.a.createElement("span",{style:{display:"none"}},"123")},renderItem:function(t){return g.a.createElement(lo.a.Item,{className:t._id===r?"cursor selected":"cursor",onClick:function(){return e.selectGonghao(t)},key:t._id},g.a.createElement(Rn.a,{shape:"square",size:22,icon:"user"}),t.nick_name)}})};return g.a.createElement(Dn.a,{style:{background:"#fff"},className:"message-group-wrapper"},g.a.createElement(pr,{className:"message-sider-wrapper",theme:"light",width:"190"},g.a.createElement(Tn.a.Search,{className:"search-input",placeholder:"\u8bf7\u8f93\u5165\u516c\u53f7\u540d\u79f0",onSearch:this.search,value:o,onChange:this.changeSearchInput}),g.a.createElement(lo.a,null,g.a.createElement(lo.a.Item,null,g.a.createElement(dr.a,{bordered:!1,accordion:!0,activeKey:c,onChange:this.handleChangeGroup},g.a.createElement(hr,{header:"\u672a\u5206\u7ec4",key:"\u672a\u5206\u7ec4"},i("\u672a\u5206\u7ec4")),a.map(function(e){return g.a.createElement(hr,{header:e.name,key:e.name},i(e.name))}))))),g.a.createElement(fr,null,this.props.content))}},{key:"componentDidMount",value:function(){this.getGonghaoTagList(),this.getGonghaoList()}}]),t}(m.Component),vr=function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.code;this.props.getTagList(e),this.props.getHistoryList(e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){if(this.props.code!==e.code){var a=e.code;this.props.getTagList(a),this.props.getHistoryList(a)}}},{key:"render",value:function(){var e=this.props,t=e.historyList,a=e.tagList,n=e.checkSendState,o=e.openMsgModal,r=e.closeMsgModal,c=e.deleteMsg,i=e.changeArticleIdx,l=e.delMsgInfo,s=e.historyMsgModal,u=e.code,m=[{key:"update_time",title:"\u53d1\u9001\u6d88\u606f\u65f6\u95f4",align:"center",width:120,render:function(e,t){var a=$o()(1e3*t.update_time).format("YYYY-MM-DD, HH:mm:ss");return g.a.createElement("span",null,a)}},{title:"\u53d1\u9001\u5bf9\u8c61",align:"center",render:function(e,t){var n="\u65e0";if(t.tagId){var o=a.filter(function(e){return t.tagId===e.id});n=o.length?o[0].name:"\u5168\u90e8"}return g.a.createElement("span",null,n)}},{title:"\u662f\u5426\u6210\u529f",align:"center",width:200,render:function(e,t){var a;return a=""===t.msg_id?"\u65e0msg_id,\u53d1\u9001\u4e0d\u6210\u529f":"msg_id\u5b58\u5728,\u53d1\u9001\u6210\u529f",g.a.createElement("span",null,a)}},{title:"\u56fe\u6587\u6807\u9898",align:"center",width:300,render:function(e,t){for(var a=0!==t.content.news_item.length?t.content.news_item:[],n=[],o=0;o<a.length;o++)n.push(o+1+"."+a[o].title);return g.a.createElement(Vn.a,{placement:"top",title:n},g.a.createElement("p",{className:"textEllipsis",style:{width:300}},n))}},{key:"isTiming",title:"\u662f\u5426\u5b9a\u65f6",align:"center",render:function(e,t){var a=t.isTiming?"\u662f":"\u5426";return g.a.createElement("span",null,a)}},{key:"timing",title:"\u5b9a\u65f6\u65f6\u95f4",align:"center",render:function(e,t){var a="~~";return t.timing&&(a=$o()(t.timing).format("YYYY-MM-DD, HH:mm:ss")),g.a.createElement("span",null,a)}},{title:"Action",align:"center",width:100,render:function(e,t){return g.a.createElement("div",null,g.a.createElement(po,{mb:10,onClick:function(){return n(u,t.msg_id)},buttonContent:"\u53d1\u9001\u72b6\u6001"}),g.a.createElement(po,{background:"danger",onClick:function(){return o(t.code,t.msg_id)},buttonContent:"\u5220\u9664\u6d88\u606f"}))}}];return g.a.createElement("div",null,g.a.createElement("div",{className:"container"},g.a.createElement(Io.a,{size:"small",bordered:!0,rowKey:function(e){return e._id},columns:m,dataSource:t})),g.a.createElement(D.a,{title:"\u8bf7\u8f93\u5165\u8981\u5220\u9664\u7684\u6d88\u606f\u7684\u7d22\u5f15",visible:s,onOk:function(){return c(l)},onCancel:r},g.a.createElement(Tn.a,{style:{width:100},value:l.article_idx,onChange:i}),g.a.createElement("p",{style:{color:"red",marginTop:10}},"Tips:   0\u4e3a\u5168\u90e8\u5220\u9664  1\u30012\u30013...\u4e3a\u5bf9\u5e94\u7b2c\u51e0\u6761")))}}]),t}(m.Component),br=Object(k.b)(function(e){return{tagList:e.message.group.tagList,historyList:e.message.group.historyList,historyMsgModal:e.message.group.historyMsgModal,delMsgInfo:e.message.group.delMsgInfo,delDate:e.message.group.delDate}},function(e){return{getHistoryList:function(t){e(c.getHistoryList(t))},getTagList:function(t){e(c.getTagList(t))},checkSendState:function(t,a){e(c.checkSendState(t,a))},openMsgModal:function(t,a){e(c.openMsgModal(t,a))},closeMsgModal:function(){e(c.closeMsgModal())},deleteMsg:function(t){e(c.deleteMsg(t))},changeArticleIdx:function(t){e(c.changeArticleIdx(t.target.value))},clearHistory:function(t){e(c.clearHistory(t))},changeDate:function(t,a){e(c.changeDate(a))},deleteMany:function(t,a){var n=new Date(a).getTime()/1e3;e(c.deleteMany(t,n))}}})(vr),kr=a(227),Er={width:"100%",textAlign:"center",background:"rgba(241, 244, 245, .7)",position:"absolute",padding:"200px 0",top:0,left:0,zIndex:1},Ir=function(e){return g.a.createElement("div",{style:Er},g.a.createElement(kr.a,{spinning:e.spinning}))},Mr=tr.a.TabPane,Cr=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={code:null,historyModalVisible:!1,spinning:!0},a.timer=function(){return setTimeout(function(){a.setState({spinning:!1})},1e3)},a.setCode=function(e){clearTimeout(a.timer),a.setState({spinning:!0}),a.setState({code:e}),a.timer()},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){P.a.warning("\u8bf7\u9009\u62e9\u516c\u53f7\u8fdb\u884c\u64cd\u4f5c")}},{key:"render",value:function(){var e=this,t=this.props,a=t.getMaterial,n=t.clearMaterial,o=this.state,r=o.code,c=o.historyModalVisible,i=o.spinning,l={height:"auto",margin:"0 auto"};return g.a.createElement("div",null,g.a.createElement("div",{className:"container"},g.a.createElement(yr,{setCode:this.setCode,content:r?i?g.a.createElement("div",null,g.a.createElement(Ir,{spinning:i}),g.a.createElement(ar.a,{description:"",image:"https://s.weituibao.com/static/1544235586856/empty.png",imageStyle:l})):g.a.createElement("div",null,g.a.createElement(tr.a,{tabPosition:"left"},g.a.createElement(Mr,{tab:"\u56fe\u6587",key:"1"},g.a.createElement(po,{size:"default",background:"success",buttonContent:"\u540c\u6b65\u7d20\u6750",onClick:function(){return a(r)}}),g.a.createElement(po,{size:"default",buttonContent:"\u7fa4\u53d1\u8bb0\u5f55",onClick:function(){return e.setState({historyModalVisible:!0})}}),g.a.createElement(po,{size:"default",mb:20,background:"danger",onClick:function(){return n(r)},buttonContent:"\u6e05\u7a7a\u5217\u8868"}),g.a.createElement(sr,{code:r})),g.a.createElement(Mr,{tab:"\u6587\u672c",key:"2"},g.a.createElement(gr,{code:r})))):g.a.createElement(ar.a,{description:"",image:"https://s.weituibao.com/static/1544235586856/empty.png",imageStyle:l})})),r&&g.a.createElement(D.a,{title:"\u53d1\u9001\u8bb0\u5f55",visible:c,width:1200,footer:"",onCancel:function(){return e.setState({historyModalVisible:!1})}},g.a.createElement(br,{code:r})))}}]),t}(m.Component),Or=Object(k.b)(null,function(e){return{getMaterial:function(t){e(c.getMaterial(t))},clearMaterial:function(t){e(c.clearMaterial(t))}}})(Cr),_r=io.a.Option,wr=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={messageType:"\u8bf7\u9009\u62e9\u6d88\u606f\u7c7b\u578b",power:0},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.currentPage,a=e.nick_name,n=e.messageGroup,o=e.messageType,r=e.searchByNickName,c=e.changeMessageType,i=e.changeMessageGroup,l=e.changePage,s=e.getKefuMessageList,u=e.getAllGroup,m=e.getAllCodes,g=localStorage.getItem("userInfo");if(g){var d=JSON.parse(g).power;this.setState({power:d})}a?r(a):4!==o?c(o):n?i(n):t>1?l({page:t}):s(),u(),m()}},{key:"render",value:function(){var e=this.state.power,t=this.props,a=t.allCodes,n=t.kefuMessageList,o=t.copyMessage,r=t.deleteMessage,c=t.sendKefuMessage,i=t.messageType,l=t.changeMessageGroup,s=t.allGroup,u=t.messageGroup,m=t.selectedMessages,d=t.changeSelectedMessages,p=t.updateMoreGroup,f=t.updateGroupModal,h=t.openUpdateGroupModal,y=t.changeGroup,v=t.cancelUpdateGroup,b=t.group,k=t.changePage,I=t.currentPage,M=t.total,C=t.nick_name,_=t.changeNickName,w=t.searchByNickName,L=t.deleteMultiMsg,S=t.changeMessageType,x=[{key:"_id",title:"\u6d88\u606fID",dataIndex:"_id",align:"center",width:100,className:e?"":"powerHide"},{key:"remarks",title:"\u6d88\u606f\u540d\u79f0",dataIndex:"remarks",align:"center",className:"mw100",render:function(e){return e||"\u65e0"}},{key:"group",title:"\u5206\u7ec4",dataIndex:"group",align:"center",width:80},{key:"delay",title:"\u5ef6\u65f6\u65f6\u95f4",align:"center",className:"mw100",render:function(e,t){return t.task?t.isHour?t.delay/60+"\u5c0f\u65f6":t.delay+"\u5206\u949f":"\u2014\u2014"}},{key:"timing_time",title:"\u5b9a\u65f6\u65f6\u95f4",align:"center",className:"mw100",sorter:function(e,t){return new Date(e.timing_time).getTime()-new Date(t.timing_time).getTime()},render:function(e,t){return t.is_timing?$o()(t.timing_time).format("YYYY-MM-DD HH:mm:ss"):"\u2014\u2014"}},{key:"daily_time_show",dataIndex:"daily_time_show",title:"\u6309\u65f6\u53d1\u9001",align:"center",className:"mw100",sorter:function(e,t){return t.daily_time_show-e.daily_time_show},render:function(e,t){return t.is_daily?$o()(e).format("HH:mm:ss"):"\u2014\u2014"}},{key:"gonghaoList",dataIndex:"gonghaoList",title:"\u5df2\u9009\u516c\u53f7 (\u6700\u591a\u663e\u793a4\u4e2a)",align:"center",className:"mw100",render:function(e){return e.slice(0,4).map(function(e){return g.a.createElement("p",{key:e._id},e.nick_name)})}},{key:"sex",title:"\u7fa4\u53d1\u7c89\u4e1d",align:"center",dataIndex:"sex",width:80,render:function(e){return"0"===e?"\u672a\u77e5\u7c89\u4e1d":"1"===e?"\u7537\u6027\u7c89\u4e1d":"2"===e?"\u5973\u6027\u7c89\u4e1d":"\u5168\u90e8\u7c89\u4e1d"}},{key:"action_type",title:"\u4e92\u52a8\u884c\u4e3a",align:"center",width:80,dataIndex:"action_type",render:function(e,t){return t.task?1===e?"\u7528\u6237\u5173\u6ce8":"\u7528\u6237\u4e92\u52a8":"~~"}},{key:"count",title:"\u89e6\u8fbe\u7528\u6237",align:"center",dataIndex:"count",width:50,render:function(e,t){return t.task?"\u6682\u4e0d\u652f\u6301":e||0}},{key:"copy_id",title:"\u590d\u5236\u6d88\u606fID",align:"center",width:65,className:e?"":"powerHide",render:function(e,t){return g.a.createElement(Fo.a,{className:"btn-wrapper",text:t._id,onCopy:function(){return P.a.success("\u590d\u5236\u6210\u529f")}},g.a.createElement(po,{background:"info",buttonContent:"\u590d\u5236"}))}},{title:"Action",align:"center",className:"mw150",width:150,render:function(e,t,a){return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",null,g.a.createElement(po,{background:"success",onClick:function(){return o(Object(O.a)({},t))},buttonContent:"\u590d\u5236"}),g.a.createElement(po,{buttonContent:g.a.createElement(E.b,{to:{pathname:"./update",query:Object(O.a)({},t)}},"\u4fee\u6539")})),g.a.createElement("div",null,g.a.createElement(po,{disabled:t.is_timing||t.delay||t.is_daily,background:t.is_timing||t.delay||t.is_daily?"info":"warning",onClick:function(){return c(t._id,t.tagId)},buttonContent:"\u53d1\u9001"}),g.a.createElement(po,{background:"danger",onClick:function(){return r(t._id,a)},buttonContent:"\u5220\u9664"})))}}],N={selectedRowKeys:m,onChange:d,columnWidth:40},j={showQuickJumper:!0,onChange:function(e){var t={page:e};C?t={page:e,nick_name:C}:u?t={page:e,messageGroup:u}:4===i&&(t={page:e,messageType:i}),k(t)},current:I,total:M};return g.a.createElement("div",null,g.a.createElement("div",{className:"container"},g.a.createElement(io.a,{showSearch:!0,value:C,onChange:w,onSearch:_,style:{width:120,marginRight:5}},g.a.createElement(_r,{value:""},"\u5168\u90e8\u516c\u53f7"),a.map(function(e){return g.a.createElement(_r,{key:e._id,value:e.nick_name},e.nick_name)})),g.a.createElement(io.a,{value:i,onChange:S,style:{marginRight:5}},g.a.createElement(_r,{value:4},"\u5168\u90e8"),g.a.createElement(_r,{value:0},"\u624b\u52a8"),g.a.createElement(_r,{value:1},"\u5ef6\u65f6"),g.a.createElement(_r,{value:2},"\u5b9a\u65f6"),g.a.createElement(_r,{value:3},"\u6309\u65f6")),g.a.createElement(io.a,{style:{width:100},value:u,onChange:l},g.a.createElement(_r,{value:""},"\u5168\u90e8\u5206\u7ec4"),g.a.createElement(_r,{value:"\u672a\u5206\u7ec4"},"\u672a\u5206\u7ec4"),s.map(function(e){return g.a.createElement(_r,{key:e._id,value:e.group},e.group)})),g.a.createElement("div",{className:"fr"},g.a.createElement(po,{size:"default",mb:20,buttonContent:g.a.createElement(E.b,{to:"./create"},"\u65b0\u5efa\u5ba2\u670d\u6d88\u606f")}),g.a.createElement(po,{size:"default",ml:5,background:"success",buttonContent:"\u6279\u91cf\u4fee\u6539\u5206\u7ec4",onClick:h}),g.a.createElement(po,{size:"default",ml:5,background:"danger",buttonContent:"\u6279\u91cf\u5220\u9664",onClick:function(){return L(m)}})),g.a.createElement(Io.a,{bordered:!0,tableLayout:"auto",size:"middle",rowKey:function(e){return e._id},columns:x,dataSource:n,rowSelection:N,pagination:j})),g.a.createElement(D.a,{title:"\u8bf7\u9009\u62e9\u5206\u7ec4",visible:f,onCancel:v,onOk:function(){return p(m,b)}},g.a.createElement(uo.a.Group,{onChange:y,value:b},s.map(function(e){return g.a.createElement(uo.a,{key:e._id,value:e.group},e.group)}))))}}]),t}(m.Component),Lr=Object(k.b)(function(e){return{allCodes:e.message.kefu.allCodes,kefuMessageList:e.message.kefu.kefuMessageList,messageType:e.message.kefu.messageType,allGroup:e.message.kefu.allGroup,messageGroup:e.message.kefu.messageGroup,selectedMessages:e.message.kefu.selectedMessages,updateGroupModal:e.message.kefu.updateGroupModal,group:e.message.kefu.group,currentPage:e.message.kefu.currentPage,total:e.message.kefu.total,nick_name:e.message.kefu.nick_name}},function(e){return{getAllCodes:function(){e(i.getAllCodes())},getKefuMessageList:function(){e(i.getKefuMessageList())},getAllGroup:function(){e(i.getAllGroup())},copyMessage:function(t){e(i.createKefuMessage(t))},deleteMessage:function(t,a){e(i.deleteMessage(t,a))},sendKefuMessage:function(t,a){e(i.sendKefuMessage(t,a))},changeSelectedMessages:function(t){e(i.changeSelectedMessages(t))},updateMoreGroup:function(t,a){e(i.updateMoreGroup(t,a))},openUpdateGroupModal:function(){e(i.openUpdateGroupModal())},changeGroup:function(t){e(i.changeGroup(t.target.value))},cancelUpdateGroup:function(){e(i.cancelUpdateGroup())},changePage:function(t){e(i.changePage(t))},searchByNickName:function(t){e(i.searchByNickName(t))},changeNickName:function(t){e(i.changeNickName(t))},changeMessageType:function(t){e(i.changeMessageType(t))},changeMessageGroup:function(t){e(i.changeMessageGroup(t))},deleteMultiMsg:function(t){e(i.deleteMultiMsg(t))}}})(wr),Sr=a(976),xr=(a(949),io.a.Option),Nr=function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.getAllCodes(),this.props.getAllGroup();var e=this.props.history.location.query;e&&this.props.initKefuMessageInfo(e)}},{key:"render",value:function(){var e,t,a,n=this,o=this.props,r=o.kefuMessageInfo,c=o.content,i=o.changeContentValue,l=o.changeMessageValue,s=o.uploadImg,u=o.submitMessage,m=o.allCodes,d=o.selectGonghao,p=o.deleteGonghao,f=o.history,h=o.openPreviewModal,y=o.closePreviewModal,v=o.openid,b=o.changeOpenId,k=o.previewModal,E=o.preview,I=o.allGroup,M=o.groupInputVisible,C=o.groupValue,O=o.showGroupInput,_=o.handleGroupInputChange,w=o.handleGroupInputConfirm,L=o.handleClose,S=o.cancelSelectGroup;t=c.picurl?g.a.createElement("img",{style:{width:"100px"},src:c.picurl,alt:""}):g.a.createElement(mo.a,null,g.a.createElement(Gn.a,{type:"upload"})," \u4e0a\u4f20\u56fe\u7247 "),e=r.img?g.a.createElement("img",{style:{width:"100px"},src:r.img,alt:""}):g.a.createElement(mo.a,null,g.a.createElement(Gn.a,{type:"upload"})," \u4e0a\u4f20\u56fe\u7247 "),1===r.type?a=g.a.createElement(zn.a.Item,{label:"\u6587\u672c\u6d88\u606f",className:"text-message"},g.a.createElement(Tn.a.TextArea,{autoSize:{minRows:6},value:c.description,placeholder:"\u8bf7\u8f93\u5165\u6587\u672c\u6d88\u606f",onChange:function(e){return i(e,"description")}})):0===r.type?a=g.a.createElement("div",null,g.a.createElement(zn.a.Item,{label:"\u56fe\u7247\u5c01\u9762"},g.a.createElement(No.a,{name:"imageFile",action:"/reply/upload",onChange:function(e){s(r,e)},showUploadList:!1},t)),g.a.createElement(zn.a.Item,{label:"\u56fe\u6587\u6807\u9898"},g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165\u56fe\u6587\u6807\u9898",value:c.title,onChange:function(e){return i(e,"title")}})),g.a.createElement(zn.a.Item,{label:"\u56fe\u6587\u63cf\u8ff0",className:"text-message"},g.a.createElement(Tn.a.TextArea,{autoSize:{minRows:6},value:c.description,placeholder:"\u8bf7\u8f93\u5165\u56fe\u6587\u63cf\u8ff0",onChange:function(e){return i(e,"description")}})),g.a.createElement(zn.a.Item,{label:"\u8df3\u8f6c\u94fe\u63a5"},g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165\u8df3\u8f6c\u94fe\u63a5",value:c.url,onChange:function(e){return i(e,"url")}}))):2===r.type&&(a=g.a.createElement(zn.a.Item,{label:"\u56fe\u7247\u6d88\u606f"},g.a.createElement(No.a,{name:"imageFile",action:"/reply/upload",onChange:function(e){s(r,e)},showUploadList:!1},e)));var x;return 1===r.channel?x=g.a.createElement(g.a.Fragment,null,g.a.createElement(zn.a.Item,{label:"\u5ef6\u65f6\u65f6\u95f4"},g.a.createElement(Sr.a,{value:r.delay,min:1,onChange:function(e){return l(e,"delay")}}),g.a.createElement(io.a,{value:r.isHour,onChange:function(e){return l(e,"isHour")},style:{width:80}},g.a.createElement(xr,{value:0},"\u5206\u949f"),g.a.createElement(xr,{value:1},"\u5c0f\u65f6"))),g.a.createElement(zn.a.Item,{label:"\u4e92\u52a8\u7c7b\u578b"},g.a.createElement(uo.a.Group,{value:r.action_type,onChange:function(e){return l(e.target.value,"action_type")}},g.a.createElement(uo.a,{value:1},"\u7528\u6237\u5173\u6ce8"),g.a.createElement(uo.a,{value:2},"\u7528\u6237\u4e92\u52a8")))):2===r.channel?x=g.a.createElement(zn.a.Item,{label:"\u5b9a\u65f6\u65f6\u95f4"},g.a.createElement(Zo.a,{showTime:!0,placeholder:"\u9009\u62e9\u65f6\u95f4",value:$o()(r.timing_time),onChange:function(e,t){return l(t,"timing_time")}})):3===r.channel&&(x=g.a.createElement(zn.a.Item,{label:"\u9009\u62e9\u65f6\u95f4"},g.a.createElement(or.a,{placeholder:"\u9009\u62e9\u65f6\u95f4",value:$o()(r.daily_time_show),onChange:function(e,t){return l(e,"daily_time_show")}}))),g.a.createElement(nr.a,{locale:cr.a},g.a.createElement("div",{className:"container"},g.a.createElement(Ho,{selectGonghao:d,codes:r.codes,content:g.a.createElement("div",{className:"container edit-message"},g.a.createElement("div",{className:"kefu-form fl"},g.a.createElement(zn.a,{labelCol:{sm:{span:4}},wrapperCol:{sm:{span:20,offset:0}}},g.a.createElement(zn.a.Item,{label:"\u516c\u53f7\u5217\u8868"},g.a.createElement("div",{style:{width:"180%"}},m.map(function(e){return r.codes.indexOf(e.code)>-1&&g.a.createElement(so.a,{key:e._id,className:"cursor gonghao-tag",closable:!0,onClose:function(){return p(r.codes,e.code)}},e.nick_name)}))),g.a.createElement(zn.a.Item,{label:"\u6d88\u606f\u540d\u79f0"},g.a.createElement(Tn.a,{value:r.remarks,placeholder:"\u8bf7\u8f93\u5165\u6d88\u606f\u540d\u79f0,(\u4ec5\u4f9b\u5907\u6ce8\uff0c\u4e0d\u4f1a\u53d1\u9001\u7ed9\u7c89\u4e1d)",onChange:function(e){return l(e.target.value,"remarks")}})),g.a.createElement(zn.a.Item,{label:"\u6d88\u606f\u5206\u7ec4"},g.a.createElement(so.a,{color:"\u672a\u5206\u7ec4"!==r.group?"#1890ff":"",closable:"\u672a\u5206\u7ec4"!==r.group,onClose:S,style:"\u672a\u5206\u7ec4"!==r.group?{}:{background:"#fff",borderStyle:"dashed"}},r.group)),g.a.createElement(zn.a.Item,{label:"\u5168\u90e8\u5206\u7ec4"},M&&g.a.createElement(Tn.a,{ref:function(e){return n.input=e},type:"text",size:"small",style:{width:78,marginRight:10},value:C,onChange:_,onBlur:w,onPressEnter:w}),!M&&g.a.createElement(so.a,{className:"cursor",onClick:function(){return O(n)},style:{background:"#fff",borderStyle:"dashed"}},g.a.createElement(Gn.a,{type:"plus"})," New Tag"),I.map(function(e,t){return g.a.createElement(so.a,{color:"#1890ff",key:e._id,className:"cursor",closable:!0,onClose:function(a){return L(a,e._id,t)},onClick:function(t){return l(e.group,"group")}},e.group)})),g.a.createElement(jo.a,{style:{width:"205%",marginLeft:-50}}),g.a.createElement("h2",{className:"block-title"},"\u8bbe\u7f6e\u5ba2\u670d\u6d88\u606f"),g.a.createElement(zn.a.Item,null,g.a.createElement(uo.a.Group,{buttonStyle:"solid",value:r.type,onChange:function(e){return l(e.target.value,"type")}},g.a.createElement(uo.a.Button,{value:0},"\u56fe\u6587\u6d88\u606f"),g.a.createElement(uo.a.Button,{value:1},"\u6587\u672c\u6d88\u606f"))),a,g.a.createElement(jo.a,{style:{width:"175%",marginLeft:-50}}),g.a.createElement("h2",{className:"block-title"},"\u9009\u62e9\u7fa4\u53d1\u5bf9\u8c61"),g.a.createElement(zn.a.Item,{label:"\u7fa4\u53d1\u7c89\u4e1d"},g.a.createElement(uo.a.Group,{value:r.sex,onChange:function(e){return l(e.target.value,"sex")}},g.a.createElement(uo.a,{value:"all"},"\u5168\u90e8\u7c89\u4e1d"),g.a.createElement("br",null),g.a.createElement(uo.a,{value:"1"},"\u4ec5\u7537\u6027\u7c89\u4e1d"),g.a.createElement(uo.a,{value:"2"},"\u4ec5\u5973\u6027\u7c89\u4e1d"),g.a.createElement(uo.a,{value:"0"},"\u4ec5\u672a\u77e5\u7c89\u4e1d"))),g.a.createElement(jo.a,{style:{width:"175%",marginLeft:-50}}),g.a.createElement("h2",{className:"block-title"},"\u8bbe\u7f6e\u7fa4\u53d1\u65b9\u5f0f"),g.a.createElement(zn.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f"},g.a.createElement(uo.a.Group,{value:r.channel,onChange:function(e){return l(e.target.value,"channel")}},g.a.createElement(uo.a.Button,{value:0},"\u4eba\u5de5"),g.a.createElement(uo.a.Button,{value:1},"\u5ef6\u65f6"),g.a.createElement(uo.a.Button,{value:2},"\u5b9a\u65f6"),g.a.createElement(uo.a.Button,{value:3},"\u6309\u65f6\u53d1\u9001"))),x,g.a.createElement(jo.a,{style:{width:"175%",marginLeft:-50}}),g.a.createElement(zn.a.Item,null,g.a.createElement(mo.a,{size:"large",type:"primary",onClick:function(){return u(r,f,m)}},"\u786e\u5b9a",r._id?"\u5e76\u4fdd\u5b58\u6d88\u606f":"\u5e76\u521b\u5efa\u6d88\u606f"),r._id&&g.a.createElement(mo.a,{style:{marginLeft:20},type:"info",size:"large",onClick:function(){return f.goBack()}},"\u53d6\u6d88\u7f16\u8f91"),g.a.createElement(mo.a,{size:"large",style:{marginLeft:30,background:"yellowgreen",borderColor:"yellowgreen"},type:"primary",onClick:h},"\u53d1\u9001\u9884\u89c8")))))})),g.a.createElement(D.a,{title:"\u53d1\u9001\u9884\u89c8",visible:k,onCancel:y,onOk:function(){return E(r,v)}},g.a.createElement(Tn.a,{onChange:b,value:v,placeholder:"\u8bf7\u8f93\u5165\u9884\u89c8\u7528\u6237\u7684openid"}),g.a.createElement("span",{className:"tips"},"Tips: \u5728\u9884\u89c8\u516c\u53f7\u56de\u590d",g.a.createElement("span",null," openid "),",\u5c06\u8fd4\u56de\u7684\u5185\u5bb9\u590d\u5236\u5230\u8f93\u5165\u6846\u4e2d",g.a.createElement("br",null),"\u4e00\u4e2aopenid\u53ea\u5bf9\u5e94\u4e00\u4e2a\u516c\u53f7")))}},{key:"componentWillUnmount",value:function(){this.props.resetState()}}]),t}(m.Component),jr=Object(k.b)(function(e){return{kefuMessageInfo:e.message.kefu.kefuMessageInfo,content:e.message.kefu.content,allCodes:e.message.kefu.allCodes,previewModal:e.message.kefu.previewModal,openid:e.message.kefu.openid,allGroup:e.message.kefu.allGroup,groupInputVisible:e.message.kefu.groupInputVisible,groupValue:e.message.kefu.groupValue}},function(e){return{initKefuMessageInfo:function(t){e(i.initKefuMessageInfo(t))},changeContentValue:function(t,a){e(i.changeContentValue(t.target.value,a))},uploadImg:function(t,a){if("done"===a.file.status){var n="http://t.dmmup.com/uploads/".concat(a.file.response.filename),o="./public/uploads/".concat(a.file.response.filename);0===t.type?e(i.changeContentValue(n,"picurl")):(e(i.changeMessageValue(n,"img")),e(i.changeMessageValue(o,"img_path")))}},changeMessageValue:function(t,a){e(i.changeMessageValue(t,a))},resetState:function(){e(i.resetState())},selectParams:function(){e(i.selectParams())},submitMessage:function(t,a,n){e(i.submitMessage(t,a,n))},selectGonghao:function(t){e(i.selectGonghao(t))},deleteGonghao:function(t,a){t.splice(t.indexOf(a),1),e(i.selectGonghao(t))},getAllCodes:function(){e(i.getAllCodes())},changeOpenId:function(t){e(i.changeOpenId(t.target.value))},openPreviewModal:function(){e(i.openPreviewModal())},closePreviewModal:function(){e(i.closePreviewModal())},preview:function(t,a){e(i.preview(t,a))},getAllGroup:function(){e(i.getAllGroup())},showGroupInput:function(t){e(i.showGroupInput(t))},handleGroupInputChange:function(t){e(i.handleGroupInputChange(t.target.value))},handleGroupInputConfirm:function(t){e(i.handleGroupInputConfirm(t.target.value))},handleClose:function(t,a,n){t.preventDefault(),t.stopPropagation(),e(i.handleClose(a,n))},cancelSelectGroup:function(t){t.preventDefault(),e(i.cancelSelectGroup())}}})(Nr),Tr=Tn.a.Search,Gr=function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.confName,a=e.templateMessageList,n=e.deleteTemplate,o=e.sendTemplate,r=e.changeConfNickName,c=e.searchConfName,i=[{key:"confName",dataIndex:"confName",title:"\u516c\u4f17\u53f7",align:"center"},{key:"name",dataIndex:"name",title:"\u6d88\u606f\u540d\u79f0",align:"center"},{key:"sex",dataIndex:"sex",title:"\u6d88\u606f\u540d\u79f0",align:"center",render:function(e){return"all"===e?"\u5168\u90e8":"1"===e?"\u7537":"2"===e?"\u5973":"\u672a\u77e5"}},{key:"templateName",dataIndex:"templateName",title:"\u6a21\u677f\u540d\u79f0",align:"center"},{key:"timing_time",dataIndex:"timing_time",title:"\u5b9a\u65f6",align:"center",render:function(e,t){return t.is_timing?$o()(e).format("YYYY-MM-DD HH:mm:ss"):"~~"}},{key:"status",dataIndex:"status",title:"\u53d1\u9001\u72b6\u6001",align:"center",width:80,render:function(e){return 0===e?"\u672a\u53d1\u9001":1===e?"\u6b63\u5728\u53d1\u9001":2===e?"\u53d1\u9001\u6b21\u6570\u8d85\u51fa\u9650\u5236":"\u53d1\u9001\u5b8c\u6210"}},{key:"count",dataIndex:"count",title:"\u5df2\u63a5\u6536\u7528\u6237\u6570",align:"center",width:80},{key:"Action",title:"\u64cd\u4f5c",align:"center",width:240,render:function(e,t,a){return g.a.createElement("div",null,!t.is_timing&&0===t.status&&g.a.createElement(po,{buttonContent:"\u53d1\u9001",onClick:function(){return o(t._id,a)},background:"success"}),0===t.status&&g.a.createElement(po,{buttonContent:g.a.createElement(E.b,{to:{pathname:"./update",query:Object(O.a)({},t)}},"\u4fee\u6539")}),g.a.createElement(po,{buttonContent:"\u5220\u9664",onClick:function(){return n(t._id,a)},background:"danger"}))}}];return g.a.createElement("div",{className:"container"},g.a.createElement(Tr,{style:{width:200},placeholder:"\u641c\u7d22\u516c\u4f17\u53f7",value:t,onChange:r,onSearch:c}),g.a.createElement("div",{className:"fr"},g.a.createElement(po,{size:"default",className:"fr",mb:20,buttonContent:g.a.createElement(E.b,{to:"./create"},"+ \u65b0\u5efa\u6a21\u677f\u6d88\u606f")})),g.a.createElement(Io.a,{rowKey:function(e){return e._id},size:"middle",dataSource:a,columns:i}))}},{key:"componentDidMount",value:function(){this.props.getTemplateList()}}]),t}(m.Component),Ar=Object(k.b)(function(e){return{templateMessageList:e.message.template.templateMessageList,confName:e.message.template.confName}},function(e){return{getTemplateList:function(){e(l.getTemplateList())},deleteTemplate:function(t,a){e(l.deleteTemplate(t,a))},sendTemplate:function(t,a){e(l.sendTemplate(t,a))},changeConfNickName:function(t){e(l.changeConfNickName(t.target.value))},searchConfName:function(t){e(l.searchConfName(t))}}})(Gr),Pr=function(e){var t=e.selectGonghaoModal,a=e.allCodes,n=e.code,o=e.confirmSelect,r=e.closeSelectModal;return g.a.createElement(D.a,{width:1e3,visible:t,maskClosable:!1,closable:!1,mask:!1,footer:g.a.createElement(mo.a,{type:"primary",disabled:!n,onClick:r},"\u786e\u5b9a")},g.a.createElement(uo.a.Group,{value:n,style:{width:"100%"},onChange:function(e){return o(e.target.value,n)}},g.a.createElement(zo.a,null,a.map(function(e){return g.a.createElement(Uo.a,{span:4,key:e._id},g.a.createElement(uo.a,{value:e.code},e.nick_name))}))))},Dr=(a(950),io.a.Option),Fr=["#000","#CF021B","#F5A623","#3BA6FF","#BD10E0","#999"],Vr={width:20,height:20,marginLeft:10,display:"inline-block",marginTop:5},Rr=function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){var e=Object(x.a)(S.a.mark(function e(){var t;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.getAllCodes(),t=this.props.location.query,e.t0=t,!e.t0){e.next=6;break}return e.next=6,this.props.initMessageInfo(t);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this.props,a=t.openSelectModal,n=t.messageInfo,o=t.changeMessageInfo,r=t.selectGonghaoModal,c=t.allCodes,i=t.openEditModal,l=t.templateList,s=t.templateInfo,u=t.templateModalVisible,m=t.changeTemplate,d=t.history,p=t.submitMessage,f=t.confirmSelect,h=t.closeSelectModal,y=t.openPreviewModal,v=t.closePreviewModal,b=t.openid,k=t.changeOpenId,E=t.previewModal,I=t.preview,M=this.props,C=M.content,_=M.closeTemplateModal,w=M.saveTemplateModal,L=M.editTemplate,S=g.a.createElement("div",{style:{overflow:"hidden",lineHeight:1.5}},g.a.createElement("div",{className:"fl"},Fr.map(function(e){return g.a.createElement("span",{className:"cursor",style:Object(O.a)({},Vr,{background:e}),key:e,onClick:function(){return L("color",e)}})})),g.a.createElement(mo.a,{type:"primary",className:"fr",onClick:w},"\u4fdd\u5b58")),x=[],N=function(e){var t=n.content[e];"first"===e?x.unshift(g.a.createElement(zn.a.Item,{label:s.data.first.pre||"",key:"first"},g.a.createElement("span",{className:"mr5"},t.value),g.a.createElement(Gn.a,{className:"cursor",onClick:function(){return i(e,t)},type:"edit"}))):x.push(g.a.createElement(zn.a.Item,{label:s.data[e].pre||"",key:e},g.a.createElement("span",{className:"mr5"},t.value),g.a.createElement(Gn.a,{className:"cursor",onClick:function(){return i(e,t)},type:"edit"})))};for(var j in s.data)N(j);return r&&(e=g.a.createElement(Pr,{code:n.code,confirmSelect:f,closeSelectModal:h,allCodes:c,selectGonghaoModal:r})),g.a.createElement(nr.a,{locale:cr.a},g.a.createElement("div",{className:"container edit-message"},g.a.createElement(zn.a,Object.assign({className:"kefu-form"},{labelCol:{sm:{span:4}},wrapperCol:{sm:{span:20,offset:0}}},{style:{width:520}}),g.a.createElement(zn.a.Item,{label:"\u9009\u62e9\u516c\u53f7"},g.a.createElement(Rn.a,{onClick:a,className:"cursor",shape:"square",icon:"user"})),g.a.createElement(zn.a.Item,{label:"\u6d88\u606f\u540d\u79f0"},g.a.createElement(Tn.a,{value:n.name,onChange:function(e){return o("name",e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u6d88\u606f\u540d\u79f0,(\u4ec5\u4f9b\u5907\u6ce8\uff0c\u4e0d\u4f1a\u53d1\u9001\u7ed9\u7c89\u4e1d)"})),g.a.createElement(jo.a,{style:{width:"175%",marginLeft:-50}}),g.a.createElement("h2",{className:"block-title"},"\u8bbe\u7f6e\u6a21\u677f\u6d88\u606f"),g.a.createElement(zn.a.Item,{label:"\u9009\u62e9\u6a21\u677f"},g.a.createElement(io.a,{value:n.templateId,onChange:m},l.map(function(e){return g.a.createElement(Dr,{value:e.template_id,key:e.template_id},e.title)}))),g.a.createElement(zo.a,{className:"template-wrapper"},g.a.createElement(Uo.a,{span:4}),g.a.createElement(Uo.a,{span:20},g.a.createElement("div",{className:"message-block"},x))),g.a.createElement(zn.a.Item,{label:"\u70b9\u51fb\u8df3\u8f6c"},g.a.createElement(Tn.a,{value:n.url,placeholder:"\u8f93\u5165\u8df3\u8f6c\u94fe\u63a5\uff0c\u4e14\u5fc5\u987b\u4ee5http://\u6216https://\u5f00\u5934",onChange:function(e){return o("url",e.target.value)}})),g.a.createElement(jo.a,{style:{width:"175%",marginLeft:-50}}),g.a.createElement("h2",{className:"block-title"},"\u9009\u62e9\u7fa4\u53d1\u5bf9\u8c61"),g.a.createElement(zn.a.Item,{label:"\u7fa4\u53d1\u7c89\u4e1d"},g.a.createElement(uo.a.Group,{value:n.sex,onChange:function(e){return o("sex",e.target.value)}},g.a.createElement(uo.a,{value:"all"},"\u5168\u90e8\u7c89\u4e1d"),g.a.createElement(uo.a,{value:"0"},"\u672a\u77e5\u7c89\u4e1d"),g.a.createElement(uo.a,{value:"1"},"\u7537\u7c89\u4e1d"),g.a.createElement(uo.a,{value:"2"},"\u5973\u7c89\u4e1d"))),g.a.createElement(jo.a,{style:{width:"175%",marginLeft:-50}}),g.a.createElement("h2",{className:"block-title"},"\u8bbe\u7f6e\u53d1\u9001\u65b9\u5f0f"),g.a.createElement(zn.a.Item,{label:"\u5b9a\u65f6\u53d1\u9001"},g.a.createElement(xo.a,{checked:n.is_timing,onChange:function(e){return o("is_timing",e)}})),n.is_timing&&g.a.createElement(zn.a.Item,{label:"\u53d1\u9001\u65f6\u95f4"},g.a.createElement(Zo.a,{showTime:!0,placeholder:"\u9009\u62e9\u65f6\u95f4",value:$o()(n.timing_time),onChange:function(e,t){return o("timing_time",t)}})),g.a.createElement(jo.a,{style:{width:"175%",marginLeft:-50}}),g.a.createElement(zn.a.Item,null,g.a.createElement(mo.a,{size:"large",type:"primary",onClick:function(){return p(n,d,l)}},"\u786e\u5b9a",n._id?"\u5e76\u4fdd\u5b58\u6d88\u606f":"\u5e76\u521b\u5efa\u6d88\u606f"),n._id&&g.a.createElement(mo.a,{style:{marginLeft:20},type:"info",size:"large",onClick:function(){return d.goBack()}},"\u53d6\u6d88\u7f16\u8f91"),g.a.createElement(mo.a,{size:"large",style:{marginLeft:20,background:"yellowgreen",borderColor:"yellowgreen"},type:"primary",onClick:y},"\u53d1\u9001\u9884\u89c8"))),e,g.a.createElement(D.a,{visible:u,onCancel:_,closable:!1,footer:S,mask:!1},g.a.createElement(Tn.a.TextArea,{style:{color:C.color},value:C.value,autoSize:{minRows:3,maxRows:6},onChange:function(e){return L("value",e.target.value)}})),g.a.createElement(D.a,{title:"\u53d1\u9001\u9884\u89c8",visible:E,onCancel:v,onOk:function(){return I(n,b)}},g.a.createElement(Tn.a,{onChange:k,value:b,placeholder:"\u8bf7\u8f93\u5165\u9884\u89c8\u7528\u6237\u7684openid"}),g.a.createElement("span",{className:"tips"},"Tips: \u5728\u9884\u89c8\u516c\u53f7\u56de\u590d",g.a.createElement("span",null," openid "),",\u5c06\u8fd4\u56de\u7684\u5185\u5bb9\u590d\u5236\u5230\u8f93\u5165\u6846\u4e2d",g.a.createElement("br",null),"\u4e00\u4e2aopenid\u53ea\u5bf9\u5e94\u4e00\u4e2a\u516c\u53f7"))))}},{key:"componentWillUnmount",value:function(){this.props.resetState()}}]),t}(m.Component),Ur=Object(k.b)(function(e){return{messageInfo:e.message.template.messageInfo,templateList:e.message.template.templateList,templateInfo:e.message.template.templateInfo,templateModalVisible:e.message.template.templateModalVisible,selectGonghaoModal:e.message.template.selectGonghaoModal,allCodes:e.message.template.allCodes,previewModal:e.message.template.previewModal,openid:e.message.template.openid,content:e.message.template.content}},function(e){return{getAllCodes:function(){e(l.getAllCodes())},openEditModal:function(t,a){!a.color&&(a.color="#000"),e(l.openEditModal(t,a))},changeTemplate:function(t){e(l.changeTemplate(t))},submitMessage:function(t,a,n){e(l.submitMessage(t,a,n))},openSelectModal:function(){e(l.openSelectModal())},changeMessageInfo:function(t,a){e(l.changeMessageInfo(t,a))},initMessageInfo:function(t){e(l.initMessageInfo(t))},confirmSelect:function(t){e(l.confirmSelect(t))},resetState:function(){e(l.resetState())},closeSelectModal:function(){e(l.closeSelectModal())},changeOpenId:function(t){e(l.changeOpenId(t.target.value))},openPreviewModal:function(){e(l.openPreviewModal())},closePreviewModal:function(){e(l.closePreviewModal())},preview:function(t,a){e(l.preview(t,a))},closeTemplateModal:function(){e(l.closeTemplateModal())},saveTemplateModal:function(){e(l.saveTemplateModal())},editTemplate:function(t,a){e(l.editTemplate(t,a))}}})(Rr),zr=function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.getRandomMessageList()}},{key:"render",value:function(){var e=this.props,t=e.randomMessageList,a=e.deleteRandomMessage,n=[{key:"message_id",title:"\u6d88\u606fID",dataIndex:"message_id",align:"center"},{key:"remarks",title:"\u6d88\u606f\u540d\u79f0",dataIndex:"remarks",align:"center"},{key:"message_array",title:"\u968f\u673a\u6d88\u606f\u6570",dataIndex:"message_array",align:"center",render:function(e){return e.length}},{title:"Action",align:"center",render:function(e,t,n){return g.a.createElement("div",null,g.a.createElement(po,{buttonContent:g.a.createElement(E.b,{to:{pathname:"./update",query:Object(O.a)({},t)}},"\u4fee\u6539")}),g.a.createElement(po,{background:"danger",onClick:function(){return a(t._id)},buttonContent:"\u5220\u9664"}))}}];return g.a.createElement("div",null,g.a.createElement("div",{className:"container"},g.a.createElement(po,{size:"default",mb:20,buttonContent:g.a.createElement(E.b,{to:"./create"},"\u65b0\u5efa\u5ba2\u670d\u6d88\u606f")}),g.a.createElement(Io.a,{size:"middle",rowKey:function(e){return e._id},columns:n,dataSource:t})))}}]),t}(m.Component),Kr=Object(k.b)(function(e){return{randomMessageList:e.message.randomMsg.randomMessageList}},function(e){return{getRandomMessageList:function(){e(s.getRandomMessageList())},deleteRandomMessage:function(t){e(s.deleteRandomMessage(t))}}})(zr),Br=(a(951),function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location.query,a=e.initRandomMsgInfo;t&&a(t)}},{key:"render",value:function(){var e,t,a=this.props,n=a.randomMessageInfo,o=a.message_info,r=a.content,c=a.currentIndex,i=a.changeContentValue,l=a.changeMessageValue,s=a.changeMessageType,u=a.uploadImg,m=a.addMessage,d=a.submitMessage,p=a.updateMessageItem,f=a.deleteMessageItem,h=a.saveMessage,y=a.cancelAction,v=a.history;e=r.picurl?g.a.createElement("img",{style:{width:"100px"},src:r.picurl,alt:""}):g.a.createElement(mo.a,null,g.a.createElement(Gn.a,{type:"upload"})," \u4e0a\u4f20\u56fe\u7247 "),1===o.type?t=g.a.createElement(zn.a.Item,{label:"\u6587\u672c\u6d88\u606f",className:"text-message"},g.a.createElement(Tn.a.TextArea,{autoSize:{minRows:6},value:r.description,placeholder:"\u8bf7\u8f93\u5165\u6587\u672c\u6d88\u606f",onChange:function(e){return i(e.target.value,"description")}})):0===o.type&&(t=g.a.createElement("div",null,g.a.createElement(zn.a.Item,{label:"\u56fe\u7247\u5c01\u9762"},g.a.createElement(No.a,{name:"imageFile",action:"/reply/upload",onChange:u,showUploadList:!1},e)),g.a.createElement(zn.a.Item,{label:"\u56fe\u6587\u6807\u9898"},g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165\u56fe\u6587\u6807\u9898",value:r.title,onChange:function(e){return i(e.target.value,"title")}})),g.a.createElement(zn.a.Item,{label:"\u56fe\u6587\u63cf\u8ff0",className:"text-message"},g.a.createElement(Tn.a.TextArea,{autoSize:{minRows:6},value:r.description,placeholder:"\u8bf7\u8f93\u5165\u56fe\u6587\u63cf\u8ff0",onChange:function(e){return i(e.target.value,"description")}})),g.a.createElement(zn.a.Item,{label:"\u8df3\u8f6c\u94fe\u63a5"},g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165\u8df3\u8f6c\u94fe\u63a5",value:r.url,onChange:function(e){return i(e.target.value,"url")}}))));return g.a.createElement("div",{className:"container"},g.a.createElement("div",{className:"edit-random-message"},g.a.createElement("div",{className:"kefu-form fl"},g.a.createElement(zn.a,{labelCol:{sm:{span:4}},wrapperCol:{sm:{span:20,offset:0}}},g.a.createElement(zn.a.Item,{label:"\u6d88\u606f\u540d\u79f0"},g.a.createElement(Tn.a,{value:n.remarks,placeholder:"\u81ea\u884c\u586b\u5199\uff0c\u4fbf\u4e8e\u533a\u5206\u5bf9\u5e94",onChange:function(e){return l(e.target.value,"remarks")}})),g.a.createElement(zn.a.Item,{label:"\u6d88\u606fID"},g.a.createElement(Tn.a,{value:n.message_id,placeholder:"\u8bf7\u5728\u5ba2\u670d\u6d88\u606f\u5217\u8868\u590d\u5236\u6d88\u606fID",onChange:function(e){return l(e.target.value,"message_id")}})),g.a.createElement(zn.a.Item,null,g.a.createElement(uo.a.Group,{buttonStyle:"solid",value:o.type,onChange:s},g.a.createElement(uo.a.Button,{value:0},"\u56fe\u6587\u6d88\u606f"),g.a.createElement(uo.a.Button,{value:1},"\u6587\u672c\u6d88\u606f"))),t,c>-1?g.a.createElement(mo.a,{onClick:h},"\u4fdd\u5b58\u4fee\u6539"):g.a.createElement(mo.a,{onClick:m},"\u6dfb\u52a0\u4e00\u6761"),g.a.createElement(jo.a,null),g.a.createElement(zn.a.Item,{className:"btn-wrapper"},g.a.createElement(mo.a,{type:"primary",onClick:function(){return d(n,v)}},"\u786e\u5b9a"),g.a.createElement(mo.a,{style:{marginLeft:20},type:"info",onClick:function(){return y(v)}},"\u53d6\u6d88")))),!!n.message_array.length&&g.a.createElement("ul",{className:"fr message-wrapper"},n.message_array.map(function(e,t){return g.a.createElement("li",{key:t,className:"cursor"},g.a.createElement("div",{className:"head-other"},g.a.createElement("img",{src:e.contents[0].picurl,alt:""}),g.a.createElement("h3",{className:"title textEllipsis"},e.contents[0].title),g.a.createElement("p",{className:"ellipse-two"},e.contents[0].description)),g.a.createElement("div",{className:"mask"},g.a.createElement(mo.a,{onClick:function(){return p(e,t)},type:"link"},"\u7f16\u8f91"),g.a.createElement(mo.a,{onClick:function(){return f(t)},type:"link"},"\u5220\u9664")))}))))}},{key:"componentWillUnmount",value:function(){this.props.resetState()}}]),t}(m.Component)),Jr=Object(k.b)(function(e){return{content:e.message.randomMsg.content,message_info:e.message.randomMsg.message_info,randomMessageInfo:e.message.randomMsg.randomMessageInfo,currentIndex:e.message.randomMsg.currentIndex}},function(e){return{changeMessageValue:function(t,a){e(s.changeMessageValue(t,a))},changeMessageType:function(t){e(s.changeMessageType(t.target.value))},changeContentValue:function(t,a){e(s.changeContentValue(t,a))},uploadImg:function(t){if("done"===t.file.status){var a="http://t.dmmup.com/uploads/".concat(t.file.response.filename);e(s.changeContentValue(a,"picurl")),e(s.changeContentValue(a,"local_picurl"))}},addMessage:function(){e(s.addMessage())},updateMessageItem:function(t,a){e(s.updateMessageItem(t,a))},deleteMessageItem:function(t){e(s.deleteMessageItem(t))},saveMessage:function(){e(s.saveMessage())},submitMessage:function(t,a){e(s.submitMessage(t,a))},cancelAction:function(t){e(s.cancelAction(t))},resetState:function(){e(s.resetState())},initRandomMsgInfo:function(t){e(s.initRandomMsgInfo(t))}}})(Br),Hr=function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return g.a.createElement("div",null,g.a.createElement(I.b,{path:"/admin/message"},g.a.createElement(I.d,null,g.a.createElement(I.b,{path:"/admin/message/group/index",component:Or}),g.a.createElement(I.b,{path:"/admin/message/group/material",component:sr}),g.a.createElement(I.b,{path:"/admin/message/group/history",component:br}),g.a.createElement(I.b,{path:"/admin/message/kefu/index",component:Lr}),g.a.createElement(I.b,{path:"/admin/message/kefu/create",component:jr}),g.a.createElement(I.b,{path:"/admin/message/kefu/update",component:jr}),g.a.createElement(I.b,{path:"/admin/message/randomKefu/index",component:Kr}),g.a.createElement(I.b,{path:"/admin/message/randomKefu/create",component:Jr}),g.a.createElement(I.b,{path:"/admin/message/randomKefu/update",component:Jr}),g.a.createElement(I.b,{path:"/admin/message/template/index",component:Ar}),g.a.createElement(I.b,{path:"/admin/message/template/create",component:Ur}),g.a.createElement(I.b,{path:"/admin/message/template/update",component:Ur}),g.a.createElement(I.a,{from:"/admin/message",exact:!0,to:"/admin/message/group"}),g.a.createElement(I.a,{from:"/admin/message/group",exact:!0,to:"/admin/message/group/index"}),g.a.createElement(I.a,{from:"/admin/message/kefu",exact:!0,to:"/admin/message/kefu/index"}),g.a.createElement(I.a,{from:"/admin/message/template",exact:!0,to:"/admin/message/template/index"}))))}}]),t}(m.Component),qr=tr.a.TabPane,Yr=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(v.a)(t).call(this,e))).state={spreadData:[],domain_names:[],tagList:[],dataList:[]},a.changeTab=a.changeTab.bind(Object(jn.a)(a)),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.spreadData,n=t.tagList.map(function(e){return g.a.createElement(qr,{tab:e.name,key:e.name})}),o=[{key:"links",title:"\u94fe\u63a5",align:"center",width:280,render:function(e,t){return g.a.createElement("p",{style:{width:280,wordWrap:"break-word",userSelect:"all"}},"http://doumobone.top/cmst/"+t.id)}},{key:"group",dataIndex:"group",title:"\u5206\u7ec4",align:"center",width:120},{key:"title",dataIndex:"title",title:"\u6807\u9898",align:"center"},{key:"remarks",dataIndex:"remarks",title:"\u5907\u6ce8",align:"center",width:100,render:function(e){return e||"\u65e0"}},{title:"\u6570\u636e",align:"center",width:80,render:function(e,t){return g.a.createElement("a",{href:"http://doumobone.top/transfer/"+t.id,target:"_blank"},"\u67e5\u770b\u6570\u636e")}},{title:"\u7f6e\u9876",align:"center",width:80,render:function(t,a){return g.a.createElement(po,{background:"warning",onClick:function(){return e.goTop(a._id)},buttonContent:"\u7f6e\u9876"})}},{title:"Action",align:"center",width:200,render:function(t,a,n){return g.a.createElement("div",null,g.a.createElement(po,{buttonContent:g.a.createElement(E.b,{to:{pathname:"./update",query:Object(O.a)({},a)}},"\u4fee\u6539")}),g.a.createElement(po,{background:"danger",buttonContent:"\u5220\u9664",onClick:function(){return e.deleteLink(a._id,n)}}),g.a.createElement(po,{background:"success",mr:0,buttonContent:"\u590d\u5236",onClick:function(){return e.copyLink(Object(O.a)({},a))}}))}}];return g.a.createElement("div",null,g.a.createElement("div",{className:"container"},g.a.createElement(po,{size:"default",background:"success",mb:20,buttonContent:g.a.createElement(E.b,{to:"./create"},"\u6dfb\u52a0\u65b0\u94fe\u63a5")}),g.a.createElement(tr.a,{animated:!1,defaultActiveKey:"ALL",tabBarGutter:0,onChange:this.changeTab,size:"small"},g.a.createElement(qr,{tab:"ALL",key:"ALL"}),n),g.a.createElement(Io.a,{rowKey:function(e){return e._id},size:"small",bordered:!0,columns:o,dataSource:a})))}},{key:"componentDidMount",value:function(){this.getSpreadList(),this.getTagList()}},{key:"getSpreadList",value:function(){var e=this;A.get("/transfer").then(function(t){var a=t.data.messages,n=t.data.domain_names;e.setState({spreadData:a,dataList:a,domain_names:n})})}},{key:"getTagList",value:function(){var e=this;A.get("/tuiguangTag").then(function(t){var a=t.data.data;e.setState({tagList:a})})}},{key:"changeTab",value:function(e){var t=this.state.dataList;if("ALL"===e)this.setState({spreadData:t});else{for(var a=[],n=0;n<t.length;n++)e===t[n].group&&a.push(t[n]);this.setState({spreadData:[].concat(a)})}}},{key:"goTop",value:function(e){var t=this;D.a.confirm({title:"\u786e\u5b9a\u7f6e\u9876\u8fd9\u6761\u94fe\u63a5\u5417\uff1f",onOk:function(){A.post("/transfer/goTop",{id:e}).then(function(e){P.a.info(e.data.success),t.getSpreadList()})}})}},{key:"deleteLink",value:function(e,t){var a=this,n=this.state.spreadData;D.a.confirm({title:"\u786e\u8ba4\u5220\u9664\u8fd9\u6761\u5185\u5bb9\u5417\uff1f:",onOk:function(){A.get("/transfer/delete",{params:{id:e}}).then(function(e){P.a.info(e.data.success),n.splice(t,1),a.setState({spreadData:n})})}})}},{key:"copyLink",value:function(e){var t=this;e.id+="_copy";var a=this.state.spreadData;D.a.confirm({title:"\u786e\u5b9a\u590d\u5236\u4e00\u6761\u63a8\u5e7f\u94fe\u63a5\u5417\uff1f",onOk:function(){A.post("/transfer/create",Object(O.a)({},e)).then(function(e){e.data.success?(P.a.info("\u590d\u5236\u6210\u529f"),a.unshift(e.data.data),t.setState({spreadData:a})):P.a.info(e.data.err)})}})}}]),t}(m.Component),Wr={spreadLinkInfo:{id:"",title:"",links:[],weights:[],back_urls:[],link:"",back_url:"",weight:"",type:!1,status:!1,granularity:1,group:"",remarks:""},tagList:[],index:-1},Zr=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(v.a)(t).call(this,e))).state=Object(O.a)({},Wr),a.addTag=a.addTag.bind(Object(jn.a)(a)),a.cancelSelectTag=a.cancelSelectTag.bind(Object(jn.a)(a)),a.cancelEdit=a.cancelEdit.bind(Object(jn.a)(a)),a.submitSpreadLink=a.submitSpreadLink.bind(Object(jn.a)(a)),a.cancelUpdate=a.cancelUpdate.bind(Object(jn.a)(a)),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.history.location.query;e&&this.initData(e),this.getTagList()}},{key:"render",value:function(){var e,t,a,n,o,r=this,c=this.state,i=c.spreadLinkInfo,l=c.tagList,s=c.index,u=i.title,d=i.links,p=i.weights,f=i.back_urls,h=i.link,y=i.back_url,v=i.weight,b=i.type,k=i.status,E=i.granularity,I=i.group,M=i.remarks;return d.length>0&&(t=g.a.createElement(zn.a.Item,{label:"\u94fe\u63a5\u7ec4"},g.a.createElement(lo.a,{size:"small",bordered:!0,dataSource:d,renderItem:function(e,t){return g.a.createElement(lo.a.Item,{actions:[g.a.createElement("span",{className:"cursor",style:{color:"#f00"},onClick:function(){return r.delLink(t,"links")}},"del")]},e)}}))),f.length>0&&(a=g.a.createElement(zn.a.Item,{label:"\u8fd4\u56de\u94fe\u63a5\u7ec4"},g.a.createElement(lo.a,{size:"small",bordered:!0,dataSource:f,renderItem:function(e,t){return g.a.createElement(lo.a.Item,{actions:[g.a.createElement("span",{className:"cursor",style:{color:"#f00"},onClick:function(){return r.delLink(t,"back_urls")}},"del")]},e)}}))),p.length>0&&(n=g.a.createElement(zn.a.Item,{label:"\u6743\u91cd\u7ec4"},g.a.createElement(lo.a,{size:"small",bordered:!0,dataSource:p,renderItem:function(e,t){var a;return a=s===t?[g.a.createElement("span",{className:"cursor",style:{color:"#f00"},onClick:r.cancelUpdate},"\u53d6\u6d88")]:[g.a.createElement("span",{className:"cursor",style:{color:"#f00"},onClick:function(e){return r.delLink(t,"weights",e)}},"\u5220\u9664")],g.a.createElement(lo.a.Item,{onClick:function(){return r.updateWeight(t)},actions:a},s===t?g.a.createElement(Tn.a.Search,{size:"small",enterButton:"\u4fdd\u5b58",onSearch:function(e,t){return r.saveUpdate(e,t)}}):e)}}))),b&&(e=g.a.createElement(m.Fragment,null,g.a.createElement(zn.a.Item,{label:"\u6743\u91cd"},g.a.createElement(Tn.a.Search,{value:v,enterButton:"\u6dfb\u52a0",placeholder:"\u8bf7\u8f93\u5165\u6743\u91cd",onChange:function(e){return r.changeInputValue(e.target.value,"weight")},onSearch:function(e){return r.addLink(e,"weights","weight")}})),n,g.a.createElement(zn.a.Item,{label:"\u6295\u653e\u72b6\u6001"},g.a.createElement(xo.a,{checked:k,onChange:function(e){return r.changeInputValue(e,"status")}})),g.a.createElement(zn.a.Item,{label:"\u65f6\u95f4\u9897\u7c92\u5ea6"},g.a.createElement(Sr.a,{min:1,value:E,placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",onChange:function(e){return r.changeInputValue(e,"granularity")}})))),o=I?g.a.createElement(so.a,{closable:!0,onClose:this.cancelSelectTag},I):g.a.createElement(Tn.a.Search,{enterButton:"\u786e\u5b9a",placeholder:"\u8bf7\u8f93\u5165\u6807\u7b7e",onSearch:this.addTag}),g.a.createElement("div",null,g.a.createElement("div",{className:"container"},g.a.createElement("div",{className:"title-wrapper"},g.a.createElement("h2",null,"\u7f16\u8f91\u63a8\u5e7f\u94fe\u63a5"),g.a.createElement("div",{className:"fr"},g.a.createElement(mo.a,{type:"primary",style:{marginRight:10},onClick:this.submitSpreadLink},"\u63d0\u4ea4"),g.a.createElement(mo.a,{onClick:this.cancelEdit},"\u53d6\u6d88"))),g.a.createElement(zn.a,{className:"fl",style:{width:"60%",borderRight:"1px solid #eee"},labelCol:{sm:3},wrapperCol:{sm:18,offset:0},colon:!1},g.a.createElement(zn.a.Item,{label:"\u6807\u9898"},g.a.createElement(Tn.a,{value:u,placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",onChange:function(e){return r.changeInputValue(e.target.value,"title")}})),g.a.createElement(zn.a.Item,{label:"\u94fe\u63a5"},g.a.createElement(Tn.a.Search,{value:h,enterButton:"\u6dfb\u52a0",placeholder:"\u8bf7\u8f93\u5165\u94fe\u63a5",onChange:function(e){return r.changeInputValue(e.target.value,"link")},onSearch:function(e){return r.addLink(e,"links","link")}})),t,g.a.createElement(zn.a.Item,{label:"\u8fd4\u56de\u94fe\u63a5"},g.a.createElement(Tn.a.Search,{value:y,enterButton:"\u6dfb\u52a0",placeholder:"\u8bf7\u8f93\u5165\u8fd4\u56de\u94fe\u63a5",onChange:function(e){return r.changeInputValue(e.target.value,"back_url")},onSearch:function(e){return r.addLink(e,"back_urls","back_url")}})),a,g.a.createElement(zn.a.Item,{label:"\u9009\u62e9\u6807\u7b7e"},o),g.a.createElement(zn.a.Item,{label:"\u6807\u7b7e\u9009\u9879"},l.map(function(e,t){return g.a.createElement(so.a,{className:"cursor",closable:!0,onClose:function(a){return r.deleteTag(a,e._id,t)},key:e._id,onClick:function(){return r.selectTag(e.name)}},e.name)}))),g.a.createElement(zn.a,{className:"fl",style:{width:"36%",paddingLeft:"4%"},labelCol:{sm:7},wrapperCol:{sm:17,offset:0},colon:!1},g.a.createElement(zn.a.Item,{label:"\u662f\u5426\u589e\u52a0\u6743\u91cd"},g.a.createElement(xo.a,{checked:b,onChange:function(e){return r.changeInputValue(e,"type")}})),e,g.a.createElement(zn.a.Item,{label:"\u94fe\u63a5\u5907\u6ce8"},g.a.createElement(Tn.a,{value:M,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8",onChange:function(e){return r.changeInputValue(e.target.value,"remarks")}})))))}},{key:"initData",value:function(e){e.type=1===e.type,e.status=1===e.status,this.setState(function(t){return{spreadLinkInfo:Object(O.a)({},t.spreadLinkInfo,{},e)}})}},{key:"changeInputValue",value:function(e,t){var a=this.state.spreadLinkInfo;a[t]=e,this.setState({spreadLinkInfo:a})}},{key:"addLink",value:function(e,t,a){var n=this.state.spreadLinkInfo;e.trim()?(n[t].push(e.trim()),n[a]="",this.setState(function(e){return{spreadLinkInfo:Object(O.a)({},e.spreadLinkInfo,{},n)}})):P.a.error("\u94fe\u63a5\u4e0d\u80fd\u4e3a\u7a7a")}},{key:"delLink",value:function(e,t,a){a&&a.stopPropagation();var n=this.state.spreadLinkInfo;n[t].splice(e,1),this.setState(function(e){return{spreadLinkInfo:Object(O.a)({},e.spreadLinkInfo,{},n)}})}},{key:"updateWeight",value:function(e){this.setState({index:e})}},{key:"saveUpdate",value:function(e,t){t.stopPropagation();var a=this.state,n=a.spreadLinkInfo,o=a.index;n.weights.splice(o,1,e),this.setState(function(e){return{spreadLinkInfo:Object(O.a)({},e.spreadLinkInfo,{},n),index:-1}})}},{key:"cancelUpdate",value:function(e){e.stopPropagation(),this.setState({index:-1})}},{key:"getTagList",value:function(){var e=this;A.get("/tuiguangTag").then(function(t){var a=t.data.data;e.setState({tagList:a})})}},{key:"addTag",value:function(e){var t=this,a=this.state.spreadLinkInfo;e.trim()?A.post("/tuiguangTag",{name:e.trim()}).then(function(n){if(0===n.data.exist){var o=n.data.data;t.setState(function(e){return{tagList:[].concat(Object(_.a)(e.tagList),[o])}})}a.group=e,t.setState(function(e){return{spreadLinkInfo:Object(O.a)({},e.spreadLinkInfo,{},a)}})}):P.a.error("\u6807\u7b7e\u540d\u4e0d\u80fd\u4e3a\u7a7a")}},{key:"selectTag",value:function(e){var t=this.state.spreadLinkInfo;t.group=e,this.setState(function(e){return{spreadLinkInfo:Object(O.a)({},e.spreadLinkInfo,{},t)}})}},{key:"cancelSelectTag",value:function(){var e=this.state.spreadLinkInfo;e.group="",this.setState(function(t){return{spreadLinkInfo:Object(O.a)({},t.spreadLinkInfo,{},e)}})}},{key:"deleteTag",value:function(e,t,a){var n=this;e.stopPropagation();var o=this.state.tagList;A.delete("/tuiguangTag",{params:{id:t}}).then(function(e){o.splice(a,1),n.setState({tagList:o})})}},{key:"submitSpreadLink",value:function(){var e=this,t=this.props.history.location.query,a=this.state.spreadLinkInfo;a.type=a.type?1:0,a.status=a.status?1:0;var n="/transfer/create";t&&(n="/transfer/update"),D.a.confirm({title:"\u786e\u5b9a\u63d0\u4ea4\u5417\uff1f",onOk:function(){A.post(n,Object(O.a)({},a)).then(function(t){t.data.success?(P.a.info(t.data.success),e.cancelEdit()):P.a.info(t.data.err)})}})}},{key:"cancelEdit",value:function(){this.props.history.goBack(),this.resetState()}},{key:"resetState",value:function(){this.setState(Object(O.a)({},Wr))}},{key:"componentWillUnmount",value:function(){this.resetState()}}]),t}(m.Component),Xr=(a(952),function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.getNovelLinkList()}},{key:"render",value:function(){var e=this,t=this.props,a=t.novelLinkList,n=t.count,o=t.changePage,r=t.deleteNovel,c=t.changeZIndexState,i=t.copyNovel,l=[{key:"id",dataIndex:"id",title:"id",align:"center",ellipsis:!0},{key:"type",dataIndex:"type",title:"\u7c7b\u578b",align:"center",width:85,render:function(e){return e?"\u5e73\u53f0\u6570\u636e":"\u5934\u6761\u6295\u653e"}},{key:"name",dataIndex:"name",title:"\u516c\u53f7",align:"center",width:85},{key:"domain_name",dataIndex:"domain_name",title:"\u57df\u540d",align:"center",ellipsis:!0},{key:"remarks",dataIndex:"remarks",title:"\u5907\u6ce8",align:"center",ellipsis:!0},{key:"zIndex",dataIndex:"zIndex",title:"\u7f6e\u9876\u72b6\u6001",align:"center",width:85,render:function(e,t){return g.a.createElement(xo.a,{checked:!!e,checkedChildren:"\u5df2\u7f6e\u9876",unCheckedChildren:"\u9ed8\u8ba4",onChange:function(e){return c(e,t._id)}})}},{title:"\u590d\u5236\u94fe\u63a5",align:"center",width:85,render:function(e,t){return g.a.createElement(Fo.a,{text:t.domain_name+"/tuiguang/"+(0===t.type?"toutiao/":"data/")+t.id,onCopy:function(){return P.a.success("\u590d\u5236\u6210\u529f")}},g.a.createElement(po,{background:"success",buttonContent:"\u590d\u5236\u94fe\u63a5"}))}},{title:"Action",align:"center",render:function(t,a,n){return g.a.createElement("div",null,g.a.createElement(po,{background:"update",buttonContent:g.a.createElement(E.b,{to:{pathname:"./update",query:a}},"\u4fee\u6539")}),g.a.createElement(po,{background:"danger",buttonContent:"\u5220\u9664",onClick:function(){return r(a.id,n)}}),g.a.createElement(po,{background:"success",mr:0,buttonContent:"\u590d\u5236\u4e00\u6761",onClick:function(){return i(a,e.props)}}))}}],s={pageSize:20,total:n,onChange:function(e){return o(e)}};return g.a.createElement("div",null,g.a.createElement("div",{className:"container"},g.a.createElement(po,{background:"success",mb:10,size:"default",buttonContent:g.a.createElement(E.b,{to:"./create"},"\u65b0\u5efa\u5c0f\u8bf4\u94fe\u63a5")}),g.a.createElement(Io.a,{tableLayout:"auto",bordered:!0,size:"small",rowKey:function(e){return e._id},columns:l,rowClassName:function(e){return 0!==e.zIndex?"selectedRow":""},dataSource:a,pagination:Object(O.a)({},s)})))}}]),t}(m.Component)),$r=Object(k.b)(function(e){return{novelLinkList:e.channel.links.novelLinkList,count:e.channel.links.count}},function(e){return{getNovelLinkList:function(){e(u.getNovelLinkList())},changePage:function(t){e(u.changePage(t))},deleteNovel:function(t,a){e(u.deleteNovel(t,a))},changeZIndexState:function(t,a){e(u.changeZIndexState(t,a))},copyNovel:function(t,a){e(u.submitNovel(t,a))}}})(Xr),Qr=a(444),ec=(a(956),io.a.Option,function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={deleteModalStyle:{position:"absolute",top:0,left:0,width:100,height:100,background:"rgba(0, 0, 0, .3)",color:"#fff",fontSize:20,display:"none",boxSizing:"border-box"}},a.enterImg=function(e){e.stopPropagation(),a.setState(function(e){return{deleteModalStyle:Object(O.a)({},e.deleteModalStyle,{display:"block"})}})},a.leaveImg=function(e){e.stopPropagation(),a.setState(function(e){return{deleteModalStyle:Object(O.a)({},e.deleteModalStyle,{display:"none"})}})},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.history.location.query;e&&this.props.initNovelInfo(e),e&&this.props.getContent(e._id)}},{key:"render",value:function(){var e,t,a,n=this,o=this.props,r=o.novelInfo,c=o.uploadImg,i=o.uploadChecked,l=o.handleInputChange,s=o.submitNovel,u=o.cancel,m=o.deleteFinalImg,d=this.state.deleteModalStyle;return e=r.picurl?g.a.createElement("img",{style:{width:"100px"},src:r.imgUrl,alt:""}):g.a.createElement(mo.a,null,g.a.createElement(Gn.a,{type:"upload"})," \u4e0a\u4f20\u56fe\u7247 "),t=r.finalImg?g.a.createElement("div",{style:{width:100,height:100,position:"relative"},onMouseOver:this.enterImg,onMouseLeave:this.leaveImg,onClick:m},g.a.createElement("img",{style:{width:100,height:100},src:r.finalImgUrl,alt:""}),g.a.createElement("div",{className:"cursor",style:d},g.a.createElement(Gn.a,{style:{margin:"40px 0 0 40px"},type:"delete"}))):g.a.createElement(No.a,{name:"imageFile",action:"/novelLinks/upload",onChange:function(e){return c(e,"finalImg")},showUploadList:!1,beforeUpload:i},g.a.createElement(mo.a,null,g.a.createElement(Gn.a,{type:"upload"})," \u4e0a\u4f20\u56fe\u7247 ")),a=r.gonghaoLogo?g.a.createElement("img",{style:{width:"100px"},src:r.gonghaoLogoUrl,alt:""}):g.a.createElement(mo.a,null,g.a.createElement(Gn.a,{type:"upload"})," \u4e0a\u4f20\u56fe\u7247 "),g.a.createElement("div",null,g.a.createElement("div",{className:"container"},g.a.createElement("div",{className:"title-wrapper"},g.a.createElement("h2",null,"\u7f16\u8f91\u5c0f\u8bf4\u5185\u5bb9"),g.a.createElement("div",{className:"fr"},g.a.createElement(mo.a,{onClick:function(){return u(n.props)}},"\u53d6\u6d88"),g.a.createElement(mo.a,{type:"primary",style:{marginLeft:10},onClick:function(){return s(r,n.props)}},"\u63d0\u4ea4"))),g.a.createElement(zn.a,Object.assign({className:"fl",style:{width:"30%",height:500,overflow:"auto"}},{labelCol:{sm:{span:8}},wrapperCol:{sm:{span:15,offset:0}}}),g.a.createElement(zn.a.Item,{label:"\u7c7b\u578b"},g.a.createElement(uo.a.Group,{value:r.type,onChange:function(e){return l(e.target.value,"type")}},g.a.createElement(uo.a,{value:0},"\u5934\u6761\u6295\u653e"),g.a.createElement(uo.a,{value:1},"\u5e73\u53f0\u6570\u636e"))),g.a.createElement(zn.a.Item,{label:"id"},g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165id",value:r.id,onChange:function(e){return l(e.target.value,"id")}})),g.a.createElement(zn.a.Item,{label:"\u57df\u540d"},g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165\u57df\u540d",value:r.domain_name,onChange:function(e){return l(e.target.value,"domain_name")}})),g.a.createElement(zn.a.Item,{label:"\u516c\u53f7id"},g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165id",value:r.gonghao_id,onChange:function(e){return l(e.target.value,"gonghao_id")}})),g.a.createElement(zn.a.Item,{label:"\u516c\u53f7\u540d\u79f0"},g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165\u516c\u53f7\u540d\u79f0",value:r.name,onChange:function(e){return l(e.target.value,"name")}})),g.a.createElement(zn.a.Item,{label:"\u516c\u53f8\u540d\u79f0"},g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8\u540d\u79f0",value:r.company,onChange:function(e){return l(e.target.value,"company")}})),g.a.createElement(zn.a.Item,{label:"\u5907\u6ce8"},g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8\u540d\u79f0",value:r.remarks,onChange:function(e){return l(e.target.value,"remarks")}})),g.a.createElement(zn.a.Item,{label:"\u7f51\u9875\u6807\u9898"},g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165\u9875\u9762\u6807\u9898",value:r.pageTitle,onChange:function(e){return l(e.target.value,"pageTitle")}})),g.a.createElement(zn.a.Item,{label:"\u968f\u673a\u540e\u7f00"},g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165\u968f\u673a\u540e\u7f00\uff0c\u4ee5\u82f1\u6587\u9017\u53f7\u9694\u5f00",value:r.suffix,onChange:function(e){return l(e.target.value,"suffix")}})),g.a.createElement(zn.a.Item,{label:"\u80cc\u666f\u989c\u8272"},g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165\u80cc\u666f\u989c\u8272",value:r.bgcolor,onChange:function(e){return l(e.target.value,"bgcolor")}})),g.a.createElement(zn.a.Item,{label:"\u9876\u90e8banner"},g.a.createElement(No.a,{name:"imageFile",action:"/novelLinks/upload",onChange:function(e){return c(e,"picurl")},showUploadList:!1,beforeUpload:i},e)),g.a.createElement(zn.a.Item,{label:"\u516c\u53f7logo"},g.a.createElement(No.a,{name:"imageFile",action:"/novelLinks/upload",onChange:function(e){return c(e,"gonghaoLogo")},showUploadList:!1,beforeUpload:i},a)),g.a.createElement(zn.a.Item,{label:"\u5e95\u90e8\u6559\u7a0b\u56fe\u7247"},t)),g.a.createElement("div",{className:"fr",style:{width:"68%"}},g.a.createElement(Qr.a,{apiKey:"yqk1vsq8qil9z824fv4fverb6jo24twdve8d2a8ntgmxlz09",initialValue:r.capter,value:r.capter,init:{menubar:!1,language:"zh_CN",language_url:"/langs/zh_CN.js",plugins:"print preview searchreplace autolink directionality visualblocks visualchars image link media template code codesample table charmap hr pagebreak nonbreaking anchor insertdatetime advlist lists wordcount imagetools textpattern help emoticons autosave ",toolbar:[{name:"history",items:["code","undo","redo"]},{name:"styles",items:["fontselect","styleselect","fontsizeselect","h1","h2","h3","h4","h5","h6"]},{name:"formatting",items:["forecolor","backcolor","bold","italic","underline","strikethrough"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"symbol",items:["link","anchor","blockquote"]},{name:"indentation",items:["outdent","indent"]},{name:"list",items:["bullist","numlist"]},{name:"more",items:["table","image","media","charmap","emoticons","hr","pagebreak","insertdatetime","print","preview"]}],min_height:500,fontsize_formats:"12px 14px 16px 18px 24px 36px 48px 56px 72px",font_formats:"\u5fae\u8f6f\u96c5\u9ed1=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;\u82f9\u679c\u82f9\u65b9=PingFang SC,Microsoft YaHei,sans-serif;\u5b8b\u4f53=simsun,serif;\u4eff\u5b8b\u4f53=FangSong,serif;\u9ed1\u4f53=SimHei,sans-serif;\u6977\u4f53=\u6977\u4f53;\u96b6\u4e66=\u96b6\u4e66;\u5e7c\u5706=\u5e7c\u5706;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Tahoma=tahoma,arial,helvetica,sans-serif;Times New Roman=times new roman,times;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats;",toolbar_drawer:"sliding"},onChange:function(e){return l(e.target.getContent(),"capter")}}))))}},{key:"componentWillUnmount",value:function(){this.props.resetState()}}]),t}(m.Component)),tc=Object(k.b)(function(e){return{novelInfo:e.channel.links.novelInfo}},function(e){return{uploadImg:function(t,a){if("done"===t.file.status){var n="/images/website/".concat(t.file.response.filename);e(hn(n,a))}},uploadChecked:function(t){return new Promise(function(a,n){t.size>=512e3&&(e(yn()),n(!1)),a(!0)})},handleInputChange:function(t,a){e(hn(t,a))},cancel:function(t){t.history.goBack(),e(kn())},submitNovel:function(t,a){e(fn(t,a))},initNovelInfo:function(t){e(vn(t))},getContent:function(t){e(bn(t))},resetState:function(){e(kn())},deleteFinalImg:function(){e(En())}}})(zn.a.create({name:"editNovelInfo"})(ec)),ac=io.a.Option,nc=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(v.a)(t).call(this,e))).state={platformList:[],emptyText:"",modalVisible:!1,platformInfo:{platform:1,gonghao_name:"",seruid:""},title:"\u6dfb\u52a0\u5e73\u53f0"},a.addPlatform=a.addPlatform.bind(Object(jn.a)(a)),a.changePlatformInfoInput=a.changePlatformInfoInput.bind(Object(jn.a)(a)),a.submitPlatform=a.submitPlatform.bind(Object(jn.a)(a)),a.cancelAction=a.cancelAction.bind(Object(jn.a)(a)),a.editPlatform=a.editPlatform.bind(Object(jn.a)(a)),a.deletePlatform=a.deletePlatform.bind(Object(jn.a)(a)),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"getPlatformList",value:function(){var e=this;j.a.get("/platform").then(function(t){var a=t.data,n=a.code,o=a.msg,r=a.data;1===n?e.setState({platformList:r}):e.setState({emptyText:o,platformList:[]})})}},{key:"addPlatform",value:function(){this.setState({modalVisible:!0})}},{key:"changePlatformInfoInput",value:function(e,t){var a=this.state.platformInfo;a[t]=e,this.setState({platformInfo:a})}},{key:"submitPlatform",value:function(){var e=this.state.platformInfo;e._id?this.updatePlatform(e):this.createPlatform(e)}},{key:"createPlatform",value:function(e){var t=this;D.a.confirm({title:"\u60a8\u786e\u8ba4\u521b\u5efa\u4e00\u6761\u65b0\u7684\u5185\u5bb9\u5417\uff1f",onOk:function(){j.a.post("/platform",Object(O.a)({},e)).then(function(e){var a=e.data,n=a.code,o=a.msg;1===n?(P.a.success(o),t.getPlatformList(),t.cancelAction()):P.a.error(o)})}})}},{key:"updatePlatform",value:function(e){var t=this;D.a.confirm({title:"\u60a8\u786e\u8ba4\u4fdd\u5b58\u8fd9\u6b21\u4fee\u6539\u5417\uff1f",onOk:function(){j.a.put("/platform",Object(O.a)({},e)).then(function(e){var a=e.data,n=a.code,o=a.msg;1===n?(P.a.success(o),t.getPlatformList(),t.cancelAction()):P.a.error(o)})}})}},{key:"cancelAction",value:function(){this.setState({modalVisible:!1,platformInfo:{platform:1,gonghao_name:"",seruid:""}})}},{key:"editPlatform",value:function(e){this.setState({platformInfo:e,modalVisible:!0})}},{key:"deletePlatform",value:function(e){var t=this;D.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u6761\u5185\u5bb9\u5417\uff1f",onOk:function(){j.a.delete("/platform",{params:{id:e}}).then(function(e){var a=e.data,n=a.code,o=a.msg;1===n?(P.a.success(o),t.getPlatformList()):P.a.error(o)})}})}},{key:"UNSAFE_componentWillMount",value:function(){this.getPlatformList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.platformList,n=t.emptyText,o=t.modalVisible,r=t.platformInfo,c=t.title,i=[{dataIndex:"platform",key:"platform",title:"\u5e73\u53f0\u540d\u79f0",align:"center",render:function(e){return 1===e?"\u9605\u6587":2===e?"\u817e\u6587":3===e?"\u6709\u4e66\u9601":"\u65e0"}},{dataIndex:"gonghao_name",key:"gonghao_name",title:"\u516c\u53f7\u540d\u79f0",align:"center"},{dataIndex:"seruid",key:"seruid",title:"\u516c\u53f7id",align:"center"},{title:"\u64cd\u4f5c",key:"action",align:"center",render:function(t,a,n){return g.a.createElement("div",null,g.a.createElement(po,{onClick:function(){return e.editPlatform(Object(O.a)({},a))},buttonContent:"\u7f16\u8f91"}),g.a.createElement(po,{onClick:function(){return e.deletePlatform(a._id)},background:"danger",buttonContent:"\u5220\u9664"}))}}];return g.a.createElement("div",null,g.a.createElement("div",{className:"container"},g.a.createElement(po,{mb:20,size:"default",onClick:this.addPlatform,background:"success",buttonContent:"\u6dfb\u52a0"}),g.a.createElement(Io.a,{rowKey:function(e){return e._id},columns:i,dataSource:a,locale:{emptyText:n},size:"small"})),g.a.createElement(D.a,{title:c,visible:o,onOk:this.submitPlatform,onCancel:this.cancelAction},g.a.createElement(zn.a,{labelCol:{span:6},wrapperCol:{span:14}},g.a.createElement(zn.a.Item,{label:"\u5e73\u53f0\u540d\u79f0"},g.a.createElement(io.a,{value:r.platform,onChange:function(t){return e.changePlatformInfoInput(t,"platform")}},g.a.createElement(ac,{value:1},"\u9605\u6587"),g.a.createElement(ac,{value:2},"\u817e\u6587"),g.a.createElement(ac,{value:3},"\u6709\u4e66\u9601"))),g.a.createElement(zn.a.Item,{label:"\u516c\u53f7\u540d\u79f0"},g.a.createElement(Tn.a,{value:r.gonghao_name,onChange:function(t){return e.changePlatformInfoInput(t.target.value,"gonghao_name")}})),g.a.createElement(zn.a.Item,{label:"\u516c\u53f7id"},g.a.createElement(Tn.a,{value:r.seruid,onChange:function(t){return e.changePlatformInfoInput(t.target.value,"seruid")}})))))}}]),t}(m.Component),oc=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(v.a)(t).call(this,e))).state={td_url:""},a.changeTdUrlInput=a.changeTdUrlInput.bind(Object(jn.a)(a)),a.submitInput=a.submitInput.bind(Object(jn.a)(a)),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"changeTdUrlInput",value:function(e){var t=e.target.value;this.setState({td_url:t})}},{key:"submitInput",value:function(){var e=this,t=this.state.td_url;t?A.post("/platform/liantiao",{td_url:t}).then(function(t){var a=t.data.msg;P.a.success(a),e.setState({td_url:""})}):P.a.error("\u94fe\u63a5\u4e0d\u80fd\u4e3a\u7a7a")}},{key:"render",value:function(){var e=this.state.td_url;return g.a.createElement("div",{className:"container"},g.a.createElement(zn.a,{labelCol:{span:2},wrapperCol:{span:14}},g.a.createElement(zn.a.Item,{label:"\u94fe\u63a5"},g.a.createElement(Tn.a.TextArea,{autoSize:{minRows:3},spellCheck:!1,value:e,onChange:this.changeTdUrlInput,allowClear:!0})),g.a.createElement(zn.a.Item,{label:" ",colon:!1},g.a.createElement(po,{size:"default",onClick:this.submitInput,background:"success",buttonContent:"\u63d0\u4ea4"}))))}}]),t}(m.Component),rc=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(v.a)(t).call(this,e))).state={zsyData:[],domain_name:"",linkModal:!1,linkInfo:{}},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"getLinks",value:function(){var e=this;A.get("/zsy").then(function(t){var a=t.data,n=a.code,o=a.data,r=a.domain_name;1===n?e.setState({zsyData:o,domain_name:r}):e.setState({zsyData:[],domain_name:r})})}},{key:"deleteLink",value:function(e){var t=this;D.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u6761\u5185\u5bb9\u5417\uff1f",onOk:function(){A.delete("/zsy",{params:{_id:e}}).then(function(e){var a=e.data,n=a.code,o=a.msg;1===n?(t.getLinks(),P.a.success(o)):P.a.error(o)})}})}},{key:"changeInputValue",value:function(e,t){var a=this.state.linkInfo;a[t]=e,this.setState({linkInfo:a})}},{key:"openUpdateModal",value:function(e){this.setState({linkInfo:e,linkModal:!0})}},{key:"cancelAction",value:function(){this.setState({linkInfo:{},linkModal:!1})}},{key:"submitLink",value:function(){var e=this.state.linkInfo;e._id?this.updateLink(e):this.createLink(e)}},{key:"createLink",value:function(e){var t=this;D.a.confirm({title:"\u786e\u5b9a\u65b0\u5efa\u4e00\u6761\u5185\u5bb9\uff1f",onOk:function(){A.post("/zsy",e).then(function(e){var a=e.data,n=a.code,o=a.msg;1===n?(t.cancelAction(),t.getLinks(),P.a.success(o)):P.a.error(o)})}})}},{key:"updateLink",value:function(e){var t=this;D.a.confirm({title:"\u786e\u5b9a\u4fee\u6539\u8fd9\u6761\u5185\u5bb9\uff1f",onOk:function(){A.put("/zsy",e).then(function(e){var a=e.data,n=a.code,o=a.msg;1===n?(t.cancelAction(),t.getLinks(),P.a.success(o)):P.a.error(o)})}})}},{key:"componentDidMount",value:function(){this.getLinks()}},{key:"render",value:function(){var e=this,t=this.state,a=t.zsyData,n=t.domain_name,o=t.linkModal,r=t.linkInfo,c=[{key:"gonghao_name",dataIndex:"gonghao_name",title:"\u516c\u53f7\u540d\u79f0",align:"center"},{key:"channel_id",dataIndex:"channel_id",title:"\u6e20\u9053id",align:"center"},{key:"tuiguang_link",dataIndex:"tuiguang_link",title:"\u63a8\u5e7f\u94fe\u63a5",align:"center"},{key:"_id",dataIndex:"_id",title:"\u590d\u5236\u94fe\u63a5",align:"center",render:function(e,t){return g.a.createElement(Fo.a,{text:n+"/zsyn/"+t._id,onCopy:function(){return P.a.success("\u590d\u5236\u6210\u529f")}},g.a.createElement(po,{background:"success",buttonContent:"\u590d\u5236\u94fe\u63a5"}))}},{title:"Action",align:"center",render:function(t,a,n){return g.a.createElement("div",null,g.a.createElement(po,{buttonContent:"\u4fee\u6539",onClick:function(){return e.openUpdateModal(Object(O.a)({},a))}}),g.a.createElement(po,{background:"danger",buttonContent:"\u5220\u9664",onClick:function(){return e.deleteLink(a._id)}}))}}];return g.a.createElement("div",null,g.a.createElement("div",{className:"container"},g.a.createElement(po,{size:"default",background:"success",mb:20,buttonContent:"\u6dfb\u52a0\u65b0\u94fe\u63a5",onClick:function(){return e.setState({linkModal:!0})}}),g.a.createElement(Io.a,{rowKey:function(e){return e._id},size:"small",bordered:!0,columns:c,dataSource:a}),g.a.createElement(D.a,{visible:o,title:"\u7f16\u8f91\u94fe\u63a5\u4fe1\u606f",onOk:function(){return e.submitLink()},onCancel:function(){return e.cancelAction()}},g.a.createElement(zn.a,null,g.a.createElement(zn.a.Item,{label:"\u516c\u53f7\u540d\u79f0"},g.a.createElement(Tn.a,{value:r.gonghao_name||"",onChange:function(t){return e.changeInputValue(t.target.value,"gonghao_name")}})),g.a.createElement(zn.a.Item,{label:"\u6e20\u9053id"},g.a.createElement(Tn.a,{value:r.channel_id||"",onChange:function(t){return e.changeInputValue(t.target.value,"channel_id")}})),g.a.createElement(zn.a.Item,{label:"\u63a8\u5e7f\u94fe\u63a5"},g.a.createElement(Tn.a,{value:r.tuiguang_link||"",onChange:function(t){return e.changeInputValue(t.target.value,"tuiguang_link")}}))))))}}]),t}(m.Component),cc=function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return g.a.createElement(I.b,{path:"/admin/channel",render:function(){return g.a.createElement(I.d,null,g.a.createElement(I.b,{path:"/admin/channel/novelLinks/index",component:$r}),g.a.createElement(I.b,{path:"/admin/channel/novelLinks/create",component:tc}),g.a.createElement(I.b,{path:"/admin/channel/novelLinks/update",component:tc}),g.a.createElement(I.b,{path:"/admin/channel/management",component:nc}),g.a.createElement(I.b,{path:"/admin/channel/jointDebugging",component:oc}),g.a.createElement(I.b,{path:"/admin/channel/zhuishuyun",component:rc}),g.a.createElement(I.b,{path:"/admin/channel/spread/index",component:Yr}),g.a.createElement(I.b,{path:"/admin/channel/spread/create",component:Zr}),g.a.createElement(I.b,{path:"/admin/channel/spread/update",component:Zr}),g.a.createElement(I.a,{from:"/admin/channel",exact:!0,to:"/admin/channel/novelLinks"}),g.a.createElement(I.a,{from:"/admin/channel/novelLinks",exact:!0,to:"/admin/channel/novelLinks/index"}))}})}}]),t}(m.Component),ic=Tn.a.Search,lc=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={accountList:[],searchValue:"",updateRemarksIndex:-1},a.searchAccount=function(){var e=a.state.searchValue;j.a.get("/account",{params:{username:e}}).then(function(e){if(1===e.data.code){var t=e.data,n=t.data,o=t.msg;a.setState({accountList:n,searchValue:""}),P.a.success(o)}else P.a.error(e.data.msg),a.getAccountList()})},a.getAccountList=function(){j.a.get("/account").then(function(e){if(1===e.data.code){var t=e.data.data.reverse();a.setState({accountList:t})}})},a.handleChangeSearchValue=function(e){a.setState({searchValue:e.target.value})},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"changePower",value:function(e,t){var a=this;t=t?1:0,j.a.put("/account/power",{power:t,id:e}).then(function(e){var t=e.data,n=t.code,o=t.msg;1===n?(P.a.success(o),a.getAccountList()):P.a.error(o)})}},{key:"saveUpdate",value:function(e,t){var a=this;D.a.confirm({title:"\u786e\u5b9a\u4fdd\u5b58\u4fee\u6539\u5417\uff1f",onOk:function(){j.a.put("/account/remarks",{id:e,remarks:t}).then(function(e){var t=e.data,n=t.code,o=t.msg;1===n?(P.a.success(o),a.setState({updateRemarksIndex:-1}),a.getAccountList()):P.a.error(o)})}})}},{key:"deleteAccount",value:function(e){var t=this;D.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u4e2a\u8d26\u6237\u5417\uff1f",onOk:function(){j.a.delete("/account",{params:{_id:e}}).then(function(e){1===e.data.code?(P.a.success(e.data.msg),t.getAccountList()):P.a.error(e.data.msg)})}})}},{key:"componentDidMount",value:function(){this.getAccountList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.accountList,n=t.searchValue,o=t.updateRemarksIndex,r=[{key:"username",dataIndex:"username",title:"\u8d26\u6237\u540d",align:"center"},{key:"remarks",dataIndex:"remarks",title:"\u516c\u53f8\u540d\u79f0/\u5907\u6ce8",align:"center",width:300,render:function(t,a,n){return o!==n?t:g.a.createElement(Tn.a.Search,{enterButton:"\u4fdd\u5b58",size:"small",onSearch:function(t){return e.saveUpdate(a._id,t)}})}},{key:"password",dataIndex:"password",title:"\u5bc6\u7801\uff08\u70b9\u51fb\u81ea\u52a8\u590d\u5236\uff0c\u6253\u5f00\u89e3\u5bc6\u7f51\u7ad9\uff09",align:"center",render:function(e){return g.a.createElement(Do.CopyToClipboard,{text:e,onCopy:function(){return P.a.success("\u590d\u5236\u6210\u529f")}},g.a.createElement("a",{href:"https://www.somd5.com/",target:"__blank"},e))}},{key:"role",dataIndex:"role",title:"\u6743\u9650",align:"center",render:function(e){return 0===e?"\u8d85\u7ea7\u7ba1\u7406\u5458":1===e?"\u4e00\u7ea7\u4ee3\u7406":"\u4e8c\u7ea7\u4ee3\u7406"}},{key:"power",dataIndex:"power",title:"\u662f\u5426\u5f00\u542f\u6d4b\u8bd5\u6743\u9650",align:"center",render:function(t,a){return g.a.createElement(xo.a,{checked:!!t,onChange:function(t){return e.changePower(a._id,t)}})}},{title:"Action",key:"action",align:"center",render:function(t,a,n){return g.a.createElement(g.a.Fragment,null,g.a.createElement(po,{buttonContent:"\u4fee\u6539\u5907\u6ce8",onClick:function(){return e.setState({updateRemarksIndex:n})}}),g.a.createElement(po,{mr:0,background:0===a.role?"info":"danger",disabled:0===a.role,buttonContent:"\u5220\u9664",onClick:function(){return e.deleteAccount(a._id)}}))}}];return g.a.createElement("div",null,g.a.createElement("div",{className:"container"},g.a.createElement(ic,{onChange:this.handleChangeSearchValue,value:n,style:{width:300,marginBottom:20},placeholder:"\u8bf7\u8f93\u5165\u8d26\u6237\u540d",enterButton:"\u67e5\u8be2",onSearch:this.searchAccount}),g.a.createElement(Io.a,{rowKey:function(e){return e._id},size:"small",dataSource:a,columns:r})))}}]),t}(m.Component),sc=io.a.Option,uc=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).addAccount=function(){(0,a.props.form.validateFields)(function(e,t){e?P.a.error("\u8bf7\u68c0\u67e5\u8f93\u5165\u662f\u5426\u6709\u8bef"):(t.password=a.$MD5(t.password).toString(),D.a.confirm({title:"\u786e\u5b9a\u521b\u5efa\u4e00\u4e2a\u65b0\u8d26\u6237\u5417\uff1f",onOk:function(){A.post("/account",Object(O.a)({},t)).then(function(e){1===e.data.code?(a.resetForm(),P.a.success(e.data.msg)):P.a.error(e.data.msg)})}}))})},a.resetForm=function(){(0,a.props.form.setFieldsValue)({username:"",password:"",role:2})},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return g.a.createElement("div",null,g.a.createElement("div",{className:"container"},g.a.createElement(zn.a,{labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:8}},colon:!1},g.a.createElement(zn.a.Item,{label:"\u7528\u6237\u540d"},e("username",{rules:[{required:!0,message:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"}]})(g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}))),g.a.createElement(zn.a.Item,{label:"\u5bc6\u7801"},e("password",{rules:[{required:!0,message:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"}]})(g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}))),g.a.createElement(zn.a.Item,{label:"\u5907\u6ce8"},e("remarks",{rules:[{required:!0,message:"\u5907\u6ce8\u4e0d\u80fd\u4e3a\u7a7a"}]})(g.a.createElement(Tn.a,{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))),g.a.createElement(zn.a.Item,{label:"\u7ba1\u7406\u5458\u6743\u9650"},e("role",{rules:[{required:!0}],initialValue:2})(g.a.createElement(io.a,null,g.a.createElement(sc,{value:0},"\u8d85\u7ea7\u7ba1\u7406\u5458"),g.a.createElement(sc,{value:1},"\u4e00\u7ea7\u4ee3\u7406"),g.a.createElement(sc,{value:2},"\u4e8c\u7ea7\u4ee3\u7406")))),g.a.createElement(zn.a.Item,{label:" "},g.a.createElement(po,{size:"default",buttonContent:"\u65b0\u589e",onClick:this.addAccount}),g.a.createElement(po,{ml:20,background:"info",size:"default",buttonContent:"\u6e05\u7a7a",onClick:this.resetForm})))))}}]),t}(m.Component),mc=zn.a.create()(uc),gc=function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return g.a.createElement(I.d,null,g.a.createElement(I.b,{path:"/admin/account/list",component:lc}),g.a.createElement(I.b,{path:"/admin/account/add",component:mc}),g.a.createElement(I.a,{from:"/admin/account",exact:!0,to:"/admin/account/list"}))}}]),t}(m.Component),dc=(a(957),Tn.a.Search),pc=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(v.a)(t).call(this,e))).state={url:"",newUrl:""},a.changeUrl=a.changeUrl.bind(Object(jn.a)(a)),a.jiexi=a.jiexi.bind(Object(jn.a)(a)),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"changeUrl",value:function(e){var t=e.target.value;this.setState({url:t})}},{key:"jiexi",value:function(e){var t=this;e?j()({method:"get",url:"/watermark/douyin",params:{url:e},timeout:5e4}).then(function(e){t.setState({newUrl:"/douyin/"+e.data})}):P.a.warning("\u94fe\u63a5\u4e0d\u80fd\u4e3a\u7a7a")}},{key:"render",value:function(){var e=this.state,t=e.url,a=e.newUrl;return g.a.createElement("div",{className:"container"},g.a.createElement("div",{className:"tik-tok"},g.a.createElement(dc,{value:t,placeholder:"\u8bf7\u8f93\u5165\u6296\u97f3\u77ed\u89c6\u9891\u7684\u94fe\u63a5",size:"large",enterButton:"\u89e3\u6790",onChange:this.changeUrl,onSearch:this.jiexi}),g.a.createElement("div",{className:"video-container",style:{display:a?"block":"none"}},g.a.createElement("video",{controlslist:"nodownload",controls:"controls",muted:!0,src:a,autoPlay:!0,height:"100%",width:"100%"}),g.a.createElement("a",{href:a,download:a,target:"__blank"},"\u4e0b\u8f7d"))))}}]),t}(m.Component),fc=function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return g.a.createElement(I.d,null,g.a.createElement(I.b,{path:"/admin/tools/tikTok",component:pc}),g.a.createElement(I.a,{from:"/admin/tools",exact:!0,to:"/admin/tools/tikTok"}))}}]),t}(m.Component),hc=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={userInfo:{}},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("userInfo");e&&Date.now()-+new Date(JSON.parse(e).loginAt)<864e5&&this.setState({userInfo:JSON.parse(e)})}},{key:"render",value:function(){var e=this.state.userInfo,t=Object.keys(e).length>0;return g.a.createElement(k.a,{store:Nn},g.a.createElement(E.a,null,g.a.createElement(I.d,null,g.a.createElement(I.b,{path:"/admin/login",render:function(){return t?g.a.createElement(I.a,{to:window.location.search?decodeURIComponent(window.location.search.split("=")[1]):"/admin"}):g.a.createElement(Pn,null)}}),g.a.createElement(I.b,{path:"/admin",render:function(){return t?g.a.createElement(co,{content:g.a.createElement(I.d,null,g.a.createElement(I.b,{path:"/admin/gonghao",component:er}),g.a.createElement(I.b,{path:"/admin/message",component:Hr}),g.a.createElement(I.b,{path:"/admin/channel",component:cc}),g.a.createElement(I.b,{path:"/admin/account",component:gc}),g.a.createElement(I.b,{path:"/admin/tools",component:fc}),g.a.createElement(I.a,{from:"/admin",exact:!0,to:2===e.role?"/admin/gonghao":"/admin/account"}))}):g.a.createElement(I.a,{to:"/admin/login?redirect="+encodeURIComponent(window.location.pathname)})}}),g.a.createElement(I.a,{from:"/",exact:!0,to:"/admin"}))))}}]),t}(m.Component),yc=a(440),vc=a.n(yc),bc=a(441);window.Promise||(window.Promise=bc.a),g.a.Component.prototype.$MD5=vc.a,p.a.render(g.a.createElement(hc,null),document.getElementById("root"))}},[[450,1,2]]]);