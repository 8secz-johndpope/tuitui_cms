(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{831:function(e,t,n){"use strict";var a=n(0),o=n(1),r=n(3),i=n.n(r),c=n(29),l=n(390),s=n(129),u=n(826),p=n(265),g=n(204);function d(e){if(!a.isValidElement(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return a.cloneElement.apply(a,[e].concat(n))}function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t){return!t||"object"!==f(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var E=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n};function S(e,t){return e[t]&&Math.floor(24/e[t])}var O=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=h(this,y(t).apply(this,arguments))).renderItem=function(t){var n,o,r,c=t.getPrefixCls,l=e.context,s=l.grid,u=l.itemLayout,p=e.props,f=p.prefixCls,m=p.children,h=p.actions,y=p.extra,v=p.className,O=E(p,["prefixCls","children","actions","extra","className"]),w=c("list",f),x=h&&h.length>0&&a.createElement("ul",{className:"".concat(w,"-item-action"),key:"actions"},h.map(function(e,t){return a.createElement("li",{key:"".concat(w,"-item-action-").concat(t)},e,t!==h.length-1&&a.createElement("em",{className:"".concat(w,"-item-action-split")}))})),G=s?"div":"li",C=a.createElement(G,b({},O,{className:i()("".concat(w,"-item"),v,(n={},o="".concat(w,"-item-no-flex"),r=!e.isFlexMode(),o in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,n))}),"vertical"===u&&y?[a.createElement("div",{className:"".concat(w,"-item-main"),key:"content"},m,x),a.createElement("div",{className:"".concat(w,"-item-extra"),key:"extra"},y)]:[m,x,d(y,{key:"extra"})]);return s?a.createElement(g.a,{span:S(s,"column"),xs:S(s,"xs"),sm:S(s,"sm"),md:S(s,"md"),lg:S(s,"lg"),xl:S(s,"xl"),xxl:S(s,"xxl")},C):C},e}var n,o,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,a["Component"]),n=t,(o=[{key:"isItemContainsTextNodeAndNotSingular",value:function(){var e,t=this.props.children;return a.Children.forEach(t,function(t){"string"===typeof t&&(e=!0)}),e&&a.Children.count(t)>1}},{key:"isFlexMode",value:function(){var e=this.props.extra;return"vertical"===this.context.itemLayout?!!e:!this.isItemContainsTextNodeAndNotSingular()}},{key:"render",value:function(){return a.createElement(s.a,null,this.renderItem)}}])&&m(n.prototype,o),r&&m(n,r),t}();function w(e){return(w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function j(e,t){return!t||"object"!==w(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}O.Meta=function(e){return a.createElement(s.a,null,function(t){var n=t.getPrefixCls,o=e.prefixCls,r=e.className,c=e.avatar,l=e.title,s=e.description,u=E(e,["prefixCls","className","avatar","title","description"]),p=n("list",o),g=i()("".concat(p,"-item-meta"),r),d=a.createElement("div",{className:"".concat(p,"-item-meta-content")},l&&a.createElement("h4",{className:"".concat(p,"-item-meta-title")},l),s&&a.createElement("div",{className:"".concat(p,"-item-meta-description")},s));return a.createElement("div",b({},u,{className:g}),c&&a.createElement("div",{className:"".concat(p,"-item-meta-avatar")},c),(l||s)&&d)})},O.contextTypes={grid:o.any,itemLayout:o.string},n.d(t,"a",function(){return N});var P=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n},N=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=j(this,_(t).call(this,e))).defaultPaginationProps={current:1,total:0},n.keys={},n.onPaginationChange=n.triggerPaginationEvent("onChange"),n.onPaginationShowSizeChange=n.triggerPaginationEvent("onShowSizeChange"),n.renderItem=function(e,t){var a,o=n.props,r=o.renderItem,i=o.rowKey;return r?((a="function"===typeof i?i(e):"string"===typeof i?e[i]:e.key)||(a="list-item-".concat(t)),n.keys[t]=a,r(e,t)):null},n.renderEmpty=function(e,t){var o=n.props.locale;return a.createElement("div",{className:"".concat(e,"-empty-text")},o&&o.emptyText||t("List"))},n.renderList=function(e){var t,o=e.getPrefixCls,r=e.renderEmpty,s=n.state,g=s.paginationCurrent,d=s.paginationSize,f=n.props,m=f.prefixCls,h=f.bordered,y=f.split,v=f.className,b=f.children,E=f.itemLayout,S=f.loadMore,O=f.pagination,w=f.grid,k=f.dataSource,j=void 0===k?[]:k,_=f.size,M=f.header,N=f.footer,L=f.loading,T=P(f,["prefixCls","bordered","split","className","children","itemLayout","loadMore","pagination","grid","dataSource","size","header","footer","loading"]),I=o("list",m),z=L;"boolean"===typeof z&&(z={spinning:z});var R=z&&z.spinning,A="";switch(_){case"large":A="lg";break;case"small":A="sm"}var K=i()(I,v,(C(t={},"".concat(I,"-vertical"),"vertical"===E),C(t,"".concat(I,"-").concat(A),A),C(t,"".concat(I,"-split"),y),C(t,"".concat(I,"-bordered"),h),C(t,"".concat(I,"-loading"),R),C(t,"".concat(I,"-grid"),w),C(t,"".concat(I,"-something-after-last-item"),n.isSomethingAfterLastItem()),t)),V=G(G(G({},n.defaultPaginationProps),{total:j.length,current:g,pageSize:d}),O||{}),B=Math.ceil(V.total/V.pageSize);V.current>B&&(V.current=B);var D,F=O?a.createElement("div",{className:"".concat(I,"-pagination")},a.createElement(u.a,G({},V,{onChange:n.onPaginationChange,onShowSizeChange:n.onPaginationShowSizeChange}))):null,H=x(j);if(O&&j.length>(V.current-1)*V.pageSize&&(H=x(j).splice((V.current-1)*V.pageSize,V.pageSize)),D=R&&a.createElement("div",{style:{minHeight:53}}),H.length>0){var J=H.map(function(e,t){return n.renderItem(e,t)}),U=[];a.Children.forEach(J,function(e,t){U.push(a.cloneElement(e,{key:n.keys[t]}))}),D=w?a.createElement(p.a,{gutter:w.gutter},U):a.createElement("ul",{className:"".concat(I,"-items")},U)}else b||R||(D=n.renderEmpty(I,r));var q=V.position||"bottom";return a.createElement("div",G({className:K},Object(c.a)(T,["rowKey","renderItem","locale"])),("top"===q||"both"===q)&&F,M&&a.createElement("div",{className:"".concat(I,"-header")},M),a.createElement(l.a,z,D,b),N&&a.createElement("div",{className:"".concat(I,"-footer")},N),S||("bottom"===q||"both"===q)&&F)};var o=e.pagination,r=o&&"object"===w(o)?o:{};return n.state={paginationCurrent:r.defaultCurrent||1,paginationSize:r.defaultPageSize||10},n}var n,o,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,a["Component"]),n=t,(o=[{key:"getChildContext",value:function(){return{grid:this.props.grid,itemLayout:this.props.itemLayout}}},{key:"triggerPaginationEvent",value:function(e){var t=this;return function(n,a){var o=t.props.pagination;t.setState({paginationCurrent:n,paginationSize:a}),o&&o[e]&&o[e](n,a)}}},{key:"isSomethingAfterLastItem",value:function(){var e=this.props,t=e.loadMore,n=e.pagination,a=e.footer;return!!(t||n||a)}},{key:"render",value:function(){return a.createElement(s.a,null,this.renderList)}}])&&k(n.prototype,o),r&&k(n,r),t}();N.Item=O,N.childContextTypes={grid:o.any,itemLayout:o.string},N.defaultProps={dataSource:[],bordered:!1,split:!0,loading:!1,pagination:!1}},998:function(e,t,n){"use strict";n.r(t);var a=n(36),o=n(44),r=n(45),i=n(48),c=n(46),l=n(47),s=n(0),u=n.n(s),p=n(805),g=n(801),d=n(105),f=n(57),m=n(95),h=n(831),y=n(17),v=n(808),b=n(1020),E=n(836),S=n(5),O=p.a.Sider,w=p.a.Content,x=g.a.Search,G=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(n=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l)))).columns=[{key:"nick_name",dataIndex:"nick_name",title:"\u516c\u53f7\u540d\u79f0",align:"center",width:200},{key:"group",dataIndex:"group",title:"\u5206\u7ec4",align:"center"},{key:"action",title:"\u64cd\u4f5c",align:"center",width:100,render:function(e,t,a){return u.a.createElement(d.a,{type:"primary",size:"small",onClick:function(){return n.setState({gonghaoModal:!0,gonghao_id:t._id,gonghao_index:a})}},"\u4fee\u6539\u5206\u7ec4")}}],n.state={gonghaoTagList:[],gonghaoModal:!1,editGroupModalVisible:!1,group:"",gonghaoList:[],group_id:"",group_index:-1,gonghao_id:"",gonghao_index:-1,selectGroup:"",selectedRowKeys:[]},n.getGonghaoTagList=function(){S.a.get("/gonghaoTag").then(function(e){if(1===e.data.code){var t=e.data.data;n.setState({gonghaoTagList:t})}})},n.getGroupGonghao=function(e){S.a.get("/conf/group",{params:{group:e}}).then(function(e){var t=e.data.data;n.setState({gonghaoList:t}),0===t.length&&f.a.warning("\u8be5\u5206\u7ec4\u4e2d\u8fd8\u6ca1\u6709\u6570\u636e\uff0c\u8bf7\u6dfb\u52a0")})},n.openEditGroupModal=function(){n.setState({editGroupModalVisible:!0})},n.closeEditGroupModal=function(){n.setState({editGroupModalVisible:!1,group:""})},n.confirmEditGroup=function(){var e=n.state,t=e.group,a=e.group_id,o=e.group_index;a?n.updateGroup(t,a,o):n.addGroup(t)},n.addGroup=function(e){m.a.confirm({title:"\u786e\u5b9a\u6dfb\u52a0\u4e00\u4e2a\u5206\u7ec4\u5417\uff1f",onOk:function(){e?S.a.post("/gonghaoTag",{name:e}).then(function(e){if(1===e.data.code&&0===e.data.exist){var t=e.data,o=t.data,r=t.msg;n.setState(function(e){var t=Object(a.a)(e.gonghaoTagList);return t.push(o),{gonghaoTagList:t}}),f.a.success(r),n.closeEditGroupModal()}else 1===e.data.code&&1===e.data.exist?f.a.warning("\u5206\u7ec4\u5df2\u5b58\u5728\uff0c\u8bf7\u66f4\u6362\u5206\u7ec4\u540d\u79f0"):f.a.error(e.data.msg)}):f.a.error("\u5206\u7ec4\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a")}})},n.updateGroup=function(e,t,a){m.a.confirm({title:"\u786e\u5b9a\u4fee\u6539\u5206\u7ec4\u540d\u79f0\u5417\uff1f",onOk:function(){e?S.a.put("/gonghaoTag",{name:e,id:t}).then(function(e){if(1===e.data.code){var t=e.data,o=t.data,r=t.msg;n.setState(function(e){var t=e.gonghaoTagList;return Object.assign(t[a],o),{gonghaoTagList:t}}),f.a.success(r),n.closeEditGroupModal()}else f.a.error(e.data.msg)}):f.a.error("\u5206\u7ec4\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a")}})},n.deleteGroup=function(e,t){m.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u4e2a\u5206\u7ec4\u5417\uff1f",onOk:function(){S.a.delete("/gonghaoTag/"+e).then(function(e){var a=e.data,o=a.code,r=a.msg;1===o?(f.a.success(r),n.getGroupGonghao(),n.setState(function(e){var n=e.gonghaoTagList;return n.splice(t,1),{gonghaoTagList:n}})):f.a.error(r)})}})},n.changeGroupValue=function(e){var t=e.target.value;n.setState({group:t})},n.searchGroupGonghao=function(e){e?S.a.get("/conf/find_one",{params:{nick_name:e}}).then(function(e){var t=e.data,a=t.data,o=t.code,r=t.msg;1===o?(f.a.success(r),n.setState({gonghaoList:a})):f.a.error("\u6ca1\u6709\u67e5\u8be2\u5230\u76f8\u5173\u6570\u636e\uff0c\u8bf7\u68c0\u67e5\u8f93\u5165\u662f\u5426\u6709\u8bef")}):f.a.error("\u516c\u53f7\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a")},n.closeGonghaoModal=function(){n.setState({gonghaoModal:!1,gonghao_id:"",gonghao_index:-1,selectGroup:""})},n.submitGonghaoModal=function(){var e=n.state,t=e.gonghao_id,a=e.gonghao_index,o=e.selectGroup,r=e.selectedRowKeys;t?n.updateOne(t,a,o):n.updateMore(r,o)},n.openUpdateMoreModal=function(){0===n.state.selectedRowKeys.length?f.a.warning("\u8bf7\u5148\u9009\u62e9\u516c\u53f7"):n.setState({gonghaoModal:!0})},n.updateOne=function(e,t,o){m.a.confirm({title:"\u786e\u5b9a\u4fee\u6539\u5206\u7ec4\u5417\uff1f",onOk:function(){S.a.put("/conf",{id:e,group:o}).then(function(e){var o=e.data,r=o.code,i=o.msg;1===r?(f.a.success(i),n.setState(function(e){var n=Object(a.a)(e.gonghaoList);return n.splice(t,1),{gonghaoList:n}}),n.closeGonghaoModal()):f.a.error(i)})}})},n.updateMore=function(e,t){m.a.confirm({title:"\u786e\u5b9a\u4fee\u6539\u5206\u7ec41\u5417\uff1f",onOk:function(){S.a.put("/conf/multi_select",{ids:e,group:t}).then(function(e){var t=e.data,a=t.code,o=t.msg;1===a?(f.a.success(o),n.getGroupGonghao(),n.closeGonghaoModal(),n.setState({selectedRowKeys:[]})):f.a.error(o)})}})},n.changeSelectGroup=function(e){var t=e.target.value;n.setState({selectGroup:t})},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.getGonghaoTagList(),this.getGroupGonghao()}},{key:"render",value:function(){var e=this,t=this.state,n=t.gonghaoTagList,a=t.gonghaoModal,o=t.editGroupModalVisible,r=t.gonghaoList,i=t.group,c=t.selectGroup,l={selectedRowKeys:this.state.selectedRowKeys,onChange:function(t){e.setState({selectedRowKeys:t})}};return u.a.createElement("div",null,u.a.createElement("div",{className:"container"},u.a.createElement(p.a,null,u.a.createElement(O,{theme:"light"},u.a.createElement(h.a,{header:u.a.createElement("div",{className:"cursor userSelect",onClick:function(){return e.getGroupGonghao("\u672a\u5206\u7ec4")}},"\u672a\u5206\u7ec4"),bordered:!0,dataSource:n,style:{marginRight:10},renderItem:function(t,n){return u.a.createElement(h.a.Item,{className:"userSelect"},u.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%",lineHeight:1}},u.a.createElement("p",{className:"cursor",onClick:function(){return e.getGroupGonghao(t.name)}},t.name),u.a.createElement("div",null,u.a.createElement(y.a,{className:"cursor",style:{marginRight:10},type:"form",onClick:function(){return e.setState({editGroupModalVisible:!0,group_id:t._id,group_index:n})}}),u.a.createElement(y.a,{className:"cursor",type:"close-square",onClick:function(){return e.deleteGroup(t._id,n)}}))))}}),u.a.createElement("div",{className:"tc cursor userSelect",style:{width:"90%",margin:"15px auto 0",padding:"10px 0",borderRadius:5,border:"1px dashed #999"},onClick:this.openEditGroupModal},"+ \u6dfb\u52a0\u5206\u7ec4")),u.a.createElement(w,null,u.a.createElement(v.a,{style:{padding:20}},u.a.createElement(x,{placeholder:"\u8bf7\u8f93\u5165\u516c\u4f17\u53f7\u540d\u79f0",style:{width:200,marginBottom:20,marginTop:-10},onSearch:this.searchGroupGonghao}),u.a.createElement(d.a,{type:"primary",style:{display:"block",marginBottom:20},onClick:this.openUpdateMoreModal},"\u6279\u91cf\u4fee\u6539"),u.a.createElement(b.a,{rowSelection:l,bordered:!0,size:"small",rowKey:function(e){return e._id},columns:this.columns,dataSource:r}))))),u.a.createElement(m.a,{visible:a,onCancel:this.closeGonghaoModal,onOk:this.submitGonghaoModal},u.a.createElement(E.a.Group,{value:c,onChange:this.changeSelectGroup},u.a.createElement(E.a,{value:"\u672a\u5206\u7ec4"},"\u672a\u5206\u7ec4"),n.map(function(e){return u.a.createElement(E.a,{key:e._id,value:e.name},e.name)}))),u.a.createElement(m.a,{visible:o,title:"\u65b0\u5efa\u5206\u7ec4\u540d\u79f0",onCancel:this.closeEditGroupModal,onOk:this.confirmEditGroup},"\u5206\u7ec4\u540d\u79f0\uff1a",u.a.createElement(g.a,{onChange:this.changeGroupValue,value:i,style:{width:300},placeholder:"\u8bf7\u8f93\u5165\u5206\u7ec4\u540d\u79f0"})))}}]),t}(s.Component);t.default=G}}]);