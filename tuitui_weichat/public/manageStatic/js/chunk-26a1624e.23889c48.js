(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26a1624e"],{"11e9":function(t,e,n){var a=n("52a7"),r=n("4630"),i=n("6821"),o=n("6a99"),s=n("69a8"),c=n("c69a"),l=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?l:function(t,e){if(t=i(t),e=o(e,!0),c)try{return l(t,e)}catch(t){}if(s(t,e))return r(!a.f.call(t,e),t[e])}},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"5bc5":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"show-message"},["消息管理"===t.$route.name?n("div",[n("Button",{staticClass:"create",attrs:{type:"success",size:"large",to:"/manage/msg_view/guanli/create"}},[t._v("添加客服消息")]),n("Table",{staticClass:"message-table",attrs:{columns:t.messageHeader,data:t.messageData}}),n("Page",{staticStyle:{"margin-top":"30px"},attrs:{"show-total":"",total:t.dataList.length,"page-size":10},on:{"on-change":t.changePage}})],1):t._e(),n("router-view")],1)},r=[],i=(n("7f7f"),n("c5f6"),n("cadf"),n("551c"),n("097d"),{data:function(){var t=this;return{dataList:[],messageData:[],messageHeader:[{key:"type",title:"类型",align:"center",render:function(t,e){var n=(1==e.row.type?"文本消息":"图文消息")+(e.row.contents.length>1?"(多)":"");return t("span",{props:{}},n)}},{key:"task",title:"是否延时",align:"center",render:function(t,e){var n=1==e.row.task?"是":"否";return t("span",{props:{}},n)}},{key:"delay",title:"延时时间(分钟)",align:"center",render:function(t,e){var n=1==e.row.task?e.row.delay:"——";return t("span",{props:{}},n)}},{key:"is_timing",title:"是否定时(分钟)",align:"center",render:function(t,e){var n=1==e.row.is_timing?"是":"否";return t("span",{props:{}},n)}},{key:"timing_time",title:"定时时间",align:"center",width:100,render:function(t,e){var n=1==e.row.is_timing?e.row.time:"——";return t("span",{props:{}},n)}},{key:"sex",title:"性别",align:"center",width:100,render:function(t,e){var n="0"==e.row.sex?"未知":"1"==e.row.sex?"男":"2"==e.row.sex?"女":"全部";return t("span",{props:{}},n)}},{key:"title",title:"标题",align:"center",tooltip:!0,render:function(t,e){var n=e.row.contents[0].title||"——";return t("Tooltip",{props:{placement:"top-start",content:n,maxWidth:200}},[t("span",{style:{diaplay:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordBreak:"break-all"}},n)])}},{key:"description",title:"详细信息",align:"center",tooltip:!0,width:90,render:function(t,e){var n=e.row.contents[0].description||"——";return t("Tooltip",{props:{placement:"top-start",content:n,maxWidth:200}},[t("span",{style:{diaplay:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordBreak:"break-all"}},n)])}},{key:"url",title:"链接",align:"center",tooltip:!0,render:function(t,e){var n=e.row.contents[0].url||"——";return t("Tooltip",{props:{placement:"top-start",content:n,maxWidth:200}},[t("span",{style:{diaplay:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordBreak:"break-all"}},n)])}},{key:"img",title:"图片",width:160,align:"center",render:function(t,e){return t("img",{attrs:{src:e.row.img,style:"width: 100%; padding: 10px;"}})}},{title:"Action",align:"center",width:250,render:function(e,n){var a=t;return e("div",[e("Button",{style:{marginRight:"10px"},props:{type:"warning",size:"small"},on:{click:function(){a.copyMessage(n.row)}}},"复制"),e("Button",{style:{marginRight:"10px"},props:{type:"primary",size:"small"},on:{click:function(){a.$router.push({name:"修改客服消息",params:n.row})}}},"修改"),e("Button",{style:{marginRight:"10px",display:n.row.task||n.row.is_timing?"none":"inline-block"},props:{type:"success",size:"small"},on:{click:function(){a.sendMessage(n.row)}}},"发送消息"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){a.deleteMessage(n.row)}}},"删除")])}}]}},mounted:function(){this.showMessage()},methods:{copyMessage:function(t){var e=this;this.$axios.post("/message/create",{contents:t.contents,type:t.type,task:t.task,is_timing:t.is_timing,delay:t.delay,timing_time:t.timing_time,codes:t.codes,img:t.img,tagId:t.tagId,sex:t.sex}).then(function(t){if(t.data.success){var n=t.data.data;n.time=e.formatDate(n.timing_time),e.messageData.unshift(n),e.$Message.info(t.data.success)}else e.$Message.info(t.data.err)})},showMessage:function(){var t=this;this.$axios("/message").then(function(e){0!=e.data.messages.length&&(t.dataList=e.data.messages,t.messageData=t.dataList.slice(0,10))})},sendMessage:function(t){var e=this;this.$Modal.confirm({title:"提示:",content:"确认发送这条消息吗？",onOk:function(){e.$axios.get("/message/send",{params:{id:t._id,take_over:!0,tagId:t.tagId}}).then(function(t){e.$Message.info(t.data.success)})}})},deleteMessage:function(t){var e=this;this.$Modal.confirm({title:"提示:",content:"确认删除这条内容吗？",onOk:function(){e.$axios.get("/message/delete",{params:{id:t._id}}).then(function(t){0==t.data.data?(e.$Message.info("已删除最后一条数据"),e.messageData=[]):(e.$Message.info(t.data.success),e.showMessage())})}})},changePage:function(t){var e=10*(t-1),n=10*t;this.messageData=this.dataList.slice(e,n),this.goTop()},goTop:function(){var t=this;t.timer=setInterval(function(){var e=document.documentElement.scrollTop||document.body.scrollTop,n=Math.floor(-e);document.documentElement.scrollTop=document.body.scrollTop=e+n,t.isTop=!0,0===e&&clearInterval(t.timer)},30)},formatDate:function(t){var e=new Date(1e3*Number(t)),n=e.getFullYear(),a=e.getMonth()+1,r=e.getDate(),i=e.getHours(),o=e.getMinutes(),s=e.getSeconds(),c=n+"-"+(a<10?"0"+a:a)+"-"+(r<10?"0"+r:r)+" "+(i<10?"0"+i:i)+":"+(o<10?"0"+o:o)+":"+(s<10?"0"+s:s);return c}},watch:{$route:function(t,e){"添加客服消息"!=e.name&&"修改客服消息"!=e.name||this.showMessage()}}}),o=i,s=(n("ad9c"),n("2877")),c=Object(s["a"])(o,a,r,!1,null,"9f8ab3da",null);c.options.__file="manage.vue";e["default"]=c.exports},"5dbc":function(t,e,n){var a=n("d3f4"),r=n("8b97").set;t.exports=function(t,e,n){var i,o=e.constructor;return o!==n&&"function"==typeof o&&(i=o.prototype)!==n.prototype&&a(i)&&r&&r(t,i),t}},"7e04":function(t,e,n){},"8b97":function(t,e,n){var a=n("d3f4"),r=n("cb7c"),i=function(t,e){if(r(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,a){try{a=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),a(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:a(t,n),t}}({},!1):void 0),check:i}},9093:function(t,e,n){var a=n("ce10"),r=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return a(t,r)}},aa77:function(t,e,n){var a=n("5ca1"),r=n("be13"),i=n("79e5"),o=n("fdef"),s="["+o+"]",c="​",l=RegExp("^"+s+s+"*"),p=RegExp(s+s+"*$"),u=function(t,e,n){var r={},s=i(function(){return!!o[t]()||c[t]()!=c}),l=r[t]=s?e(f):o[t];n&&(r[n]=l),a(a.P+a.F*s,"String",r)},f=u.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(p,"")),t};t.exports=u},ad9c:function(t,e,n){"use strict";var a=n("7e04"),r=n.n(a);r.a},c5f6:function(t,e,n){"use strict";var a=n("7726"),r=n("69a8"),i=n("2d95"),o=n("5dbc"),s=n("6a99"),c=n("79e5"),l=n("9093").f,p=n("11e9").f,u=n("86cc").f,f=n("aa77").trim,d="Number",g=a[d],m=g,h=g.prototype,w=i(n("2aeb")(h))==d,y="trim"in String.prototype,v=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=y?e.trim():f(e,3);var n,a,r,i=e.charCodeAt(0);if(43===i||45===i){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+e}for(var o,c=e.slice(2),l=0,p=c.length;l<p;l++)if(o=c.charCodeAt(l),o<48||o>r)return NaN;return parseInt(c,a)}}return+e};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof g&&(w?c(function(){h.valueOf.call(n)}):i(n)!=d)?o(new m(v(e)),n,g):v(e)};for(var _,k=n("9e1e")?l(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),b=0;k.length>b;b++)r(m,_=k[b])&&!r(g,_)&&u(g,_,p(m,_));g.prototype=h,h.constructor=g,n("2aba")(a,d,g)}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-26a1624e.23889c48.js.map