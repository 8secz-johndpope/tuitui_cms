(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7127865c"],{ac6a:function(t,e,a){for(var s=a("cadf"),i=a("0d58"),o=a("2aba"),r=a("7726"),n=a("32e9"),l=a("84f2"),u=a("2b4c"),c=u("iterator"),m=u("toStringTag"),p=l.Array,b={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(b),d=0;d<h.length;d++){var f,v=h[d],_=b[v],y=r[v],w=y&&y.prototype;if(w&&(w[c]||n(w,c,p),w[m]||n(w,m,v),l[v]=p,_))for(f in s)w[f]||o(w,f,s[f],!0)}},ace7:function(t,e,a){"use strict";var s=a("e731"),i=a.n(s);i.a},e731:function(t,e,a){},f27b:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"title"},[t._v("\n        "+t._s("修改定时菜单"==t.$route.name?"修改定时菜单栏配置":"配置新定时菜单栏")+"\n    ")]),a("div",{staticClass:"edit-info"},[a("Form",{staticClass:"form-group",attrs:{model:t.formData,"label-position":"right","label-width":100}},[a("FormItem",{attrs:{label:"选择公号",prop:"codes"}},[a("CheckboxGroup",{model:{value:t.codes,callback:function(e){t.codes=e},expression:"codes"}},t._l(t.gonghaoList,function(e,s){return a("Checkbox",{attrs:{label:e.code,name:"codes"}},[t._v(t._s(e.name))])}))],1),a("FormItem",{attrs:{label:"标题",prop:"title"}},[a("Input",{attrs:{size:"large",type:"text",placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),a("FormItem",{attrs:{label:"定时时间",prop:"time"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{placement:"top-start",type:"datetime",placeholder:"选择日期时间"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),a("FormItem",{attrs:{label:"二级菜单",prop:"has_sub_btn"}},[a("i-switch",{model:{value:t.has_sub_btn,callback:function(e){t.has_sub_btn=e},expression:"has_sub_btn"}})],1),a("FormItem",{attrs:{label:"一级菜单名称",prop:"name"}},[a("Input",{attrs:{size:"large",type:"text",placeholder:"请输入一级菜单名称"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!t.has_sub_btn,expression:"!has_sub_btn"}],attrs:{label:"链接/关键词"}},[a("RadioGroup",{model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},[a("Radio",{attrs:{label:"view"}},[t._v("view")]),a("Radio",{attrs:{label:"click"}},[t._v("click")])],1)],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!t.has_sub_btn&&"view"==t.formData.type,expression:"!has_sub_btn && formData.type == 'view'"}],attrs:{label:"一级菜单链接",prop:"url"}},[a("Input",{attrs:{size:"large",type:"text",placeholder:"请输入一级菜单链接"},model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!t.has_sub_btn&&"click"==t.formData.type,expression:"!has_sub_btn && formData.type == 'click'"}],attrs:{label:"一级菜单关键字",prop:"key"}},[a("Input",{attrs:{size:"large",type:"text",placeholder:"请输入一级菜单关键字"},model:{value:t.formData.key,callback:function(e){t.$set(t.formData,"key",e)},expression:"formData.key"}})],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn,expression:"has_sub_btn"}],attrs:{label:"二级菜单名称",prop:"name"}},[a("Input",{attrs:{size:"large",type:"text",placeholder:"请输入二级菜单名称"},model:{value:t.subItem.name,callback:function(e){t.$set(t.subItem,"name",e)},expression:"subItem.name"}})],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn,expression:"has_sub_btn"}],attrs:{label:"链接/关键词"}},[a("RadioGroup",{model:{value:t.subItem.type,callback:function(e){t.$set(t.subItem,"type",e)},expression:"subItem.type"}},[a("Radio",{attrs:{label:"view"}},[t._v("view")]),a("Radio",{attrs:{label:"click"}},[t._v("click")])],1)],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn&&"view"==t.subItem.type,expression:"has_sub_btn && subItem.type == 'view'"}],attrs:{label:"二级菜单链接",prop:"url"}},[a("Input",{attrs:{size:"large",type:"text",placeholder:"请输入二级菜单链接"},model:{value:t.subItem.url,callback:function(e){t.$set(t.subItem,"url",e)},expression:"subItem.url"}})],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn&&"click"==t.subItem.type,expression:"has_sub_btn && subItem.type == 'click'"}],attrs:{label:"二级菜单关键词",prop:"key"}},[a("Input",{attrs:{size:"large",type:"text",placeholder:"请输入二级菜单关键词"},model:{value:t.subItem.key,callback:function(e){t.$set(t.subItem,"key",e)},expression:"subItem.key"}})],1),a("Button",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn&&!t.isUpdate1,expression:"has_sub_btn && !isUpdate1"}],attrs:{size:"large",type:"primary"},on:{click:function(e){t.addSubBtn()}}},[t._v("添加二级菜单")]),a("Button",{directives:[{name:"show",rawName:"v-show",value:t.isUpdate1,expression:"isUpdate1"}],attrs:{size:"large",type:"success"},on:{click:function(e){t.saveSecond()}}},[t._v("保存")]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn,expression:"has_sub_btn"}],staticClass:"line"}),a("Button",{attrs:{size:"large",type:"primary"},on:{click:function(e){t.addBtn()}}},[t._v("添加一级菜单")]),a("Button",{directives:[{name:"show",rawName:"v-show",value:t.isUpdate,expression:"isUpdate"}],staticStyle:{"margin-left":"30px"},attrs:{size:"large",type:"success"},on:{click:function(e){t.saveFirst()}}},[t._v("保存")]),a("Table",{staticClass:"first-table",attrs:{stripe:"",columns:t.firstHeader,data:t.firstData}}),a("Button",{staticClass:"btn",attrs:{size:"large",type:"primary"},on:{click:t.submitForm}},[t._v("提交")]),a("Button",{attrs:{size:"large",type:"error"},on:{click:t.cancel}},[t._v("取消")])],1)],1),a("div",{staticClass:"sub-btn-table"},[a("Table",{staticClass:"second-table",attrs:{stripe:"",columns:t.secHeader,data:t.secData}})],1)])},i=[],o=(a("ac6a"),a("7f7f"),a("cadf"),a("551c"),a("097d"),{data:function(){var t=this;return{codes:[],formData:{sub_button:[],type:"view"},title:"",time:new Date,firstData:[],has_sub_btn:!1,subItem:{type:"view"},radio:"url",isUpdate:!1,isUpdate1:!1,secData:[],firstHeader:[{key:"name",title:"一级菜单名称",align:"center",render:function(t,e){var a=e.row.name?e.row.name:"~";return t("span",{props:{}},a)}},{title:"Action",align:"center",render:function(e,a){var s=t;return e("div",[e("Button",{style:{marginRight:"10px"},props:{type:"primary",size:"small"},on:{click:function(){s.formData=a.row,s.formData.sub_button!=[]&&(s.secData=s.formData.sub_button,s.has_sub_btn=!0,s.subItem=s.secData[0])}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){s.firstData.splice(index,1),s.formData={sub_button:[],type:"view"}}}},"删除")])}}],secHeader:[{key:"name",title:"二级菜单名称",align:"center"},{title:"Action",align:"center",render:function(e,a){var s=t;return e("div",[e("Button",{style:{marginRight:"10px"},props:{type:"primary",size:"small"},on:{click:function(){s.subItem=a.row,s.isUpdate1=!0}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){s.formData.sub_button.splice(index,1),s.subItem={type:"view"},s.has_sub_btn=!0}}},"删除")])}}],gonghaoList:[]}},mounted:function(){this.showGonghaoList(),"修改定时菜单"===this.$route.name&&(this.isUpdate=!0,this.data_info=this.$route.params,this.codes=this.data_info.codes,this.title=this.data_info.title,this.time=this.data_info.time,this.firstData=this.data_info.values,this.formData=this.firstData[0])},methods:{showGonghaoList:function(){var t=this;this.$axios.get("/conf").then(function(e){t.gonghaoList=e.data.data})},cancel:function(){this.resetForm(),this.$router.push({name:"配置定时菜单"})},resetForm:function(){this.formData={sub_button:[],type:"view"},this.subItem={type:"view"}},addBtn:function(){this.formData.sub_button=this.secData,this.secData=[],0==this.formData.sub_button.length&&delete this.formData.sub_button,this.firstData.push(this.formData),console.log(this.firstData),this.resetForm(),this.has_sub_btn=!1},submitForm:function(){var t=this;"新建定时菜单"===this.$route.name?this.$axios.post("/menuTime/create",{codes:this.codes,title:this.title,time:this.time,values:this.firstData}).then(function(e){t.firstData=[],t.$Message.info("创建成功"),t.cancel()}):"修改定时菜单"===this.$route.name&&this.$axios.post("/menuTime/update",{id:this.data_info._id,codes:this.codes,title:this.title,time:this.time,values:this.firstData}).then(function(e){t.firstData=[],t.$Message.info("修改成功"),t.cancel()})},addSubBtn:function(){this.secData.push(this.subItem),this.subItem={type:"view"},this.has_sub_btn=!0},saveFirst:function(){this.resetForm(),this.has_sub_btn=!1},saveSecond:function(){this.resetForm(),this.isUpdate1=!1,this.has_sub_btn=!1}}}),r=o,n=(a("ace7"),a("2877")),l=Object(n["a"])(r,s,i,!1,null,"683d6a84",null);l.options.__file="editInfo.vue";e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-7127865c.2c064cbb.js.map