{"version":3,"sources":["webpack:///./src/components/msgView/manage.vue?4bf6","webpack:///src/components/msgView/manage.vue","webpack:///./src/components/msgView/manage.vue?4a51","webpack:///./src/components/msgView/manage.vue","webpack:///./src/components/msgView/manage.vue?4657"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","$route","name","attrs","type","size","to","_v","columns","messageHeader","data","messageData","_e","staticRenderFns","managevue_type_script_lang_js_","_this","key","title","align","h","params","row","contents","length","props","task","delay","is_timing","width","timing_time","time","tooltip","placement","content","maxWidth","style","diaplay","overflow","textOverflow","whiteSpace","wordBreak","description","url","src","img","that","marginRight","on","click","copyMessage","$router","push","display","sendMessage","deleteMessage","mounted","showMessage","methods","_this2","$axios","post","codes","take_over","tagId","then","res","success","$Message","info","unshift","err","_this3","messages","_this4","get","id","_id","_this5","msgView_managevue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manage_vue_vue_type_style_index_0_id_b84c68a4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manage_vue_vue_type_style_index_0_id_b84c68a4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-e8c1066c.032432ec.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"show-message\"},[(_vm.$route.name === '消息管理')?_c('div',[_c('Button',{staticClass:\"create\",attrs:{\"type\":\"success\",\"size\":\"large\",\"to\":\"/msg_view/manage/create\"}},[_vm._v(\"添加客服消息\")]),_c('Table',{staticClass:\"message-table\",attrs:{\"columns\":_vm.messageHeader,\"data\":_vm.messageData}})],1):_vm._e(),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"show-message\">\r\n        <div v-if=\"$route.name === '消息管理'\">\r\n            <Button type=\"success\" size=\"large\" to=\"/msg_view/manage/create\" class=\"create\">添加客服消息</Button>\r\n            <Table class=\"message-table\" :columns=\"messageHeader\" :data=\"messageData\"></Table>\r\n        </div>\r\n        <router-view />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                messageData: [],\r\n                messageHeader: [\r\n                    {\r\n                        key: 'type',\r\n                        title: '类型',\r\n                        align: 'center',\r\n                        render: (h, params) => {\r\n                            let type = (params.row.type  == 1 ? '文本消息' : '图文消息') + (params.row.contents.length > 1 ? '(多)' : '');\r\n                            return h('span', {\r\n                                props: {}\r\n                            }, type)\r\n                        }\r\n                    }, {\r\n                        key: 'task',\r\n                        title: '是否延时',\r\n                        align: 'center',\r\n                        render: (h, params) => {\r\n                            let task = (params.row.task == true ? '是' : '否');\r\n                            return h('span', {\r\n                                props: {}\r\n                            }, task)\r\n                        }\r\n                    }, {\r\n                        key: 'delay',\r\n                        title: '延时时间(分钟)',\r\n                        align: 'center',\r\n                        render: (h, params) => {\r\n                            let delay = (params.row.task == true ? params.row.delay : '——');\r\n                            return h('span', {\r\n                                props: {}\r\n                            }, delay)\r\n                        }\r\n                    }, {\r\n                        key: 'is_timing',\r\n                        title: '是否定时(分钟)',\r\n                        align: 'center',\r\n                        render: (h, params) => {\r\n                            let is_timing = (params.row.is_timing == true ? '是' : '否');\r\n                            return h('span', {\r\n                                props: {}\r\n                            }, is_timing)\r\n                        }\r\n                    }, {\r\n                        key: 'timing_time',\r\n                        title: '定时时间',\r\n                        align: 'center',\r\n                        width: 100,\r\n                        render: (h, params) => {\r\n                            let timing_time = (params.row.is_timing == true ? params.row.time : '——');\r\n                            return h('span', {\r\n                                props: {}\r\n                            }, timing_time)\r\n                        }\r\n                    }, {\r\n                        key: 'title',\r\n                        title: '标题',\r\n                        align: 'center',\r\n                        tooltip: true,\r\n                        render: (h, params) => {\r\n                            let title = params.row.contents[0].title || '——'\r\n                            return h('Tooltip', {\r\n                                props: {\r\n                                    placement: 'top-start',\r\n                                    content: title,\r\n                                    maxWidth: 200\r\n                                }\r\n                            }, [\r\n                                h('span', {\r\n                                    style: { \r\n                                        diaplay: 'inline-block', \r\n                                        width: '100%', \r\n                                        overflow: 'hidden', \r\n                                        textOverflow: 'ellipsis', \r\n                                        whiteSpace: 'nowrap',\r\n                                        wordBreak: 'break-all'\r\n                                    } \r\n                                }, title)\r\n                            ])\r\n                        }\r\n                    }, {\r\n                        key: 'description',\r\n                        title: '详细信息',\r\n                        align: 'center',\r\n                        tooltip: true,\r\n                        width: 90,\r\n                        render: (h, params) => {\r\n                            let description = params.row.contents[0].description || '——'\r\n                            return h('Tooltip', {\r\n                                props: {\r\n                                    placement: 'top-start',\r\n                                    content: description,\r\n                                    maxWidth: 200\r\n                                }\r\n                            }, [\r\n                                h('span', {\r\n                                    style: { \r\n                                        diaplay: 'inline-block', \r\n                                        width: '100%', \r\n                                        overflow: 'hidden', \r\n                                        textOverflow: 'ellipsis', \r\n                                        whiteSpace: 'nowrap',\r\n                                        wordBreak: 'break-all'\r\n                                    } \r\n                                }, description)\r\n                            ])\r\n                        }\r\n                    }, {\r\n                        key: 'url',\r\n                        title: '链接',\r\n                        align: 'center',\r\n                        tooltip: true,\r\n                        render: (h, params) => {\r\n                            let url = params.row.contents[0].url || '——'\r\n                            return h('Tooltip', {\r\n                                props: {\r\n                                    placement: 'top-start',\r\n                                    content: url,\r\n                                    maxWidth: 200\r\n                                } \r\n                            }, [\r\n                                h('span', {\r\n                                    style: { \r\n                                        diaplay: 'inline-block', \r\n                                        width: '100%', \r\n                                        overflow: 'hidden', \r\n                                        textOverflow: 'ellipsis', \r\n                                        whiteSpace: 'nowrap',\r\n                                        wordBreak: 'break-all'\r\n                                    } \r\n                                }, url)\r\n                            ])\r\n                        }\r\n                    }, {\r\n                        key: 'img',\r\n                        title: '图片',\r\n                        width: 160,\r\n                        align: 'center',\r\n                        render: (h, params) => {\r\n                            return h('img', {\r\n                                attrs: {\r\n                                    src: params.row.img,\r\n                                    style: 'width: 100%; padding: 10px;'\r\n                                }\r\n                            })\r\n                        }\r\n                    }, {\r\n                        title: 'Action',\r\n                        align: 'center',\r\n                        width: 250,\r\n                        render: (h, params) => {\r\n                            let that = this;\r\n                            return h('div', [\r\n                                h('Button', {\r\n                                    style: {\r\n                                        marginRight: '10px'\r\n                                    },\r\n                                    props: {\r\n                                        type: 'warning',\r\n                                        size: 'small'\r\n                                    },\r\n                                    on: {\r\n                                        click() {\r\n                                            that.copyMessage(params.row)\r\n                                        }\r\n                                    }\r\n                                }, '复制'),\r\n                                h('Button', {\r\n                                    style: {\r\n                                        marginRight: '10px'\r\n                                    },\r\n                                    props: {\r\n                                        type: 'primary',\r\n                                        size: 'small'\r\n                                    },\r\n                                    on: {\r\n                                        click() {\r\n                                            that.$router.push({\r\n                                                name: '修改客服消息',\r\n                                                params: params.row\r\n                                            })\r\n                                        }\r\n                                    }\r\n                                }, '修改'),\r\n                                h('Button', {\r\n                                    style: {\r\n                                        marginRight: '10px',\r\n                                        display: (!params.row.task && !params.row.is_timing) ? \"inline-block\" : \"none\"\r\n                                    },\r\n                                    props: {\r\n                                        type: 'success',\r\n                                        size: 'small'\r\n                                    },\r\n                                    on: {\r\n                                        click() {\r\n                                            that.sendMessage(params.row)\r\n                                        }\r\n                                    }\r\n                                }, '发送消息'),\r\n                                h('Button', {\r\n                                    props: {\r\n                                        type: 'error',\r\n                                        size: 'small'\r\n                                    },\r\n                                    on: {\r\n                                        click() {\r\n                                            that.deleteMessage(params.row)\r\n                                        }\r\n                                    }\r\n                                }, '删除')\r\n                            ])\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        mounted() {\r\n            this.showMessage()\r\n            // sessionStorage.setItem(\"secName\", this.$route.name);\r\n        },\r\n        methods: {\r\n            copyMessage(row) {\r\n                this.$axios.post('/message/create', {\r\n                    contents: row.contents,\r\n                    type: row.type,\r\n                    task: row.task,\r\n                    delay: row.delay,\r\n                    is_timing: row.is_timing,\r\n                    timing_time: row.timing_time,\r\n                    codes: row.codes,\r\n                    img: row.img,\r\n                    take_over: row.take_over,\r\n                    tagId: row.tagId\r\n                }).then((res) => {\r\n                    if(res.data.success) {\r\n                        this.$Message.info(res.data.success)\r\n                        this.messageData.unshift(res.data.data)\r\n                        // window.location.href = '/msg_view/manage'\r\n                    } else {\r\n                        this.$Message.info(res.data.err)\r\n                    }\r\n                })\r\n            },\r\n            showMessage() {\r\n                this.$axios('/message')\r\n                .then((res) => {\r\n                    if(res.data.messages.length != 0) {\r\n                        this.messageData =res.data.messages\r\n                    }\r\n                })\r\n            },\r\n            sendMessage(row) {\r\n                this.$axios.get('/message/send', {\r\n                    params: {\r\n                        id: row._id,\r\n                        take_over: row.take_over,\r\n                        tagId: row.tagId\r\n                    }\r\n                }).then(res => {\r\n                    this.$Message.info(res.data.success)\r\n                })\r\n            },\r\n            deleteMessage(row) {\r\n                this.$axios.get('/message/delete', {params: { id: row._id }})\r\n                .then(res => {\r\n                    if(res.data.data == 0) {\r\n                        this.$Message.info('已删除最后一条数据')\r\n                        this.messageData = []\r\n                    } else {\r\n                        this.$Message.info(res.data.success)\r\n                        this.showMessage()\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .create {\r\n        margin-bottom: 30px;\r\n    }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./manage.vue?vue&type=template&id=b84c68a4&scoped=true&\"\nimport script from \"./manage.vue?vue&type=script&lang=js&\"\nexport * from \"./manage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./manage.vue?vue&type=style&index=0&id=b84c68a4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b84c68a4\",\n  null\n  \n)\n\ncomponent.options.__file = \"manage.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manage.vue?vue&type=style&index=0&id=b84c68a4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manage.vue?vue&type=style&index=0&id=b84c68a4&scoped=true&lang=css&\""],"sourceRoot":""}