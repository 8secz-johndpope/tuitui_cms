webpackJsonp([1],{"/MkV":function(t,e){},"/pIJ":function(t,e){},"1lW8":function(t,e){},"3eTs":function(t,e){},"8CGX":function(t,e){},"FV/9":function(t,e){},GOTj:function(t,e){},Gzzh:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),s=a("NYxO");n.default.use(s.a);var i=new s.a.Store({state:{showTable:!0,showMenu:!0,showTimingMenu:!0,showMsg:!0,showSetting:!1,settingTable:!0,gonghaoUpdate:!1,menuUpdate:!1,timingMenuUpdate:!1,messageUpdate:!1,settingUpdate:!1},mutations:{changeShowTable:function(t,e){t.showTable=e},changeMenuTable:function(t,e){t.showMenu=e},changeTimingMenuTable:function(t,e){t.showTimingMenu=e},changeMsgTable:function(t,e){t.showMsg=e},changeShowSetting:function(t,e){t.showSetting=e},changeSettingTable:function(t,e){t.settingTable=e},changeGonghaoUpdate:function(t,e){t.gonghaoUpdate=e},changeMenuUpdate:function(t,e){t.menuUpdate=e},changeTimingMenuUpdate:function(t,e){t.timingMenuUpdate=e},changeMsgUpdate:function(t,e){t.messageUpdate=e},changeSettingUpdate:function(t,e){t.settingUpdate=e}},actions:{}}),o={props:{sliderBar:Array},data:function(){return{sliderIndex:"0"}},mounted:function(){},methods:{handleSelect1:function(t,e){this.sliderIndex=t,this.$emit("select",t)}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"slider-bar"},[a("el-col",{attrs:{span:12}},[a("el-menu",{staticClass:"el-menu-vertical",attrs:{"default-active":t.sliderIndex,"background-color":"#68717a","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect1}},t._l(t.sliderBar,function(e,n){return a("el-menu-item",{key:n,attrs:{index:n.toString()}},[a("i",{class:t.sliderIndex==n?"active "+e.classname:e.classname}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))])])}))],1)],1)},staticRenderFns:[]};var r=a("VU/8")(o,l,!1,function(t){a("ZWod")},"data-v-71144f31",null).exports,c=a("mtWM"),u=a.n(c),m={props:{data_info:Object},data:function(){return{formData:{token:"mingxingshuo"}}},mounted:function(){i.state.gonghaoUpdate&&(this.formData=this.data_info)},methods:{cancel:function(){i.commit("changeShowTable",!0),i.commit("changeGonghaoUpdate",!1),this.$emit("showAgain")},resetForm:function(){this.formData={token:"mingxingshuo"}},submitForm:function(){var t=this;i.state.gonghaoUpdate?u()({url:"/conf/update",method:"post",data:{id:this.data_info._id,code:this.data_info.code,name:this.formData.name,appid:this.formData.appid,appsecret:this.formData.appsecret,token:this.formData.token}}).then(function(e){console.log(e),i.commit("changeShowTable",!0),i.commit("changeGonghaoUpdate",!1),t.$emit("showAgain")}):u()({url:"/conf/create",method:"post",data:this.formData}).then(function(e){i.commit("changeShowTable",!0),i.commit("changeGonghaoUpdate",!1),t.$emit("showAgain")})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-info"},[a("h2",{staticClass:"title"},[t._t("default")],2),t._v(" "),a("el-form",{staticClass:"form-group",attrs:{model:t.formData,"status-icon":"","label-width":"200px"}},[a("el-form-item",{attrs:{label:"公号名称",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"appid",prop:"appid"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.appid,callback:function(e){t.$set(t.formData,"appid",e)},expression:"formData.appid"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"appsecret",prop:"appsecret"}},[a("el-input",{model:{value:t.formData.appsecret,callback:function(e){t.$set(t.formData,"appsecret",e)},expression:"formData.appsecret"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"token",prop:"token"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.token,callback:function(e){t.$set(t.formData,"token",e)},expression:"formData.token"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm()}}},[t._v("提交")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:function(e){t.resetForm()}}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(m,d,!1,function(t){a("dKiV")},"data-v-1b894288",null).exports,p={props:{data_info:Object,code:Number},data:function(){return{settingData:{type:0,replyType:0},imgUrl:"",url:""}},mounted:function(){i.state.settingUpdate&&(this.settingData=this.data_info,this.url=this.data_info.url,this.imgUrl=this.data_info.showUrl)},methods:{changeType:function(){this.settingData.replyType=0,this.imgUrl=this.url=this.settingData.text=this.settingData.key=this.settingData.msgId=""},changeMessage:function(){this.settingData.msgId=this.imgUrl=this.url=""},handleAvatarSuccess:function(t,e){this.url="./public/uploads/"+t.filename,this.imgUrl="http://test.oorggt.top/uploads/"+t.filename},cancel:function(){i.commit("changeSettingTable",!0),i.commit("changeSettingUpdate",!1),this.$emit("showAgain")},resetForm:function(){this.settingData={type:0,replyType:0},this.imgUrl=this.url=""},submitForm:function(){var t=this;i.state.settingUpdate?u()({url:"/reply/update",method:"post",data:{code:this.code,replyType:this.settingData.replyType,id:this.settingData._id,type:this.settingData.type,text:this.settingData.text,url:this.url,showUrl:this.imgUrl,key:this.settingData.key,msgId:this.settingData.msgId}}).then(function(e){t.cancel()}):u()({url:"/reply/create",method:"post",data:{code:this.code,replyType:this.settingData.replyType,type:this.settingData.type,url:this.url,showUrl:this.imgUrl,text:this.settingData.text,key:this.settingData.key,msgId:this.settingData.msgId}}).then(function(e){t.cancel()})}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-setting"},[a("h2",{staticClass:"title"},[t._t("default")],2),t._v(" "),a("el-form",{staticClass:"form-group",attrs:{model:t.settingData,"status-icon":"","label-width":"200px"}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-radio-group",{on:{change:t.changeType},model:{value:t.settingData.type,callback:function(e){t.$set(t.settingData,"type",e)},expression:"settingData.type"}},[a("el-radio",{attrs:{label:0}},[t._v("文本")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("点击")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("关注")])],1)],1),t._v(" "),0==t.settingData.type?a("el-form-item",{attrs:{label:"用户回复文本",prop:"text"}},[a("el-input",{attrs:{type:"text"},model:{value:t.settingData.text,callback:function(e){t.$set(t.settingData,"text",e)},expression:"settingData.text"}})],1):1==t.settingData.type?a("el-form-item",{attrs:{label:"点击关键词",prop:"key"}},[a("el-input",{attrs:{type:"text"},model:{value:t.settingData.key,callback:function(e){t.$set(t.settingData,"key",e)},expression:"settingData.key"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"replyType"}},[a("el-radio-group",{on:{change:t.changeMessage},model:{value:t.settingData.replyType,callback:function(e){t.$set(t.settingData,"replyType",e)},expression:"settingData.replyType"}},[a("el-radio",{attrs:{label:0}},[t._v("文本/图文")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("图片")])],1)],1),t._v(" "),0==t.settingData.replyType?a("el-form-item",{attrs:{label:"消息模板ID",prop:"msgId"}},[a("el-input",{attrs:{type:"text"},model:{value:t.settingData.msgId,callback:function(e){t.$set(t.settingData,"msgId",e)},expression:"settingData.msgId"}})],1):t._e(),t._v(" "),1==t.settingData.replyType?a("el-form-item",{attrs:{label:"图片"}},[a("el-upload",{attrs:{"show-file-list":!1,enctype:"multipart/form-data",name:"imageFile",action:"http://test.oorggt.top/reply/upload","on-success":t.handleAvatarSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),t.imgUrl?a("img",{staticStyle:{"margin-top":"10px"},attrs:{src:t.imgUrl,alt:"",width:"200"}}):t._e()],1)],1):t._e(),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm()}}},[t._v("提交")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:function(e){t.resetForm()}}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var g={computed:{settingTable:function(){return i.state.settingTable}},components:{editSetting:a("VU/8")(p,f,!1,function(t){a("Rqve")},"data-v-caef6096",null).exports},props:{code:Number},data:function(){return{settingList:[],isCreate:!0,data_info:{}}},mounted:function(){this.showSettingList()},methods:{create:function(){this.isCreate=!0,i.commit("changeSettingTable",!1)},close:function(){i.commit("changeShowSetting",!1)},showSettingList:function(){var t=this;u()({url:"/reply",method:"get",params:{code:this.code}}).then(function(e){t.settingList=e.data.data})},showAgain:function(){this.showSettingList()},update:function(t){this.isCreate=!1,this.data_info=t,i.commit("changeSettingTable",!1),i.commit("changeSettingUpdate",!0)},remove:function(t,e){var a=this;this.$confirm("确认删除？").then(function(n){u()({url:"/reply/del",method:"get",params:{id:t._id}}).then(function(t){a.settingList.splice(e,1),a.$message({type:"success",message:t.data.success})})}).catch(function(t){a.$message({type:"info",message:"已取消删除"})})}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting"},[t.settingTable?a("div",[a("h2",{staticClass:"title"},[t._t("default")],2),t._v(" "),a("el-button",{staticClass:"create",attrs:{type:"primary"},on:{click:t.create}},[t._v("配置新规则")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"danger"},on:{click:t.close}},[t._v("关闭")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.settingList,border:""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"type",label:"类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(0===e.row.type?"文本":1===e.row.type?"点击":"关注")+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"text",label:"用户回复文本",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"key",label:"点击关键词",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"msgId",label:"消息msgId",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"showUrl",label:"图片",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.showUrl?a("img",{staticStyle:{width:"160px"},attrs:{src:e.row.showUrl,alt:""}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.update(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.remove(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1):a("edit-setting",{attrs:{data_info:t.data_info,code:t.code},on:{showAgain:t.showAgain}},[t._v(t._s(t.isCreate?"配置新规则":"规则修改"))])],1)},staticRenderFns:[]};var v={computed:{showTable:function(){return i.state.showTable},showSetting:function(){return i.state.showSetting}},components:{editInfo:h,setting:a("VU/8")(g,b,!1,function(t){a("/MkV")},"data-v-5ed09fdb",null).exports},data:function(){return{isCreate:!0,gonghaoList:[],data_info:{},code:null,name:""}},mounted:function(){this.showDataList()},methods:{create:function(){this.openPage()},update:function(t){this.openPage(),this.isCreate=!1,i.commit("changeGonghaoUpdate",!0),this.data_info=t},remove:function(t,e){var a=this;this.$confirm("确认删除？").then(function(n){u()({url:"/conf/del",method:"get",params:{id:t._id}}).then(function(t){a.gonghaoList.splice(e,1),a.$message({type:"success",message:t.data.success})})}).catch(function(t){})},openPage:function(){i.commit("changeShowTable",!1)},closePage:function(){i.commit("changeShowTable",!0)},showDataList:function(){var t=this;u()({url:"/conf",method:"get"}).then(function(e){t.gonghaoList=e.data.data})},showAgain:function(){this.showDataList()},reset:function(){var t=this;this.$confirm("确认重置code吗？").then(function(e){u()({url:"/conf/reset",method:"get"}).then(function(e){t.$message({type:"success",message:e.data.success})})}).catch(function(t){})},setting:function(t){this.code=t.code,this.name=t.name,i.commit("changeShowSetting",!0)}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tuoguan"},[t.showTable?a("div",{staticClass:"gh-table"},[t.showSetting?a("div",{staticClass:"setting-container"},[a("setting",{attrs:{code:t.code},on:{showAgain:t.showAgain}},[t._v(t._s(t.name))])],1):a("div",[a("el-button",{staticClass:"create",attrs:{type:"primary"},on:{click:t.create}},[t._v("接管新公号")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"warning"},on:{click:t.reset}},[a("span",{staticStyle:{color:"#000"}},[t._v("(慎用)")]),t._v("\n                重置code\n            ")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.gonghaoList,border:""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"code",label:"code",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"name",label:"公号名称",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"appid",label:"appid",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"appsecret",label:"appsecret",width:"170"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"token",label:"token",width:"85"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"EncodingAESKey",label:"EncodingAESKey",width:"210"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"url",label:"链接",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("http://test.oorggt.top/weichat/"+e.row.code))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.update(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){t.setting(e.row)}}},[t._v("配置")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.remove(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1)]):a("div",{staticClass:"edit-container"},[a("edit-info",{attrs:{data_info:t.isCreate?{token:"mingxingshuo"}:t.data_info},on:{showAgain:t.showAgain}},[t._v(t._s(t.isCreate?"接管新公号":"接管公号信息修改"))])],1)])},staticRenderFns:[]};var y=a("VU/8")(v,_,!1,function(t){a("/pIJ")},"data-v-39dbbd04",null).exports,w={props:{data_info:Object},data:function(){return{code:"",formData:{sub_button:[],type:"view"},values:[],has_sub_btn:!1,subItem:{type:"view"},radio:"url",isUpdate:!1,isUpdate1:!1}},mounted:function(){this.isUpdate=i.state.menuUpdate,console.log(this.data_info),i.state.menuUpdate&&(this.code=this.data_info.code,this.values=this.data_info.values,this.formData=this.values[0])},methods:{cancel:function(){i.commit("changeMenuTable",!0),i.commit("changeMenuUpdate",!1),this.$emit("showAgain")},resetForm:function(){this.formData={sub_button:[],type:"view"}},addBtn:function(){0==this.formData.sub_button.length&&delete this.formData.sub_button,this.values.push(this.formData),this.formData={sub_button:[],type:"view"}},submitForm:function(){var t=this;i.state.menuUpdate?u()({url:"/menu/update",method:"post",data:{id:this.data_info._id,code:this.code,values:this.values}}).then(function(e){t.values=[],t.formData={sub_button:[],type:"view"},i.commit("changeMenuUpdate",!1),i.commit("changeMenuTable",!0),t.$emit("showAgain")}):u()({url:"/menu/create",method:"post",data:{code:this.code,values:this.values}}).then(function(e){i.commit("changeMenuTable",!0),t.$emit("showAgain")})},addSubBtn:function(){this.formData.sub_button.push(this.subItem),this.subItem={type:"view"},this.has_sub_btn=!0},updateFirst:function(t){this.formData=t},updateSecond:function(t){this.has_sub_btn=!0,this.subItem=t,this.isUpdate1=!0},removeFirst:function(t){this.values.splice(t,1),this.formData={sub_button:[],type:"view"},console.log(this.formData)},removeSecond:function(t){this.formData.sub_button.splice(t,1),this.subItem={type:"view"},this.has_sub_btn=!0},saveFirst:function(){this.formData={sub_button:[],type:"view"}},saveSecond:function(){this.isUpdate1=!1,this.subItem={type:"view"},this.has_sub_btn=!1}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"title"},[t._t("default")],2),t._v(" "),a("div",{staticClass:"edit-info"},[a("el-form",{staticClass:"form-group",attrs:{model:t.formData,"status-icon":"","label-width":"200px"}},[a("el-form-item",{attrs:{label:"code",prop:"code"}},[a("el-input",{attrs:{type:"text"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"二级菜单",prop:"has_sub_btn"}},[a("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:t.has_sub_btn,callback:function(e){t.has_sub_btn=e},expression:"has_sub_btn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"一级菜单名称",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.has_sub_btn,expression:"!has_sub_btn"}],attrs:{label:"链接/关键词"}},[a("el-radio",{attrs:{label:"view"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},[t._v("view")]),t._v(" "),a("el-radio",{attrs:{label:"click"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},[t._v("click")])],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.has_sub_btn&&"view"==t.formData.type,expression:"!has_sub_btn && formData.type == 'view'"}],attrs:{label:"一级菜单链接",prop:"url"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.has_sub_btn&&"click"==t.formData.type,expression:"!has_sub_btn && formData.type == 'click'"}],attrs:{label:"一级菜单关键字",prop:"url"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.key,callback:function(e){t.$set(t.formData,"key",e)},expression:"formData.key"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn,expression:"has_sub_btn"}],attrs:{label:"二级菜单名称",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.subItem.name,callback:function(e){t.$set(t.subItem,"name",e)},expression:"subItem.name"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn,expression:"has_sub_btn"}],attrs:{label:"链接/关键词"}},[a("el-radio",{attrs:{label:"view"},model:{value:t.subItem.type,callback:function(e){t.$set(t.subItem,"type",e)},expression:"subItem.type"}},[t._v("view")]),t._v(" "),a("el-radio",{attrs:{label:"click"},model:{value:t.subItem.type,callback:function(e){t.$set(t.subItem,"type",e)},expression:"subItem.type"}},[t._v("click")])],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn&&"view"==t.subItem.type,expression:"has_sub_btn && subItem.type == 'view'"}],attrs:{label:"二级菜单链接",prop:"url"}},[a("el-input",{attrs:{type:"text"},model:{value:t.subItem.url,callback:function(e){t.$set(t.subItem,"url",e)},expression:"subItem.url"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn&&"click"==t.subItem.type,expression:"has_sub_btn && subItem.type == 'click'"}],attrs:{label:"二级菜单关键词",prop:"key"}},[a("el-input",{attrs:{type:"text"},model:{value:t.subItem.key,callback:function(e){t.$set(t.subItem,"key",e)},expression:"subItem.key"}})],1),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn&&!t.isUpdate1,expression:"has_sub_btn && !isUpdate1"}],staticStyle:{"margin-left":"200px"},attrs:{type:"primary"},on:{click:function(e){t.addSubBtn()}}},[t._v("添加二级菜单")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isUpdate1,expression:"isUpdate1"}],staticStyle:{"margin-left":"200px"},attrs:{type:"success"},on:{click:function(e){t.saveSecond()}}},[t._v("保存")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn,expression:"has_sub_btn"}],staticClass:"line"}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"200px"},attrs:{type:"primary"},on:{click:function(e){t.addBtn()}}},[t._v("添加一级菜单")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isUpdate,expression:"isUpdate"}],staticStyle:{"margin-left":"30px"},attrs:{type:"success"},on:{click:function(e){t.saveFirst()}}},[t._v("保存")]),t._v(" "),a("el-table",{staticStyle:{width:"100%",margin:"30px"},attrs:{data:t.values,border:""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"一级菜单名称",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.name?e.row.name:"~")+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.updateFirst(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.removeFirst(e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm()}}},[t._v("提交")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1)],1)],1),t._v(" "),a("div",{staticClass:"sub-btn-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.formData.sub_button}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"name",label:"二级菜单名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.updateSecond(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.removeSecond(e.$index)}}},[t._v("删除")])]}}])})],1)],1)])},staticRenderFns:[]};var k={components:{editInfo:a("VU/8")(w,x,!1,function(t){a("h0r6")},"data-v-505748fd",null).exports},computed:{showMenu:function(){return i.state.showMenu},menuUpdate:function(){return i.state.menuUpdate}},data:function(){return{isCreate:!0,menuList:[],data_info:{},dialogVisible:!1,menuIndex:""}},mounted:function(){this.showMenuList()},methods:{create:function(){i.commit("changeMenuTable",!1)},tap:function(t){this.isCreate=!1,this.dialogVisible=!0,i.commit("changeMenuUpdate",!0),this.data_info=t},showMenuList:function(){var t=this;u()({url:"/menu/",method:"get"}).then(function(e){t.menuList=e.data.data})},updateOne:function(){i.commit("changeMenuUpdate",!0),this.dialogVisible=!1,i.commit("changeMenuTable",!1)},deleteOne:function(){var t=this;u()({url:"/menu/del",method:"get",params:{id:this.data_info._id}}).then(function(e){var a=t;a.dialogVisible=!1,i.commit("changeMenuUpdate",!1),t.$confirm("确认删除？").then(function(t){a.showMenuList(),a.$message({type:"success",message:e.data.success})}).catch(function(t){})})},showAgain:function(){this.showMenuList()}}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu-setting"},[t.showMenu?a("div",{staticClass:"menu-table"},[a("el-button",{staticClass:"create",attrs:{type:"primary"},on:{click:t.create}},[t._v("配置新菜单栏")]),t._v(" "),a("br"),t._v(" "),t._l(t.menuList,function(e,n){return a("el-button",{key:n,attrs:{type:"warning",size:"mini"},on:{click:function(a){t.tap(e)}}},[t._v(t._s(e.code))])})],2):a("edit-info",{attrs:{data_info:t.isCreate?{}:t.data_info},on:{showAgain:t.showAgain}},[t._v(t._s(t.isCreate?"配置新菜单栏":"修改菜单栏配置"))]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("您打算进行那种操作？")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.updateOne}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.deleteOne}},[t._v("删除")])],1)])],1)},staticRenderFns:[]};var S=a("VU/8")(k,D,!1,function(t){a("YVfP")},"data-v-8b603e5e",null).exports,U={props:{data_info:Object},data:function(){return{type:"0",subForm:{},picMessageData:[],contents:[],description:"",imgUrl:"",id:"",index:0}},mounted:function(){i.state.messageUpdate&&(this.type=this.data_info.type.toString(),this.description=this.data_info.description,this.picMessageData=this.data_info.contents,this.subForm=this.picMessageData[0],this.imgUrl=this.subForm.picurl,this.id=this.data_info._id)},methods:{onSave:function(){var t=this;i.state.messageUpdate?(""!=this.description?this.contents.push({description:this.description}):this.contents=this.picMessageData,u()({url:"/msg/update",method:"post",data:{id:this.id,type:this.type,description:this.description,contents:this.contents}}).then(function(e){t.close()})):(""!=this.description?this.contents.push({description:this.description}):this.contents=this.picMessageData,u()({url:"/msg/create",method:"post",data:{type:this.type,description:this.description,contents:this.contents}}).then(function(e){t.close()}))},addOne:function(){this.subForm.picurl=this.imgUrl,this.picMessageData.push(this.subForm),this.subForm={}},saveOne:function(){this.subForm.picurl=this.imgUrl,this.picMessageData.splice(this.index,1,this.subForm),this.subForm={},this.imgUrl=""},change:function(){this.description="",this.subForm={}},handleAvatarSuccess:function(t,e){this.imgUrl="http://test.oorggt.top/uploads/"+t.filename},updateOne:function(t,e){this.index=t,this.subForm=e,this.imgUrl=e.picurl},deleteOne:function(t,e){var a=this;this.$confirm("此操作删除此条客服消息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.state.messageUpdate&&a.picMessageData.length<=1?a.$message({type:"info",message:" 列表中最少展示一条数据"}):(a.picMessageData.splice(t,1),a.$message({type:"success",message:" 删除成功"}))}).catch(function(){a.$message({type:"warning",message:"已取消删除"})})},cancel:function(){this.close()},reset:function(){this.type="0",this.imgUrl=this.description="",this.subForm={},this.picMessageData=[]},close:function(){i.commit("changeMsgTable",!0),i.commit("changeMsgUpdate",!1),this.$emit("showAgain"),this.reset()}}},M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-message"},[a("el-form",{ref:"form",attrs:{"label-width":"80px",size:"mini"}},[a("el-form-item",[a("h2",[t._t("default")],2)]),t._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-radio-group",{attrs:{size:"medium"},on:{change:t.change},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("el-radio",{attrs:{border:"",label:"0"}},[t._v("文本")]),t._v(" "),a("el-radio",{attrs:{border:"",label:"1"}},[t._v("图文")])],1)],1),t._v(" "),1==t.type?a("el-form",{ref:"subForm",attrs:{model:t.subForm,"label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"图片"}},[a("el-upload",{attrs:{"show-file-list":!1,enctype:"multipart/form-data",name:"imageFile",action:"http://test.oorggt.top/reply/upload","on-success":t.handleAvatarSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),t.imgUrl?a("img",{staticStyle:{"margin-top":"10px"},attrs:{src:t.imgUrl,alt:"",width:"200"}}):t._e()],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{staticStyle:{width:"500px"},model:{value:t.subForm.title,callback:function(e){t.$set(t.subForm,"title",e)},expression:"subForm.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"链接"}},[a("el-input",{staticStyle:{width:"500px"},model:{value:t.subForm.url,callback:function(e){t.$set(t.subForm,"url",e)},expression:"subForm.url"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"详细信息",prop:"description"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea"},model:{value:t.subForm.description,callback:function(e){t.$set(t.subForm,"description",e)},expression:"subForm.description"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"large"}},[a("el-button",{attrs:{type:"success"},on:{click:t.addOne}},[t._v("添加")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.saveOne}},[t._v("保存")])],1),t._v(" "),a("el-form-item",{attrs:{label:"图文消息",prop:"pic_message"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.picMessageData,border:""}},[a("el-table-column",{attrs:{prop:"title",label:"标题",width:"100"}}),t._v(" "),a("el-table-column",{staticStyle:{"margin-top":"30px"},attrs:{prop:"picurl",label:"图片",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.picurl,width:"100%"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"url",label:"链接",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"description",label:"详细信息",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.updateOne(e.$index,e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticClass:"send-message",attrs:{size:"small",type:"danger"},on:{click:function(a){t.deleteOne(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1)],1):0==t.type?a("el-form-item",{attrs:{label:"详细信息",prop:"description"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{size:"large"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSave}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.cancel}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var I={computed:{showMsg:function(){return i.state.showMsg},messageUpdate:function(){return i.state.messageUpdate}},components:{editMessage:a("VU/8")(U,M,!1,function(t){a("8CGX")},"data-v-e0521ce4",null).exports},data:function(){return{tableData:[],desShow:"",isCreate:!0,data_info:{}}},mounted:function(){this.showMessage()},methods:{create:function(){i.commit("changeMsgTable",!1),this.isCreate=!0},copyMessage:function(t){var e=this;u()({url:"/msg/create",method:"post",data:{contents:t.contents,type:t.type,description:t.description}}).then(function(t){e.showMessage(),console.log(t)})},showMessage:function(){var t=this;u()({url:"/msg",method:"get",parmas:{},withCredentials:!0}).then(function(e){0!=e.data.data.length&&(t.tableData=e.data.data)})},showAgain:function(){this.showMessage()},updateMessage:function(t,e){i.commit("changeMsgTable",!1),i.commit("changeMsgUpdate",!0),this.isCreate=!1,this.data_info=e},deleteMessage:function(t,e){var a=this;this.$confirm("此操作删除此条客服消息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){u()({url:"/msg/del",method:"get",params:{id:t._id}}).then(function(t){a.$message({type:"success",message:t.data.success}),a.showMessage(),a.tableData.splice(e,1)})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message"},[t.showMsg?a("div",[a("el-button",{staticClass:"create",attrs:{type:"primary"},on:{click:t.create}},[t._v("添加新消息")]),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"msgId","header-align":"center",align:"center",label:"msgId",width:"65"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型","header-align":"center",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(0==e.row.type?"文本消息":"图文消息")+t._s(e.row.contents.length>1?"(多)":""))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"contents[0].title","header-align":"center",align:"center",label:"标题",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contents[0].description","header-align":"center",align:"center",label:"详细信息",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contents[0].url","header-align":"center",align:"center",label:"链接",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contents[0].picurl","header-align":"center",align:"center",label:"图片",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.contents[0].picurl?a("img",{attrs:{src:e.row.contents[0].picurl,width:"100%"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(a){t.copyMessage(e.row)}}},[t._v("复制")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.updateMessage(e.$index,e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){t.deleteMessage(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1):a("edit-message",{attrs:{data_info:t.data_info},on:{showAgain:t.showAgain}},[t._v(t._s(t.isCreate?"新增客服消息":"编辑客服消息"))])],1)},staticRenderFns:[]};var T=a("VU/8")(I,$,!1,function(t){a("1lW8")},"data-v-d4ab67e2",null).exports,C={props:{data_info:Object},data:function(){return{title:"",formData:{sub_button:[],type:"view"},values:[],has_sub_btn:!1,subItem:{type:"view"},radio:"url",isUpdate:!1,isUpdate1:!1,codes:[],gonghaoList:[],time:new Date}},mounted:function(){this.getCodes(),this.isUpdate=i.state.timingMenuUpdate,console.log(this.data_info),i.state.timingMenuUpdate&&(this.codes=this.data_info.codes,this.title=this.data_info.title,this.time=this.data_info.time,this.values=this.data_info.values,this.formData=this.values[0])},methods:{getCodes:function(){var t=this;u()({url:"/conf",method:"get"}).then(function(e){t.gonghaoList=e.data.data})},cancel:function(){i.commit("changeTimingMenuTable",!0),i.commit("changeTimingMenuUpdate",!1),this.$emit("showAgain")},resetForm:function(){this.formData={sub_button:[],type:"view"}},addBtn:function(){0==this.formData.sub_button.length&&delete this.formData.sub_button,this.values.push(this.formData),this.formData={sub_button:[],type:"view"}},submitForm:function(){var t=this;i.state.timingMenuUpdate?u()({url:"/menuTime/update",method:"post",data:{id:this.data_info._id,codes:this.codes,title:this.title,time:this.time,values:this.values}}).then(function(e){t.values=[],t.formData={sub_button:[],type:"view"},i.commit("changeTimingMenuUpdate",!1),i.commit("changeTimingMenuTable",!0),t.$emit("showAgain")}):u()({url:"/menuTime/create",method:"post",data:{codes:this.codes,title:this.title,time:this.time,values:this.values}}).then(function(e){i.commit("changeTimingMenuTable",!0),t.$emit("showAgain")})},addSubBtn:function(){this.formData.sub_button.push(this.subItem),this.subItem={type:"view"},this.has_sub_btn=!0},updateFirst:function(t){this.formData=t},updateSecond:function(t){this.has_sub_btn=!0,this.subItem=t,this.isUpdate1=!0},removeFirst:function(t){this.values.splice(t,1),this.formData={sub_button:[],type:"view"},console.log(this.formData)},removeSecond:function(t){this.formData.sub_button.splice(t,1),this.subItem={type:"view"},this.has_sub_btn=!0},saveFirst:function(){this.formData={sub_button:[],type:"view"}},saveSecond:function(){this.isUpdate1=!1,this.subItem={type:"view"},this.has_sub_btn=!1}}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"title"},[t._t("default")],2),t._v(" "),a("div",{staticClass:"edit-info"},[a("el-form",{staticClass:"form-group",attrs:{model:t.formData,"status-icon":"","label-width":"200px"}},[a("el-form-item",{attrs:{label:"公号",prop:"codes"}},[a("el-checkbox-group",{model:{value:t.codes,callback:function(e){t.codes=e},expression:"codes"}},t._l(t.gonghaoList,function(e,n){return a("el-checkbox",{key:n,attrs:{label:e.code,name:"codes"}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{type:"text"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"定时时间"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"二级菜单",prop:"has_sub_btn"}},[a("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:t.has_sub_btn,callback:function(e){t.has_sub_btn=e},expression:"has_sub_btn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"一级菜单名称",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.has_sub_btn,expression:"!has_sub_btn"}],attrs:{label:"链接/关键词"}},[a("el-radio",{attrs:{label:"view"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},[t._v("view")]),t._v(" "),a("el-radio",{attrs:{label:"click"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},[t._v("click")])],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.has_sub_btn&&"view"==t.formData.type,expression:"!has_sub_btn && formData.type == 'view'"}],attrs:{label:"一级菜单链接",prop:"url"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.has_sub_btn&&"click"==t.formData.type,expression:"!has_sub_btn && formData.type == 'click'"}],attrs:{label:"一级菜单关键字",prop:"url"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.key,callback:function(e){t.$set(t.formData,"key",e)},expression:"formData.key"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn,expression:"has_sub_btn"}],attrs:{label:"二级菜单名称",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.subItem.name,callback:function(e){t.$set(t.subItem,"name",e)},expression:"subItem.name"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn,expression:"has_sub_btn"}],attrs:{label:"链接/关键词"}},[a("el-radio",{attrs:{label:"view"},model:{value:t.subItem.type,callback:function(e){t.$set(t.subItem,"type",e)},expression:"subItem.type"}},[t._v("view")]),t._v(" "),a("el-radio",{attrs:{label:"click"},model:{value:t.subItem.type,callback:function(e){t.$set(t.subItem,"type",e)},expression:"subItem.type"}},[t._v("click")])],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn&&"view"==t.subItem.type,expression:"has_sub_btn && subItem.type == 'view'"}],attrs:{label:"二级菜单链接",prop:"url"}},[a("el-input",{attrs:{type:"text"},model:{value:t.subItem.url,callback:function(e){t.$set(t.subItem,"url",e)},expression:"subItem.url"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn&&"click"==t.subItem.type,expression:"has_sub_btn && subItem.type == 'click'"}],attrs:{label:"二级菜单关键词",prop:"key"}},[a("el-input",{attrs:{type:"text"},model:{value:t.subItem.key,callback:function(e){t.$set(t.subItem,"key",e)},expression:"subItem.key"}})],1),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn&&!t.isUpdate1,expression:"has_sub_btn && !isUpdate1"}],staticStyle:{"margin-left":"200px"},attrs:{type:"primary"},on:{click:function(e){t.addSubBtn()}}},[t._v("添加二级菜单")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isUpdate1,expression:"isUpdate1"}],staticStyle:{"margin-left":"200px"},attrs:{type:"success"},on:{click:function(e){t.saveSecond()}}},[t._v("保存")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn,expression:"has_sub_btn"}],staticClass:"line"}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"200px"},attrs:{type:"primary"},on:{click:function(e){t.addBtn()}}},[t._v("添加一级菜单")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isUpdate,expression:"isUpdate"}],staticStyle:{"margin-left":"30px"},attrs:{type:"success"},on:{click:function(e){t.saveFirst()}}},[t._v("保存")]),t._v(" "),a("el-table",{staticStyle:{width:"100%",margin:"30px"},attrs:{data:t.values,border:""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"一级菜单名称",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.name?e.row.name:"~")+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.updateFirst(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.removeFirst(e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm()}}},[t._v("提交")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1)],1)],1),t._v(" "),a("div",{staticClass:"sub-btn-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.formData.sub_button}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"name",label:"二级菜单名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.updateSecond(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.removeSecond(e.$index)}}},[t._v("删除")])]}}])})],1)],1)])},staticRenderFns:[]};var L={components:{editInfo:a("VU/8")(C,F,!1,function(t){a("Gzzh")},"data-v-073a4fe2",null).exports},computed:{showTimingMenu:function(){return i.state.showTimingMenu},timingMenuUpdate:function(){return i.state.timingMenuUpdate}},data:function(){return{isCreate:!0,menuList:[],data_info:{},menuIndex:""}},mounted:function(){this.showMenuList()},methods:{create:function(){i.commit("changeTimingMenuTable",!1)},showMenuList:function(){var t=this;u()({url:"/menuTime/",method:"get"}).then(function(e){for(var a=0;a<e.data.data.length;a++){var n=e.data.data[a].time;n=t.formatDate(n),e.data.data[a].time=n}t.menuList=e.data.data})},updateOne:function(t){this.isCreate=!1,this.data_info=t,i.commit("changeTimingMenuUpdate",!0),i.commit("changeTimingMenuTable",!1)},deleteOne:function(t,e){var a=this;u()({url:"/menuTime/del",method:"get",params:{id:t._id}}).then(function(t){var e=a;i.commit("changeTimingMenuUpdate",!1),a.$confirm("确认删除？").then(function(a){e.showMenuList(),e.$message({type:"success",message:t.data.success})}).catch(function(t){})})},showAgain:function(){this.showMenuList()},formatDate:function(t){var e=t.getFullYear(),a=t.getMonth()+1,n=t.getDate(),s=t.getHours(),i=t.getMinutes(),o=t.getSeconds();return e+"-"+(a<10?"0"+a:a)+"-"+(n<10?"0"+n:n)+" "+(s<10?"0"+s:s)+":"+(i<10?"0"+i:i)+":"+(o<10?"0"+o:o)}}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu-setting"},[t.showTimingMenu?a("div",[a("el-button",{staticClass:"create",attrs:{type:"primary"},on:{click:t.create}},[t._v("配置新定时菜单栏")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.menuList,border:""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"title",label:"标题"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"time",label:"定时时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.time)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.updateOne(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.deleteOne(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1):a("edit-info",{attrs:{data_info:t.isCreate?{}:t.data_info},on:{showAgain:t.showAgain}},[t._v(t._s(t.isCreate?"配置新定时菜单栏":"修改定时菜单栏配置"))])],1)},staticRenderFns:[]};var V={name:"ghManagement",components:{sliderBar:r,tuoguan:y,sendMessage:T,menuSetting:S,timingMenu:a("VU/8")(L,N,!1,function(t){a("3eTs")},"data-v-0af5a3f8",null).exports},data:function(){return{showIndex:0,sliderBarList:[{classname:"el-icon-menu",title:"公号托管"},{classname:"el-icon-setting",title:"设置菜单栏"},{classname:"el-icon-message",title:"回复消息"},{classname:"el-icon-setting",title:"设置定时菜单栏"}]}},methods:{select:function(t){this.showIndex=t,this.reset()},reset:function(){i.commit("changeShowTable",!0),i.commit("changeMenuTable",!0),i.commit("changeMsgTable",!0),i.commit("changeShowSetting",!1),i.commit("changeSettingTable",!0),i.commit("changeGonghaoUpdate",!1),i.commit("changeMenuUpdate",!1),i.commit("changeMsgUpdate",!1),i.commit("changeSettingUpdate",!1)}}},z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gh-management"},[a("slider-bar",{attrs:{sliderBar:t.sliderBarList},on:{select:t.select}}),t._v(" "),0==t.showIndex?a("tuoguan"):t._e(),t._v(" "),1==t.showIndex?a("menu-setting"):t._e(),t._v(" "),2==t.showIndex?a("send-message"):t._e(),t._v(" "),3==t.showIndex?a("timing-menu"):t._e()],1)},staticRenderFns:[]};var A=a("VU/8")(V,z,!1,function(t){a("lFp8")},"data-v-7d0ed734",null).exports,O={data:function(){return{name:"",content:"",gonghao:"",code:"",qr_code_url:"",gonghaoList:[],tableData:[],isUpdate:!1,isShow:!1,id:"",tagName:"",tagVal:"",tagList:[],tagId:""}},mounted:function(){this.showList(),this.getGonghaoList(),this.showTagList()},methods:{handleClose:function(){this.tagName=""},showTagList:function(){var t=this;u()({url:"/tag",method:"get"}).then(function(e){t.tagList=e.data.data})},change:function(){var t=this;""==this.tagVal?this.$message.error("标签名不能为空"):u()({url:"/tag",method:"post",data:{name:this.tagVal}}).then(function(e){t.tagName=t.tagVal,t.tagId=e.data.data._id,t.tagVal="",t.showTagList()})},select:function(t){var e=this;u()({url:"/tag",method:"post",data:{name:t.name}}).then(function(t){e.tagId=t.data.data._id,e.tagName=t.data.data.name})},add:function(){this.isShow=!0},cancel:function(){this.name=this.content=this.code="",this.isShow=!1},create:function(){var t=this;u()({url:"/qr_code/create",method:"post",data:{name:this.name,content:this.content,code:this.code,tagId:this.tagId}}).then(function(e){""==e.data.data?t.$message.error("创建失败"):(console.log(e.data),t.$message({type:"success",message:"创建成功"}),t.showList(),t.name=t.content=t.code="",t.isShow=!1)})},getGonghaoList:function(){var t=this;u()({url:"/qr_code/get_code",method:"get"}).then(function(e){t.gonghaoList=e.data.codes})},showList:function(){var t=this;u()({url:"/qr_code/show",method:"get"}).then(function(e){for(var a=e.data.codes,n=e.data.data,s=0,i=a.length;s<i;s++)for(var o=0,l=n.length;o<l;o++)a[s].code==n[o].code&&(n[o].gonghao=a[s].name);t.tableData=n})},update:function(t){var e=this;this.isUpdate=!0,this.name=t.name,this.content=t.content,this.code=t.code,this.qr_code_url=t.qr_code_url,this.isShow=!0,this.id=t._id,this.tagId=t.tagId,u()({url:"/tag/get_name",method:"get",params:{tagId:this.tagId}}).then(function(t){e.tagName=t.data.data.name})},deleteOne:function(t){var e=this;u()({url:"/qr_code/deleteOne",method:"post",data:{id:t._id}}).then(function(t){e.$message({type:"success",message:t.data.success}),""==t.data.data?e.tableData=[]:e.showList()})},save:function(){var t=this;u()({url:"/qr_code/update",method:"post",data:{id:this.id,name:this.name,content:this.content,code:this.code,tagId:""==this.tagName?"":this.tagId}}).then(function(e){""==e.data.data?t.$message.error("修改失败"):(t.$message({type:"success",message:"修改成功"}),t.showList(),t.name=t.content=t.code="",t.isShow=!1)})}}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-message"},[t.isShow?t._e():a("el-button",{staticStyle:{"margin-bottom":"30px"},attrs:{type:"primary"},on:{click:function(e){t.add()}}},[t._v("新增参数二维码")]),t._v(" "),t.isShow?t._e():a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"二维码名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"content",label:"关注后回复内容"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gonghao",label:"公号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"qr_code_url",label:"二维码",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"qr_img",attrs:{src:t.row.qr_code_url}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.update(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.deleteOne(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.isShow?a("div",{staticClass:"wrapper"},[a("h3",{staticClass:"wrap-title"},[t._v("添加/修改二维码")]),t._v(" "),a("el-form",{attrs:{"label-width":"120px",size:"mini"}},[a("el-form-item",{attrs:{label:"二维码名称",prop:"name"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"关注回复内容",prop:"content"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",rows:"5"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"选择标签",prop:"tagName"}},[a("div",{staticClass:"tag-name"},[t.tagName?a("el-tag",{attrs:{closable:"",size:"mini"},on:{close:function(e){t.handleClose()}},model:{value:t.tagName,callback:function(e){t.tagName=e},expression:"tagName"}},[t._v(t._s(t.tagName))]):t._e(),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tagVal,expression:"tagVal"}],attrs:{type:"text"},domProps:{value:t.tagVal},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.change(e):null},input:function(e){e.target.composing||(t.tagVal=e.target.value)}}})],1)]),t._v(" "),t.tagList!=[]?a("el-form-item",[a("ul",{staticClass:"tag-list"},t._l(t.tagList,function(e,n){return a("li",{key:n,on:{click:function(a){t.select(e)}}},[a("el-tag",[t._v(t._s(e.name))])],1)}))]):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"选择公号"}},[a("el-radio-group",{model:{value:t.code,callback:function(e){t.code=e},expression:"code"}},t._l(t.gonghaoList,function(e,n){return a("el-radio",{key:n,staticStyle:{margin:"10px"},attrs:{disabled:t.isUpdate,label:e.code}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("el-form-item",{attrs:{size:"large"}},[t.isUpdate?a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]):a("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("立即生成")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:t.cancel}},[t._v("取消")])],1)],1)],1):t._e()],1)},staticRenderFns:[]};var E={data:function(){return{tagList:[],tagName:""}},mounted:function(){this.showTagList()},methods:{showTagList:function(){var t=this;u()({url:"/tag",method:"get"}).then(function(e){console.log(e.data.data),t.tagList=e.data.data})},addTag:function(){var t=this;u()({url:"/tag",method:"post",data:{name:this.tagName}}).then(function(e){t.$message({type:"success",message:"添加成功"}),t.showTagList()})},deleteTag:function(t){var e=this,a=t._id;u()({url:"/tag/"+a,method:"delete"}).then(function(t){e.$message({type:"success",message:"删除成功"}),e.showTagList()})}}},j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-input",{staticStyle:{width:"200px","margin-right":"30px"},model:{value:t.tagName,callback:function(e){t.tagName=e},expression:"tagName"}}),t._v(" "),a("el-button",{staticStyle:{"margin-bottom":"30px"},attrs:{type:"primary"},on:{click:function(e){t.addTag()}}},[t._v("新增标签")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tagList,border:""}},[a("el-table-column",{attrs:{prop:"_id",label:"序号","header-align":"center",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"标签名称","header-align":"center",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.deleteTag(e.row)}}},[t._v("删除")])]}}])})],1)],1)},staticRenderFns:[]},R={name:"ghManagement",components:{sliderBar:r,qrCode:a("VU/8")(O,B,!1,function(t){a("GOTj")},"data-v-31bcf6df",null).exports,tagManagement:a("VU/8")(E,j,!1,null,null,null).exports},data:function(){return{showIndex:0,sliderBarList:[{classname:"el-icon-picture-outline",title:"参数二维码"},{classname:"el-icon-rank",title:"标签管理"}]}},methods:{select:function(t){this.showIndex=t}}},q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"novel"},[a("slider-bar",{attrs:{sliderBar:t.sliderBarList},on:{select:t.select}}),t._v(" "),a("div",{staticClass:"container"},[0==t.showIndex?a("qr-code"):t._e(),t._v(" "),1==t.showIndex?a("tag-management"):t._e()],1)],1)},staticRenderFns:[]};var G=a("VU/8")(R,q,!1,function(t){a("FV/9")},"data-v-47b6182f",null).exports,P={data:function(){return{dataList:[],gonghao:"1",codes:[],activeModel:"0",obj:{}}},mounted:function(){this.getCodes(),this.search()},methods:{drawLine:function(){for(var t=this.$echarts.init(document.getElementById("myChart")),e=[],a=[],n=[],s=[],i=this.dataList,o=0;o<i.length;o++)e.unshift(i[o].date),a.unshift(i[o].subscribe_count),n.unshift(i[o].unsubscribe_count),s.unshift(i[o].growth);t.setOption({title:{text:"今日新增用户统计折线图"},tooltip:{trigger:"axis"},legend:{data:["今日新增关注用户数","今日新增中的取消关注用户数","今日新增用户净增长数"]},toolbox:{show:!0,feature:{mark:{show:!0},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!1,xAxis:[{type:"category",boundaryGap:!1,data:e}],yAxis:[{type:"value"}],series:[{name:"今日新增关注用户数",type:"line",data:a},{name:"今日新增中的取消关注用户数",type:"line",data:n},{name:"今日新增用户净增长数",type:"line",data:s}]})},search:function(){var t=this;this.dataList=[],this.activeModel="0",this.obj={},this.$message({type:"info",message:"查询数据库需要几秒钟的时间，请耐心等待"});var e=this.gonghao;u()({url:"/statistics/group/"+e,method:"get"}).then(function(e){t.dataList=e.data.data.list,t.obj.name=e.data.data.name,t.obj.subscribe_count=e.data.data.subscribe_count,t.obj.unsubscribe_count=e.data.data.unsubscribe_count,t.obj.growth=e.data.data.growth,t.drawLine(),t.chartShow=!0})},getCodes:function(){var t=this;u()({url:"/statistics/get_code",method:"get"}).then(function(e){t.codes=e.data.codes})}}},W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fans"},[a("el-collapse",{model:{value:t.activeModel,callback:function(e){t.activeModel=e},expression:"activeModel"}},[a("el-collapse-item",{attrs:{name:"1"}},[a("template",{slot:"title"},[a("span",{staticClass:"select-gonghao"},[t._v("选择公号")])]),t._v(" "),a("el-radio-group",{attrs:{size:"mini"},model:{value:t.gonghao,callback:function(e){t.gonghao=e},expression:"gonghao"}},t._l(t.codes,function(e,n){return a("el-radio",{key:n,staticClass:"gonghao",attrs:{label:e.code,border:""}},[t._v(t._s(e.name))])})),t._v(" "),a("el-button",{staticStyle:{"margin-top":"30px"},attrs:{type:"primary",plain:""},on:{click:function(e){t.search()}}},[t._v("确定")])],2)],1),t._v(" "),a("div",{staticClass:"title"},[a("span",{staticClass:"name"},[t._v("公号名称： "),a("span",[t._v(t._s(t.obj.name))])]),a("br"),t._v(" "),a("span",[t._v("今日总新增关注用户数： "),a("span",[t._v(t._s(t.obj.subscribe_count))])]),t._v(" "),a("span",[t._v("今日总新增中的取消关注用户数： "),a("span",[t._v(t._s(t.obj.unsubscribe_count))])]),t._v(" "),a("span",[t._v("今日总新增用户净增长数： "),a("span",[t._v(t._s(t.obj.growth))])])]),t._v(" "),a("el-table",{staticClass:"el-fade-in-linear",staticStyle:{width:"100%","margin-top":"10px"},attrs:{stripe:"",height:"400","show-summary":"",data:t.dataList,border:""}},[a("el-table-column",{attrs:{align:"center","header-align":"center",prop:"date",label:"时间"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","header-align":"center",prop:"subscribe_count",label:"今日新增关注用户数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","header-align":"center",prop:"unsubscribe_count",label:"今日新增中的取消关注用户数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","header-align":"center",prop:"growth",label:"今日新增用户净增长数"}})],1),t._v(" "),a("div",{staticClass:"my-chart",style:{width:"100%",height:"500px"},attrs:{id:"myChart"}})],1)},staticRenderFns:[]};var K={name:"ghManagement",components:{sliderBar:r,fans:a("VU/8")(P,W,!1,function(t){a("az+1")},"data-v-38fcf30a",null).exports},data:function(){return{showIndex:0,sliderBarList:[{classname:"el-icon-menu",title:"粉丝统计"}]}},methods:{select:function(t){this.showIndex=t}}},Y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"gh-management"},[e("slider-bar",{attrs:{sliderBar:this.sliderBarList},on:{select:this.select}}),this._v(" "),0==this.showIndex?e("fans"):this._e()],1)},staticRenderFns:[]};var H={components:{ghManagement:A,novel:G,dataStatistics:a("VU/8")(K,Y,!1,function(t){a("yFqt")},"data-v-09dec34b",null).exports},data:function(){return{activeIndex:"1"}},methods:{handleSelect:function(t,e){this.activeIndex=t,this.reset()},reset:function(){i.commit("changeShowTable",!0),i.commit("changeMenuTable",!0),i.commit("changeMsgTable",!0),i.commit("changeShowSetting",!1),i.commit("changeSettingTable",!0),i.commit("changeGonghaoUpdate",!1),i.commit("changeMenuUpdate",!1),i.commit("changeMsgUpdate",!1),i.commit("changeSettingUpdate",!1),i.commit("changeAddSwitch",!1)}}},J={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"nav"},[a("h2",{staticClass:"logo"},[t._v("后台管理系统")]),t._v(" "),a("el-menu",{staticClass:"el-menu",attrs:{"default-active":t.activeIndex,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:"1"}},[t._v("公号管理")]),t._v(" "),a("el-menu-item",{attrs:{index:"2"}},[t._v("小说管理")]),t._v(" "),a("el-menu-item",{attrs:{index:"3"}},[t._v("数据统计")])],1)],1),t._v(" "),"1"==t.activeIndex?a("gh-management"):t._e(),t._v(" "),"2"==t.activeIndex?a("novel"):t._e(),t._v(" "),"3"==t.activeIndex?a("data-statistics"):t._e()],1)},staticRenderFns:[]};var X=a("VU/8")(H,J,!1,function(t){a("Vojp")},"data-v-8b95cc0c",null).exports,Z=a("/ocq");n.default.use(Z.a);var Q=new Z.a({mode:"history",base:Object({NODE_ENV:"production"}).BASE_URL,routes:[{path:"/management",name:"home",component:X}]}),tt=a("zL8q"),et=a.n(tt);a("tvR6");n.default.use(et.a);a("j1ja");n.default.config.productionTip=!1,new n.default({router:Q,store:i,render:function(t){return t(X)}}).$mount("#app")},Rqve:function(t,e){},Vojp:function(t,e){},YVfP:function(t,e){},ZWod:function(t,e){},"az+1":function(t,e){},dKiV:function(t,e){},h0r6:function(t,e){},lFp8:function(t,e){},tvR6:function(t,e){},yFqt:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.dbf1b03323fe2f360c25.js.map