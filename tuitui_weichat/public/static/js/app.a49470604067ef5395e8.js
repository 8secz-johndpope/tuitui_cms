webpackJsonp([1],{"1Gb5":function(t,e){},IJeD:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),s={props:{sliderBar:Array},data:function(){return{sliderIndex:"0"}},mounted:function(){},methods:{handleSelect1:function(t,e){this.sliderIndex=t,this.$emit("select",t)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"slider-bar"},[a("el-col",{attrs:{span:12}},[a("el-menu",{staticClass:"el-menu-vertical",attrs:{"default-active":t.sliderIndex,"background-color":"#68717a","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect1}},t._l(t.sliderBar,function(e,n){return a("el-menu-item",{key:n,attrs:{index:n.toString()}},[a("i",{class:t.sliderIndex==n?"active "+e.classname:e.classname}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))])])}))],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,i,!1,function(t){a("ZWod")},"data-v-71144f31",null).exports,r=a("NYxO");n.default.use(r.a);var l=new r.a.Store({state:{showTable:!0,showMenu:!0,showMsg:!0,showSetting:!1,settingTable:!0,gonghaoUpdate:!1,menuUpdate:!1,messageUpdate:!1,settingUpdate:!1},mutations:{changeShowTable:function(t,e){t.showTable=e},changeMenuTable:function(t,e){t.showMenu=e},changeMsgTable:function(t,e){t.showMsg=e},changeShowSetting:function(t,e){t.showSetting=e},changeSettingTable:function(t,e){t.settingTable=e},changeGonghaoUpdate:function(t,e){t.gonghaoUpdate=e},changeMenuUpdate:function(t,e){t.menuUpdate=e},changeMsgUpdate:function(t,e){t.messageUpdate=e},changeSettingUpdate:function(t,e){t.settingUpdate=e}},actions:{}}),c=a("mtWM"),u=a.n(c),d={props:{data_info:Object},data:function(){return{formData:{token:"mingxingshuo"}}},mounted:function(){l.state.gonghaoUpdate&&(this.formData=this.data_info)},methods:{cancel:function(){l.commit("changeShowTable",!0),l.commit("changeGonghaoUpdate",!1),this.$emit("showAgain")},resetForm:function(){this.formData={token:"mingxingshuo"}},submitForm:function(){var t=this;l.state.gonghaoUpdate?u()({url:"/conf/update",method:"post",data:{id:this.data_info._id,code:this.data_info.code,name:this.formData.name,appid:this.formData.appid,appsecret:this.formData.appsecret,token:this.formData.token}}).then(function(e){console.log(e),l.commit("changeShowTable",!0),l.commit("changeGonghaoUpdate",!1),t.$emit("showAgain")}):u()({url:"/conf/create",method:"post",data:this.formData}).then(function(e){l.commit("changeShowTable",!0),l.commit("changeGonghaoUpdate",!1),t.$emit("showAgain")})}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-info"},[a("h2",{staticClass:"title"},[t._t("default")],2),t._v(" "),a("el-form",{staticClass:"form-group",attrs:{model:t.formData,"status-icon":"","label-width":"200px"}},[a("el-form-item",{attrs:{label:"公号名称",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"appid",prop:"appid"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.appid,callback:function(e){t.$set(t.formData,"appid",e)},expression:"formData.appid"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"appsecret",prop:"appsecret"}},[a("el-input",{model:{value:t.formData.appsecret,callback:function(e){t.$set(t.formData,"appsecret",e)},expression:"formData.appsecret"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"token",prop:"token"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.token,callback:function(e){t.$set(t.formData,"token",e)},expression:"formData.token"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm()}}},[t._v("提交")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:function(e){t.resetForm()}}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(d,m,!1,function(t){a("dKiV")},"data-v-1b894288",null).exports,h={props:{data_info:Object},data:function(){return{settingData:{type:0}}},mounted:function(){l.state.settingUpdate&&(this.settingData=this.data_info)},methods:{cancel:function(){l.commit("changeSettingTable",!0),l.commit("changeSettingUpdate",!1),this.$emit("showAgain")},resetForm:function(){this.settingData={}},submitForm:function(){var t=this;l.state.settingUpdate?u()({url:"/reply/update",method:"post",data:{id:this.settingData._id,type:this.settingData.type,text:this.settingData.text,key:this.settingData.key,msgId:this.settingData.msgId}}).then(function(e){t.cancel()}):u()({url:"/reply/create",method:"post",data:this.settingData}).then(function(e){t.cancel()})}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-setting"},[a("h2",{staticClass:"title"},[t._t("default")],2),t._v(" "),a("el-form",{staticClass:"form-group",attrs:{model:t.settingData,"status-icon":"","label-width":"200px"}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-radio-group",{model:{value:t.settingData.type,callback:function(e){t.$set(t.settingData,"type",e)},expression:"settingData.type"}},[a("el-radio",{attrs:{label:0}},[t._v("文本")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("点击")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("关注")])],1)],1),t._v(" "),0==t.settingData.type?a("el-form-item",{attrs:{label:"用户回复文本",prop:"text"}},[a("el-input",{attrs:{type:"text"},model:{value:t.settingData.text,callback:function(e){t.$set(t.settingData,"text",e)},expression:"settingData.text"}})],1):1==t.settingData.type?a("el-form-item",{attrs:{label:"点击关键词",prop:"key"}},[a("el-input",{attrs:{type:"text"},model:{value:t.settingData.key,callback:function(e){t.$set(t.settingData,"key",e)},expression:"settingData.key"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"消息模板ID",prop:"msgId"}},[a("el-input",{attrs:{type:"text"},model:{value:t.settingData.msgId,callback:function(e){t.$set(t.settingData,"msgId",e)},expression:"settingData.msgId"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm()}}},[t._v("提交")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:function(e){t.resetForm()}}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var g={computed:{settingTable:function(){return l.state.settingTable}},components:{editSetting:a("VU/8")(h,f,!1,function(t){a("oJaL")},"data-v-a775697c",null).exports},props:{code:Number},data:function(){return{settingList:[],isCreate:!0,data_info:{}}},mounted:function(){this.showSettingList()},methods:{create:function(){this.isCreate=!0,l.commit("changeSettingTable",!1)},showSettingList:function(){var t=this;u()({url:"/reply",method:"get"}).then(function(e){t.settingList=e.data.data})},showAgain:function(){this.showSettingList()},update:function(t){this.isCreate=!1,this.data_info=t,l.commit("changeSettingTable",!1),l.commit("changeSettingUpdate",!0)},remove:function(t,e){var a=this;this.$confirm("确认删除？").then(function(n){u()({url:"/reply/del",method:"get",params:{id:t._id}}).then(function(t){a.settingList.splice(e,1),a.$message({type:"success",message:t.data.success})})}).catch(function(t){a.$message({type:"info",message:"已取消删除"})})}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting"},[t.settingTable?a("div",[a("h2",{staticClass:"title"},[t._t("default")],2),t._v(" "),a("el-button",{staticClass:"create",attrs:{type:"primary"},on:{click:t.create}},[t._v("配置新规则")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.settingList,border:""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"type",label:"类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(0===e.row.type?"文本":1===e.row.type?"点击":"关注")+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"text",label:"用户回复文本",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"key",label:"点击关键词",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"msgId",label:"消息msgId",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.update(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.remove(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1):a("edit-setting",{attrs:{data_info:t.data_info},on:{showAgain:t.showAgain}},[t._v(t._s(t.isCreate?"配置新规则":"规则修改"))])],1)},staticRenderFns:[]};var v={computed:{showTable:function(){return l.state.showTable},showSetting:function(){return l.state.showSetting}},components:{editInfo:p,setting:a("VU/8")(g,b,!1,function(t){a("IJeD")},"data-v-063cd157",null).exports},data:function(){return{isCreate:!0,gonghaoList:[],data_info:{},code:null,name:""}},mounted:function(){this.showDataList()},methods:{create:function(){this.openPage()},update:function(t){this.openPage(),this.isCreate=!1,l.commit("changeGonghaoUpdate",!0),this.data_info=t},remove:function(t,e){var a=this;this.$confirm("确认删除？").then(function(n){u()({url:"/conf/del",method:"get",params:{id:t._id}}).then(function(t){a.gonghaoList.splice(e,1),a.$message({type:"success",message:t.data.success})})}).catch(function(t){})},openPage:function(){l.commit("changeShowTable",!1)},closePage:function(){l.commit("changeShowTable",!0)},showDataList:function(){var t=this;u()({url:"/conf",method:"get"}).then(function(e){t.gonghaoList=e.data.data})},showAgain:function(){this.showDataList()},reset:function(){var t=this;this.$confirm("确认重置code吗？").then(function(e){u()({url:"/conf/reset",method:"get"}).then(function(e){t.$message({type:"success",message:e.data.success})})}).catch(function(t){})},setting:function(t){this.code=t.code,this.name=t.name,l.commit("changeShowSetting",!0)}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tuoguan"},[t.showTable?a("div",{staticClass:"gh-table"},[t.showSetting?a("div",{staticClass:"setting-container"},[a("setting",{attrs:{code:t.code},on:{showAgain:t.showAgain}},[t._v(t._s(t.name))])],1):a("div",[a("el-button",{staticClass:"create",attrs:{type:"primary"},on:{click:t.create}},[t._v("接管新公号")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"warning"},on:{click:t.reset}},[a("span",{staticStyle:{color:"#000"}},[t._v("(慎用)")]),t._v("\n                重置code\n            ")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.gonghaoList,border:""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"code",label:"code",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"name",label:"公号名称",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"appid",label:"appid",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"appsecret",label:"appsecret",width:"170"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"token",label:"token",width:"85"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"EncodingAESKey",label:"EncodingAESKey",width:"210"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"url",label:"链接",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("http://www.rrdtjj.top/weichat/"+e.row.code))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.update(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){t.setting(e.row)}}},[t._v("配置")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.remove(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1)]):a("div",{staticClass:"edit-container"},[a("edit-info",{attrs:{data_info:t.isCreate?{token:"mingxingshuo"}:t.data_info},on:{showAgain:t.showAgain}},[t._v(t._s(t.isCreate?"接管新公号":"接管公号信息修改"))])],1)])},staticRenderFns:[]};var w=a("VU/8")(v,_,!1,function(t){a("1Gb5")},"data-v-1cbda05d",null).exports,y={props:{data_info:Object},data:function(){return{code:"",formData:{subList:[]},values:[],subItem:{has_sub_btn:!1},radio:"url",isUpdate:!1,isUpdate1:!1}},mounted:function(){this.isUpdate=l.state.menuUpdate,l.state.menuUpdate&&(this.code=this.data_info.code,this.values=this.data_info.values,this.formData=this.values[0])},methods:{cancel:function(){l.commit("changeMenuTable",!0),l.commit("changeMenuUpdate",!1),this.$emit("showAgain")},resetForm:function(){this.formData={}},addBtn:function(){this.values.push(this.formData),this.formData={subList:[]}},submitForm:function(){var t=this;l.state.menuUpdate?u()({url:"/menu/update",method:"post",data:{id:this.data_info._id,code:this.code,values:this.values}}).then(function(e){t.values=[],t.formData={subList:[]},l.commit("changeMenuUpdate",!1),l.commit("changeMenuTable",!0),t.$emit("showAgain")}):u()({url:"/menu/create",method:"post",data:{code:this.code,values:this.values}}).then(function(e){l.commit("changeMenuTable",!0),t.$emit("showAgain")})},addSubBtn:function(){this.formData.subList.push(this.subItem),this.subItem={has_sub_btn:!0}},updateFirst:function(t){this.formData=t},updateSecond:function(t){this.subItem=t,this.isUpdate1=!0},removeFirst:function(t){this.values.splice(t,1),this.formData={subList:[]},console.log(this.formData)},removeSecond:function(t){this.formData.subList.splice(t,1),this.subItem={has_sub_btn:!1}},saveFirst:function(){this.formData={subList:[]}},saveSecond:function(){this.isUpdate1=!1,this.subItem={has_sub_btn:!0}}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"title"},[t._t("default")],2),t._v(" "),a("div",{staticClass:"edit-info"},[a("el-form",{staticClass:"form-group",attrs:{model:t.formData,"status-icon":"","label-width":"200px"}},[a("el-form-item",{attrs:{label:"code",prop:"code"}},[a("el-input",{attrs:{type:"text"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"二级菜单",prop:"has_sub_btn"}},[a("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:t.subItem.has_sub_btn,callback:function(e){t.$set(t.subItem,"has_sub_btn",e)},expression:"subItem.has_sub_btn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"一级菜单名称",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.subItem.has_sub_btn,expression:"!subItem.has_sub_btn"}],attrs:{label:"一级菜单类型",prop:"type"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.subItem.has_sub_btn,expression:"!subItem.has_sub_btn"}],attrs:{label:"一级菜单链接",prop:"url"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.subItem.has_sub_btn,expression:"subItem.has_sub_btn"}],attrs:{label:"二级菜单名称",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.subItem.name,callback:function(e){t.$set(t.subItem,"name",e)},expression:"subItem.name"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.subItem.has_sub_btn,expression:"subItem.has_sub_btn"}],attrs:{label:"二级菜单类型",prop:"type"}},[a("el-input",{attrs:{type:"text"},model:{value:t.subItem.type,callback:function(e){t.$set(t.subItem,"type",e)},expression:"subItem.type"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.subItem.has_sub_btn,expression:"subItem.has_sub_btn"}],attrs:{label:"链接/关键词"}},[a("el-radio",{attrs:{label:"url"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("链接")]),t._v(" "),a("el-radio",{attrs:{label:"key"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("关键词")])],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.subItem.has_sub_btn&&"url"==t.radio,expression:"subItem.has_sub_btn && radio == 'url'"}],attrs:{label:"二级菜单链接",prop:"url"}},[a("el-input",{attrs:{type:"text"},model:{value:t.subItem.url,callback:function(e){t.$set(t.subItem,"url",e)},expression:"subItem.url"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.subItem.has_sub_btn&&"key"==t.radio,expression:"subItem.has_sub_btn && radio == 'key'"}],attrs:{label:"二级菜单关键词",prop:"key"}},[a("el-input",{attrs:{type:"text"},model:{value:t.subItem.key,callback:function(e){t.$set(t.subItem,"key",e)},expression:"subItem.key"}})],1),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.subItem.has_sub_btn&&!t.isUpdate1,expression:"subItem.has_sub_btn && !isUpdate1"}],staticStyle:{"margin-left":"200px"},attrs:{type:"primary"},on:{click:function(e){t.addSubBtn()}}},[t._v("添加二级菜单")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isUpdate1,expression:"isUpdate1"}],staticStyle:{"margin-left":"200px"},attrs:{type:"success"},on:{click:function(e){t.saveSecond()}}},[t._v("保存")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.subItem.has_sub_btn,expression:"subItem.has_sub_btn"}],staticClass:"line"}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"200px"},attrs:{type:"primary"},on:{click:function(e){t.addBtn()}}},[t._v("添加一级菜单")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isUpdate,expression:"isUpdate"}],staticStyle:{"margin-left":"30px"},attrs:{type:"success"},on:{click:function(e){t.saveFirst()}}},[t._v("保存")]),t._v(" "),a("el-table",{staticStyle:{width:"100%",margin:"30px"},attrs:{data:t.values,border:""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"一级菜单名称",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.name?e.row.name:"~")+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.updateFirst(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.removeFirst(e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm()}}},[t._v("提交")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1)],1)],1),t._v(" "),a("div",{staticClass:"sub-btn-table"},[a("el-table",{staticStyle:{width:"100%","z-index":"-1"},attrs:{data:t.formData.subList,border:""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"name",label:"二级菜单名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.updateSecond(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.removeSecond(e.$index)}}},[t._v("删除")])]}}])})],1)],1)])},staticRenderFns:[]};var k={components:{editInfo:a("VU/8")(y,x,!1,function(t){a("qCZJ")},"data-v-1093f73e",null).exports},computed:{showMenu:function(){return l.state.showMenu},menuUpdate:function(){return l.state.menuUpdate}},data:function(){return{isCreate:!0,menuList:[],data_info:{},dialogVisible:!1,menuIndex:""}},mounted:function(){this.showMenuList()},methods:{create:function(){l.commit("changeMenuTable",!1)},tap:function(t){this.isCreate=!1,this.dialogVisible=!0,l.commit("changeMenuUpdate",!0),this.data_info=t},showMenuList:function(){var t=this;u()({url:"/menu/",method:"get"}).then(function(e){t.menuList=e.data.data})},updateOne:function(){l.commit("changeMenuUpdate",!0),this.dialogVisible=!1,l.commit("changeMenuTable",!1)},deleteOne:function(){var t=this;u()({url:"/menu/del",method:"get",params:{id:this.data_info._id}}).then(function(e){var a=t;a.dialogVisible=!1,l.commit("changeMenuUpdate",!1),t.$confirm("确认删除？").then(function(t){a.showMenuList(),a.$message({type:"success",message:e.data.success})}).catch(function(t){})})},showAgain:function(){this.showMenuList()}}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu-setting"},[t.showMenu?a("div",{staticClass:"menu-table"},[a("el-button",{staticClass:"create",attrs:{type:"primary"},on:{click:t.create}},[t._v("配置新菜单栏")]),t._v(" "),a("br"),t._v(" "),t._l(t.menuList,function(e,n){return a("el-button",{key:n,attrs:{type:"warning",size:"mini"},on:{click:function(a){t.tap(e)}}},[t._v(t._s(e.code))])})],2):a("edit-info",{attrs:{data_info:t.isCreate?{}:t.data_info},on:{showAgain:t.showAgain}},[t._v(t._s(t.isCreate?"配置新菜单栏":"修改菜单栏配置"))]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("这是一段信息")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.updateOne}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.deleteOne}},[t._v("删除")])],1)])],1)},staticRenderFns:[]};var S=a("VU/8")(k,D,!1,function(t){a("YhX0")},"data-v-ed19977e",null).exports,U={props:{data_info:Object},data:function(){return{type:"0",subForm:{},picMessageData:[],contents:[],description:"",imgUrl:"",id:"",index:0}},mounted:function(){l.state.messageUpdate&&(this.type=this.data_info.type.toString(),this.description=this.data_info.description,this.picMessageData=this.data_info.contents,this.subForm=this.picMessageData[0],this.imgUrl=this.subForm.picurl,this.id=this.data_info._id)},methods:{onSave:function(){var t=this;l.state.messageUpdate?(""!=this.description?this.contents.push({description:this.description}):this.contents=this.picMessageData,u()({url:"/msg/update",method:"post",data:{id:this.id,type:this.type,description:this.description,contents:this.contents}}).then(function(e){t.close()})):(""!=this.description?this.contents.push({description:this.description}):this.contents=this.picMessageData,u()({url:"/msg/create",method:"post",data:{type:this.type,description:this.description,contents:this.contents}}).then(function(e){t.close()}))},addOne:function(){this.subForm.picurl=this.imgUrl,this.picMessageData.push(this.subForm),this.subForm={}},saveOne:function(){this.subForm.picurl=this.imgUrl,this.picMessageData.splice(this.index,1,this.subForm),this.subForm={},this.imgUrl=""},change:function(){this.description="",this.subForm={}},handleAvatarSuccess:function(t,e){this.imgUrl="http://crm.rrdtjj.top/uploads/"+t.filename},updateOne:function(t,e){this.index=t,this.subForm=e,this.imgUrl=e.picurl},deleteOne:function(t,e){var a=this;this.$confirm("此操作删除此条客服消息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.state.messageUpdate&&a.picMessageData.length<=1?a.$message({type:"info",message:" 列表中最少展示一条数据"}):(a.picMessageData.splice(t,1),a.$message({type:"success",message:" 删除成功"}))}).catch(function(){a.$message({type:"warning",message:"已取消删除"})})},cancel:function(){this.close()},reset:function(){this.type="0",this.imgUrl=this.description="",this.subForm={},this.picMessageData=[]},close:function(){l.commit("changeMsgTable",!0),l.commit("changeMsgUpdate",!1),this.$emit("showAgain"),this.reset()}}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-message"},[a("el-form",{ref:"form",attrs:{"label-width":"80px",size:"mini"}},[a("el-form-item",[a("h2",[t._t("default")],2)]),t._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-radio-group",{attrs:{size:"medium"},on:{change:t.change},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("el-radio",{attrs:{border:"",label:"0"}},[t._v("文本")]),t._v(" "),a("el-radio",{attrs:{border:"",label:"1"}},[t._v("图片")]),t._v(" "),a("el-radio",{attrs:{border:"",label:"2"}},[t._v("图文")])],1)],1),t._v(" "),1==t.type?a("el-form",{ref:"subForm",attrs:{model:t.subForm,"label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"图片"}},[a("el-upload",{attrs:{"show-file-list":!1,enctype:"multipart/form-data",name:"imageFile",action:"http://crm.rrdtjj.top/message/upload","on-success":t.handleAvatarSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),t.imgUrl?a("img",{staticStyle:{"margin-top":"10px"},attrs:{src:t.imgUrl,alt:"",width:"200"}}):t._e()],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{staticStyle:{width:"500px"},model:{value:t.subForm.title,callback:function(e){t.$set(t.subForm,"title",e)},expression:"subForm.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"链接"}},[a("el-input",{staticStyle:{width:"500px"},model:{value:t.subForm.url,callback:function(e){t.$set(t.subForm,"url",e)},expression:"subForm.url"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"详细信息",prop:"description"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea"},model:{value:t.subForm.description,callback:function(e){t.$set(t.subForm,"description",e)},expression:"subForm.description"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"large"}},[a("el-button",{attrs:{type:"success"},on:{click:t.addOne}},[t._v("添加")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.saveOne}},[t._v("保存")])],1),t._v(" "),a("el-form-item",{attrs:{label:"图文消息",prop:"pic_message"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.picMessageData,border:""}},[a("el-table-column",{attrs:{prop:"title",label:"标题",width:"100"}}),t._v(" "),a("el-table-column",{staticStyle:{"margin-top":"30px"},attrs:{prop:"picurl",label:"图片",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.picurl,width:"100%"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"url",label:"链接",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"description",label:"详细信息",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.updateOne(e.$index,e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticClass:"send-message",attrs:{size:"small",type:"danger"},on:{click:function(a){t.deleteOne(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1)],1):0==t.type?a("el-form-item",{attrs:{label:"详细信息",prop:"description"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{size:"large"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSave}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.cancel}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var $={computed:{showMsg:function(){return l.state.showMsg},messageUpdate:function(){return l.state.messageUpdate}},components:{editMessage:a("VU/8")(U,I,!1,function(t){a("qfEf")},"data-v-f3542bb4",null).exports},data:function(){return{tableData:[],desShow:"",isCreate:!0,data_info:{}}},mounted:function(){this.showMessage()},methods:{create:function(){l.commit("changeMsgTable",!1),this.isCreate=!0},copyMessage:function(t){var e=this;u()({url:"/msg/create",method:"post",data:{contents:t.contents,type:t.type,description:t.description}}).then(function(t){e.showMessage(),console.log(t)})},showMessage:function(){var t=this;u()({url:"/msg",method:"get",parmas:{},withCredentials:!0}).then(function(e){0!=e.data.data.length&&(t.tableData=e.data.data)})},showAgain:function(){this.showMessage()},updateMessage:function(t,e){l.commit("changeMsgTable",!1),l.commit("changeMsgUpdate",!0),this.isCreate=!1,this.data_info=e},deleteMessage:function(t,e){var a=this;this.$confirm("此操作删除此条客服消息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){u()({url:"/msg/del",method:"get",params:{id:t._id}}).then(function(t){a.$message({type:"success",message:t.data.success}),a.showMessage(),a.tableData.splice(e,1)})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}}},M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message"},[t.showMsg?a("div",[a("el-button",{staticClass:"create",attrs:{type:"primary"},on:{click:t.create}},[t._v("添加新消息")]),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"msgId","header-align":"center",align:"center",label:"msgId",width:"65"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型","header-align":"center",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.type?"文本消息":"图文消息")+t._s(e.row.contents.length>1?"(多)":""))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"contents[0].title","header-align":"center",align:"center",label:"标题",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contents[0].description","header-align":"center",align:"center",label:"详细信息",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contents[0].url","header-align":"center",align:"center",label:"链接",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contents[0].picurl","header-align":"center",align:"center",label:"图片",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.contents[0].picurl?a("img",{attrs:{src:e.row.contents[0].picurl,width:"100%"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(a){t.copyMessage(e.row)}}},[t._v("复制")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.updateMessage(e.$index,e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){t.deleteMessage(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1):a("edit-message",{attrs:{data_info:t.data_info},on:{showAgain:t.showAgain}},[t._v(t._s(t.isCreate?"新增客服消息":"编辑客服消息"))])],1)},staticRenderFns:[]};var C={name:"ghManagement",components:{sliderBar:o,tuoguan:w,sendMessage:a("VU/8")($,M,!1,function(t){a("PH82")},"data-v-718654ae",null).exports,menuSetting:S},data:function(){return{showIndex:0,sliderBarList:[{classname:"el-icon-menu",title:"公号托管"},{classname:"el-icon-setting",title:"设置菜单栏"},{classname:"el-icon-message",title:"回复消息"}]}},methods:{select:function(t){this.showIndex=t}}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gh-management"},[a("slider-bar",{attrs:{sliderBar:t.sliderBarList},on:{select:t.select}}),t._v(" "),0==t.showIndex?a("tuoguan"):t._e(),t._v(" "),1==t.showIndex?a("menu-setting"):t._e(),t._v(" "),2==t.showIndex?a("send-message"):t._e()],1)},staticRenderFns:[]};var L={components:{ghManagement:a("VU/8")(C,F,!1,function(t){a("W+QA")},"data-v-434540f2",null).exports},data:function(){return{activeIndex:"1"}},methods:{handleSelect:function(t,e){this.activeIndex=t}}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"nav"},[a("h2",{staticClass:"logo"},[t._v("后台管理系统")]),t._v(" "),a("el-menu",{staticClass:"el-menu",attrs:{"default-active":t.activeIndex,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:"1"}},[t._v("公号管理")]),t._v(" "),a("el-menu-item",{attrs:{disabled:"",index:"2"}},[t._v("暂时没有开放此功能")])],1)],1),t._v(" "),"1"==t.activeIndex?a("gh-management"):t._e()],1)},staticRenderFns:[]};var A=a("VU/8")(L,T,!1,function(t){a("zULX")},"data-v-51b83da0",null).exports,z=a("/ocq");n.default.use(z.a);var E=new z.a({mode:"history",base:Object({NODE_ENV:"production"}).BASE_URL,routes:[{path:"/management",name:"home",component:A}]}),O=a("zL8q"),V=a.n(O);a("tvR6");n.default.use(V.a);a("j1ja");n.default.config.productionTip=!1,new n.default({router:E,store:l,render:function(t){return t(A)}}).$mount("#app")},PH82:function(t,e){},"W+QA":function(t,e){},YhX0:function(t,e){},ZWod:function(t,e){},dKiV:function(t,e){},oJaL:function(t,e){},qCZJ:function(t,e){},qfEf:function(t,e){},tvR6:function(t,e){},zULX:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a49470604067ef5395e8.js.map