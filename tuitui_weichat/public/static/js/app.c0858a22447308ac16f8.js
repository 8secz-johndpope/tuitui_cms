webpackJsonp([1],{"1Gb5":function(t,e){},"1lW8":function(t,e){},"8CGX":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),n={props:{sliderBar:Array},data:function(){return{sliderIndex:"0"}},mounted:function(){},methods:{handleSelect1:function(t,e){this.sliderIndex=t,this.$emit("select",t)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"slider-bar"},[a("el-col",{attrs:{span:12}},[a("el-menu",{staticClass:"el-menu-vertical",attrs:{"default-active":t.sliderIndex,"background-color":"#68717a","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect1}},t._l(t.sliderBar,function(e,s){return a("el-menu-item",{key:s,attrs:{index:s.toString()}},[a("i",{class:t.sliderIndex==s?"active "+e.classname:e.classname}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))])])}))],1)],1)},staticRenderFns:[]};var o=a("VU/8")(n,i,!1,function(t){a("ZWod")},"data-v-71144f31",null).exports,l=a("NYxO");s.default.use(l.a);var r=new l.a.Store({state:{showTable:!0,showMenu:!0,showMsg:!0,showSetting:!1,settingTable:!0,gonghaoUpdate:!1,menuUpdate:!1,messageUpdate:!1,settingUpdate:!1,isAddSwitch:!1,isEditSwitch:!1,isUpdateLinksSwitch:!1,addLinksShow:!1,goodsShow:!1,goodsData:{},pagesData:{pagename:"请输入单页名称",class:"请输入class"},goodsListData:{},isUpdateGoodsSwitch:!1},mutations:{changeShowTable:function(t,e){t.showTable=e},changeMenuTable:function(t,e){t.showMenu=e},changeMsgTable:function(t,e){t.showMsg=e},changeShowSetting:function(t,e){t.showSetting=e},changeSettingTable:function(t,e){t.settingTable=e},changeGonghaoUpdate:function(t,e){t.gonghaoUpdate=e},changeMenuUpdate:function(t,e){t.menuUpdate=e},changeMsgUpdate:function(t,e){t.messageUpdate=e},changeSettingUpdate:function(t,e){t.settingUpdate=e},changeAddSwitch:function(t,e){t.isAddSwitch=e},changeEditSwitch:function(t,e){t.isEditSwitch=e},changeUpdateLinksSwitch:function(t,e){t.isUpdateLinksSwitch=e},changeUpdateGoodsSwitch:function(t,e){t.isUpdateGoodsSwitch=e},changeAddLinks:function(t,e){t.addLinksShow=e},changeGoodsShow:function(t,e){t.goodsShow=e},setGoodsData:function(t,e){t.goodsData=e||{}},setPagesData:function(t,e){t.pagesData=e||{}},setGoodsListData:function(t,e){t.goodsListData=e||{}}},actions:{}}),c=a("mtWM"),d=a.n(c),u={props:{data_info:Object},data:function(){return{formData:{token:"mingxingshuo"}}},mounted:function(){r.state.gonghaoUpdate&&(this.formData=this.data_info)},methods:{cancel:function(){r.commit("changeShowTable",!0),r.commit("changeGonghaoUpdate",!1),this.$emit("showAgain")},resetForm:function(){this.formData={token:"mingxingshuo"}},submitForm:function(){var t=this;r.state.gonghaoUpdate?d()({url:"/conf/update",method:"post",data:{id:this.data_info._id,code:this.data_info.code,name:this.formData.name,appid:this.formData.appid,appsecret:this.formData.appsecret,token:this.formData.token}}).then(function(e){console.log(e),r.commit("changeShowTable",!0),r.commit("changeGonghaoUpdate",!1),t.$emit("showAgain")}):d()({url:"/conf/create",method:"post",data:this.formData}).then(function(e){r.commit("changeShowTable",!0),r.commit("changeGonghaoUpdate",!1),t.$emit("showAgain")})}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-info"},[a("h2",{staticClass:"title"},[t._t("default")],2),t._v(" "),a("el-form",{staticClass:"form-group",attrs:{model:t.formData,"status-icon":"","label-width":"200px"}},[a("el-form-item",{attrs:{label:"公号名称",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"appid",prop:"appid"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.appid,callback:function(e){t.$set(t.formData,"appid",e)},expression:"formData.appid"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"appsecret",prop:"appsecret"}},[a("el-input",{model:{value:t.formData.appsecret,callback:function(e){t.$set(t.formData,"appsecret",e)},expression:"formData.appsecret"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"token",prop:"token"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.token,callback:function(e){t.$set(t.formData,"token",e)},expression:"formData.token"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm()}}},[t._v("提交")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:function(e){t.resetForm()}}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,m,!1,function(t){a("dKiV")},"data-v-1b894288",null).exports,h={props:{data_info:Object,code:Number},data:function(){return{settingData:{type:0,replyType:0},imgUrl:""}},mounted:function(){r.state.settingUpdate&&(this.settingData=this.data_info)},methods:{handleAvatarSuccess:function(t,e){this.imgUrl="http://test.oorggt.top/uploads/"+t.filename},cancel:function(){r.commit("changeSettingTable",!0),r.commit("changeSettingUpdate",!1),this.$emit("showAgain")},resetForm:function(){this.settingData={}},submitForm:function(){var t=this;r.state.settingUpdate?d()({url:"/reply/update",method:"post",data:{code:this.code,id:this.settingData._id,type:this.settingData.type,text:this.settingData.text,key:this.settingData.key,msgId:this.settingData.msgId}}).then(function(e){t.cancel()}):d()({url:"/reply/create",method:"post",data:{code:this.code,replyType:this.settingData.replyType,type:this.settingData.type,url:this.imgUrl,text:this.settingData.text,key:this.settingData.key,msgId:this.settingData.msgId}}).then(function(e){t.cancel()})}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-setting"},[a("h2",{staticClass:"title"},[t._t("default")],2),t._v(" "),a("el-form",{staticClass:"form-group",attrs:{model:t.settingData,"status-icon":"","label-width":"200px"}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-radio-group",{model:{value:t.settingData.type,callback:function(e){t.$set(t.settingData,"type",e)},expression:"settingData.type"}},[a("el-radio",{attrs:{label:0}},[t._v("文本")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("点击")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("关注")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"replyType"}},[a("el-radio-group",{model:{value:t.settingData.replyType,callback:function(e){t.$set(t.settingData,"replyType",e)},expression:"settingData.replyType"}},[a("el-radio",{attrs:{label:0}},[t._v("文本/图文")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("图片")])],1)],1),t._v(" "),0==t.settingData.type&&0==t.settingData.replyType?a("el-form-item",{attrs:{label:"用户回复文本",prop:"text"}},[a("el-input",{attrs:{type:"text"},model:{value:t.settingData.text,callback:function(e){t.$set(t.settingData,"text",e)},expression:"settingData.text"}})],1):1==t.settingData.type&&0==t.settingData.replyType?a("el-form-item",{attrs:{label:"点击关键词",prop:"key"}},[a("el-input",{attrs:{type:"text"},model:{value:t.settingData.key,callback:function(e){t.$set(t.settingData,"key",e)},expression:"settingData.key"}})],1):t._e(),t._v(" "),0==t.settingData.replyType?a("el-form-item",{attrs:{label:"消息模板ID",prop:"msgId"}},[a("el-input",{attrs:{type:"text"},model:{value:t.settingData.msgId,callback:function(e){t.$set(t.settingData,"msgId",e)},expression:"settingData.msgId"}})],1):t._e(),t._v(" "),1==t.settingData.replyType?a("el-form-item",{attrs:{label:"图片"}},[a("el-upload",{attrs:{"show-file-list":!1,enctype:"multipart/form-data",name:"imageFile",action:"http://test.oorggt.top/reply/upload","on-success":t.handleAvatarSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),t.imgUrl?a("img",{staticStyle:{"margin-top":"10px"},attrs:{src:t.imgUrl,alt:"",width:"200"}}):t._e()],1)],1):t._e(),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm()}}},[t._v("提交")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:function(e){t.resetForm()}}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var g={computed:{settingTable:function(){return r.state.settingTable}},components:{editSetting:a("VU/8")(h,f,!1,function(t){a("Q3ou")},"data-v-150fb6a2",null).exports},props:{code:Number},data:function(){return{settingList:[],isCreate:!0,data_info:{}}},mounted:function(){this.showSettingList()},methods:{create:function(){this.isCreate=!0,r.commit("changeSettingTable",!1)},showSettingList:function(){var t=this;d()({url:"/reply",method:"get"}).then(function(e){t.settingList=e.data.data})},showAgain:function(){this.showSettingList()},update:function(t){this.isCreate=!1,this.data_info=t,r.commit("changeSettingTable",!1),r.commit("changeSettingUpdate",!0)},remove:function(t,e){var a=this;this.$confirm("确认删除？").then(function(s){d()({url:"/reply/del",method:"get",params:{id:t._id}}).then(function(t){a.settingList.splice(e,1),a.$message({type:"success",message:t.data.success})})}).catch(function(t){a.$message({type:"info",message:"已取消删除"})})}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting"},[t.settingTable?a("div",[a("h2",{staticClass:"title"},[t._t("default")],2),t._v(" "),a("el-button",{staticClass:"create",attrs:{type:"primary"},on:{click:t.create}},[t._v("配置新规则")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.settingList,border:""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"type",label:"类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(0===e.row.type?"文本":1===e.row.type?"点击":"关注")+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"text",label:"用户回复文本",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"key",label:"点击关键词",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"msgId",label:"消息msgId",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"url",label:"图片",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.update(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.remove(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1):a("edit-setting",{attrs:{data_info:t.data_info,code:t.code},on:{showAgain:t.showAgain}},[t._v(t._s(t.isCreate?"配置新规则":"规则修改"))])],1)},staticRenderFns:[]};var b={computed:{showTable:function(){return r.state.showTable},showSetting:function(){return r.state.showSetting}},components:{editInfo:p,setting:a("VU/8")(g,v,!1,function(t){a("fUew")},"data-v-e4040dda",null).exports},data:function(){return{isCreate:!0,gonghaoList:[],data_info:{},code:null,name:""}},mounted:function(){this.showDataList()},methods:{create:function(){this.openPage()},update:function(t){this.openPage(),this.isCreate=!1,r.commit("changeGonghaoUpdate",!0),this.data_info=t},remove:function(t,e){var a=this;this.$confirm("确认删除？").then(function(s){d()({url:"/conf/del",method:"get",params:{id:t._id}}).then(function(t){a.gonghaoList.splice(e,1),a.$message({type:"success",message:t.data.success})})}).catch(function(t){})},openPage:function(){r.commit("changeShowTable",!1)},closePage:function(){r.commit("changeShowTable",!0)},showDataList:function(){var t=this;d()({url:"/conf",method:"get"}).then(function(e){t.gonghaoList=e.data.data})},showAgain:function(){this.showDataList()},reset:function(){var t=this;this.$confirm("确认重置code吗？").then(function(e){d()({url:"/conf/reset",method:"get"}).then(function(e){t.$message({type:"success",message:e.data.success})})}).catch(function(t){})},setting:function(t){this.code=t.code,this.name=t.name,r.commit("changeShowSetting",!0)}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tuoguan"},[t.showTable?a("div",{staticClass:"gh-table"},[t.showSetting?a("div",{staticClass:"setting-container"},[a("setting",{attrs:{code:t.code},on:{showAgain:t.showAgain}},[t._v(t._s(t.name))])],1):a("div",[a("el-button",{staticClass:"create",attrs:{type:"primary"},on:{click:t.create}},[t._v("接管新公号")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"warning"},on:{click:t.reset}},[a("span",{staticStyle:{color:"#000"}},[t._v("(慎用)")]),t._v("\n                重置code\n            ")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.gonghaoList,border:""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"code",label:"code",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"name",label:"公号名称",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"appid",label:"appid",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"appsecret",label:"appsecret",width:"170"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"token",label:"token",width:"85"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"EncodingAESKey",label:"EncodingAESKey",width:"210"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"url",label:"链接",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("http://www.rrdtjj.top/weichat/"+e.row.code))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.update(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){t.setting(e.row)}}},[t._v("配置")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.remove(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1)]):a("div",{staticClass:"edit-container"},[a("edit-info",{attrs:{data_info:t.isCreate?{token:"mingxingshuo"}:t.data_info},on:{showAgain:t.showAgain}},[t._v(t._s(t.isCreate?"接管新公号":"接管公号信息修改"))])],1)])},staticRenderFns:[]};var w=a("VU/8")(b,_,!1,function(t){a("1Gb5")},"data-v-1cbda05d",null).exports,y={props:{data_info:Object},data:function(){return{code:"",formData:{sub_button:[],type:"view"},values:[],has_sub_btn:!1,subItem:{type:"view"},radio:"url",isUpdate:!1,isUpdate1:!1}},mounted:function(){this.isUpdate=r.state.menuUpdate,console.log(this.data_info),r.state.menuUpdate&&(this.code=this.data_info.code,this.values=this.data_info.values,this.formData=this.values[0])},methods:{cancel:function(){r.commit("changeMenuTable",!0),r.commit("changeMenuUpdate",!1),this.$emit("showAgain")},resetForm:function(){this.formData={sub_button:[],type:"view"}},addBtn:function(){this.formData.sub_button==[]&&delete this.formData.sub_button,this.values.push(this.formData),console.log(this.values),this.formData={sub_button:[],type:"view"}},submitForm:function(){var t=this;r.state.menuUpdate?d()({url:"/menu/update",method:"post",data:{id:this.data_info._id,code:this.code,values:this.values}}).then(function(e){t.values=[],t.formData={sub_button:[],type:"view"},r.commit("changeMenuUpdate",!1),r.commit("changeMenuTable",!0),t.$emit("showAgain")}):d()({url:"/menu/create",method:"post",data:{code:this.code,values:this.values}}).then(function(e){r.commit("changeMenuTable",!0),t.$emit("showAgain")})},addSubBtn:function(){this.formData.sub_button.push(this.subItem),this.subItem={type:"view"},this.has_sub_btn=!0},updateFirst:function(t){this.formData=t},updateSecond:function(t){this.subItem=t,this.isUpdate1=!0},removeFirst:function(t){this.values.splice(t,1),this.formData={sub_button:[],type:"view"},console.log(this.formData)},removeSecond:function(t){this.formData.sub_button.splice(t,1),this.subItem={type:"view"},this.has_sub_btn=!0},saveFirst:function(){this.formData={sub_button:[],type:"view"}},saveSecond:function(){this.isUpdate1=!1,this.subItem={type:"view"},this.has_sub_btn=!1}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"title"},[t._t("default")],2),t._v(" "),a("div",{staticClass:"edit-info"},[a("el-form",{staticClass:"form-group",attrs:{model:t.formData,"status-icon":"","label-width":"200px"}},[a("el-form-item",{attrs:{label:"code",prop:"code"}},[a("el-input",{attrs:{type:"text"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"二级菜单",prop:"has_sub_btn"}},[a("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:t.has_sub_btn,callback:function(e){t.has_sub_btn=e},expression:"has_sub_btn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"一级菜单名称",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.has_sub_btn,expression:"!has_sub_btn"}],attrs:{label:"链接/关键词"}},[a("el-radio",{attrs:{label:"view"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},[t._v("view")]),t._v(" "),a("el-radio",{attrs:{label:"click"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},[t._v("click")])],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.has_sub_btn&&"view"==t.formData.type,expression:"!has_sub_btn && formData.type == 'view'"}],attrs:{label:"一级菜单链接",prop:"url"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.has_sub_btn&&"click"==t.formData.type,expression:"!has_sub_btn && formData.type == 'click'"}],attrs:{label:"一级菜单关键字",prop:"url"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.key,callback:function(e){t.$set(t.formData,"key",e)},expression:"formData.key"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn,expression:"has_sub_btn"}],attrs:{label:"二级菜单名称",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.subItem.name,callback:function(e){t.$set(t.subItem,"name",e)},expression:"subItem.name"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn,expression:"has_sub_btn"}],attrs:{label:"链接/关键词"}},[a("el-radio",{attrs:{label:"view"},model:{value:t.subItem.type,callback:function(e){t.$set(t.subItem,"type",e)},expression:"subItem.type"}},[t._v("view")]),t._v(" "),a("el-radio",{attrs:{label:"click"},model:{value:t.subItem.type,callback:function(e){t.$set(t.subItem,"type",e)},expression:"subItem.type"}},[t._v("click")])],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn&&"view"==t.subItem.type,expression:"has_sub_btn && subItem.type == 'view'"}],attrs:{label:"二级菜单链接",prop:"url"}},[a("el-input",{attrs:{type:"text"},model:{value:t.subItem.url,callback:function(e){t.$set(t.subItem,"url",e)},expression:"subItem.url"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn&&"click"==t.subItem.type,expression:"has_sub_btn && subItem.type == 'click'"}],attrs:{label:"二级菜单关键词",prop:"key"}},[a("el-input",{attrs:{type:"text"},model:{value:t.subItem.key,callback:function(e){t.$set(t.subItem,"key",e)},expression:"subItem.key"}})],1),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn&&!t.isUpdate1,expression:"has_sub_btn && !isUpdate1"}],staticStyle:{"margin-left":"200px"},attrs:{type:"primary"},on:{click:function(e){t.addSubBtn()}}},[t._v("添加二级菜单")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isUpdate1,expression:"isUpdate1"}],staticStyle:{"margin-left":"200px"},attrs:{type:"success"},on:{click:function(e){t.saveSecond()}}},[t._v("保存")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.has_sub_btn,expression:"has_sub_btn"}],staticClass:"line"}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"200px"},attrs:{type:"primary"},on:{click:function(e){t.addBtn()}}},[t._v("添加一级菜单")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isUpdate,expression:"isUpdate"}],staticStyle:{"margin-left":"30px"},attrs:{type:"success"},on:{click:function(e){t.saveFirst()}}},[t._v("保存")]),t._v(" "),a("el-table",{staticStyle:{width:"100%",margin:"30px"},attrs:{data:t.values,border:""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"一级菜单名称",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.name?e.row.name:"~")+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.updateFirst(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.removeFirst(e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm()}}},[t._v("提交")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1)],1)],1),t._v(" "),a("div",{staticClass:"sub-btn-table"},[a("el-table",{staticStyle:{width:"100%","z-index":"-1"},attrs:{data:t.formData.sub_button,border:""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"name",label:"二级菜单名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.updateSecond(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.removeSecond(e.$index)}}},[t._v("删除")])]}}])})],1)],1)])},staticRenderFns:[]};var S={components:{editInfo:a("VU/8")(y,k,!1,function(t){a("PUc4")},"data-v-58fd6e12",null).exports},computed:{showMenu:function(){return r.state.showMenu},menuUpdate:function(){return r.state.menuUpdate}},data:function(){return{isCreate:!0,menuList:[],data_info:{},dialogVisible:!1,menuIndex:""}},mounted:function(){this.showMenuList()},methods:{create:function(){r.commit("changeMenuTable",!1)},tap:function(t){this.isCreate=!1,this.dialogVisible=!0,r.commit("changeMenuUpdate",!0),this.data_info=t},showMenuList:function(){var t=this;d()({url:"/menu/",method:"get"}).then(function(e){t.menuList=e.data.data})},updateOne:function(){r.commit("changeMenuUpdate",!0),this.dialogVisible=!1,r.commit("changeMenuTable",!1)},deleteOne:function(){var t=this;d()({url:"/menu/del",method:"get",params:{id:this.data_info._id}}).then(function(e){var a=t;a.dialogVisible=!1,r.commit("changeMenuUpdate",!1),t.$confirm("确认删除？").then(function(t){a.showMenuList(),a.$message({type:"success",message:e.data.success})}).catch(function(t){})})},showAgain:function(){this.showMenuList()}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu-setting"},[t.showMenu?a("div",{staticClass:"menu-table"},[a("el-button",{staticClass:"create",attrs:{type:"primary"},on:{click:t.create}},[t._v("配置新菜单栏")]),t._v(" "),a("br"),t._v(" "),t._l(t.menuList,function(e,s){return a("el-button",{key:s,attrs:{type:"warning",size:"mini"},on:{click:function(a){t.tap(e)}}},[t._v(t._s(e.code))])})],2):a("edit-info",{attrs:{data_info:t.isCreate?{}:t.data_info},on:{showAgain:t.showAgain}},[t._v(t._s(t.isCreate?"配置新菜单栏":"修改菜单栏配置"))]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("您打算进行那种操作？")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.updateOne}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.deleteOne}},[t._v("删除")])],1)])],1)},staticRenderFns:[]};var D=a("VU/8")(S,x,!1,function(t){a("YVfP")},"data-v-8b603e5e",null).exports,U={props:{data_info:Object},data:function(){return{type:"0",subForm:{},picMessageData:[],contents:[],description:"",imgUrl:"",id:"",index:0}},mounted:function(){r.state.messageUpdate&&(this.type=this.data_info.type.toString(),this.description=this.data_info.description,this.picMessageData=this.data_info.contents,this.subForm=this.picMessageData[0],this.imgUrl=this.subForm.picurl,this.id=this.data_info._id)},methods:{onSave:function(){var t=this;r.state.messageUpdate?(""!=this.description?this.contents.push({description:this.description}):this.contents=this.picMessageData,d()({url:"/msg/update",method:"post",data:{id:this.id,type:this.type,description:this.description,contents:this.contents}}).then(function(e){t.close()})):(""!=this.description?this.contents.push({description:this.description}):this.contents=this.picMessageData,d()({url:"/msg/create",method:"post",data:{type:this.type,description:this.description,contents:this.contents}}).then(function(e){t.close()}))},addOne:function(){this.subForm.picurl=this.imgUrl,this.picMessageData.push(this.subForm),this.subForm={}},saveOne:function(){this.subForm.picurl=this.imgUrl,this.picMessageData.splice(this.index,1,this.subForm),this.subForm={},this.imgUrl=""},change:function(){this.description="",this.subForm={}},handleAvatarSuccess:function(t,e){this.imgUrl="http://test.oorggt.top/uploads/"+t.filename},updateOne:function(t,e){this.index=t,this.subForm=e,this.imgUrl=e.picurl},deleteOne:function(t,e){var a=this;this.$confirm("此操作删除此条客服消息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.state.messageUpdate&&a.picMessageData.length<=1?a.$message({type:"info",message:" 列表中最少展示一条数据"}):(a.picMessageData.splice(t,1),a.$message({type:"success",message:" 删除成功"}))}).catch(function(){a.$message({type:"warning",message:"已取消删除"})})},cancel:function(){this.close()},reset:function(){this.type="0",this.imgUrl=this.description="",this.subForm={},this.picMessageData=[]},close:function(){r.commit("changeMsgTable",!0),r.commit("changeMsgUpdate",!1),this.$emit("showAgain"),this.reset()}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-message"},[a("el-form",{ref:"form",attrs:{"label-width":"80px",size:"mini"}},[a("el-form-item",[a("h2",[t._t("default")],2)]),t._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-radio-group",{attrs:{size:"medium"},on:{change:t.change},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("el-radio",{attrs:{border:"",label:"0"}},[t._v("文本")]),t._v(" "),a("el-radio",{attrs:{border:"",label:"1"}},[t._v("图文")])],1)],1),t._v(" "),1==t.type?a("el-form",{ref:"subForm",attrs:{model:t.subForm,"label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"图片"}},[a("el-upload",{attrs:{"show-file-list":!1,enctype:"multipart/form-data",name:"imageFile",action:"http://test.oorggt.top/reply/upload","on-success":t.handleAvatarSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),t.imgUrl?a("img",{staticStyle:{"margin-top":"10px"},attrs:{src:t.imgUrl,alt:"",width:"200"}}):t._e()],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{staticStyle:{width:"500px"},model:{value:t.subForm.title,callback:function(e){t.$set(t.subForm,"title",e)},expression:"subForm.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"链接"}},[a("el-input",{staticStyle:{width:"500px"},model:{value:t.subForm.url,callback:function(e){t.$set(t.subForm,"url",e)},expression:"subForm.url"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"详细信息",prop:"description"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea"},model:{value:t.subForm.description,callback:function(e){t.$set(t.subForm,"description",e)},expression:"subForm.description"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"large"}},[a("el-button",{attrs:{type:"success"},on:{click:t.addOne}},[t._v("添加")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.saveOne}},[t._v("保存")])],1),t._v(" "),a("el-form-item",{attrs:{label:"图文消息",prop:"pic_message"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.picMessageData,border:""}},[a("el-table-column",{attrs:{prop:"title",label:"标题",width:"100"}}),t._v(" "),a("el-table-column",{staticStyle:{"margin-top":"30px"},attrs:{prop:"picurl",label:"图片",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.picurl,width:"100%"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"url",label:"链接",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"description",label:"详细信息",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.updateOne(e.$index,e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticClass:"send-message",attrs:{size:"small",type:"danger"},on:{click:function(a){t.deleteOne(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1)],1):0==t.type?a("el-form-item",{attrs:{label:"详细信息",prop:"description"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{size:"large"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSave}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.cancel}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var C={computed:{showMsg:function(){return r.state.showMsg},messageUpdate:function(){return r.state.messageUpdate}},components:{editMessage:a("VU/8")(U,$,!1,function(t){a("8CGX")},"data-v-e0521ce4",null).exports},data:function(){return{tableData:[],desShow:"",isCreate:!0,data_info:{}}},mounted:function(){this.showMessage()},methods:{create:function(){r.commit("changeMsgTable",!1),this.isCreate=!0},copyMessage:function(t){var e=this;d()({url:"/msg/create",method:"post",data:{contents:t.contents,type:t.type,description:t.description}}).then(function(t){e.showMessage(),console.log(t)})},showMessage:function(){var t=this;d()({url:"/msg",method:"get",parmas:{},withCredentials:!0}).then(function(e){0!=e.data.data.length&&(t.tableData=e.data.data)})},showAgain:function(){this.showMessage()},updateMessage:function(t,e){r.commit("changeMsgTable",!1),r.commit("changeMsgUpdate",!0),this.isCreate=!1,this.data_info=e},deleteMessage:function(t,e){var a=this;this.$confirm("此操作删除此条客服消息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){d()({url:"/msg/del",method:"get",params:{id:t._id}}).then(function(t){a.$message({type:"success",message:t.data.success}),a.showMessage(),a.tableData.splice(e,1)})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}}},M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message"},[t.showMsg?a("div",[a("el-button",{staticClass:"create",attrs:{type:"primary"},on:{click:t.create}},[t._v("添加新消息")]),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"msgId","header-align":"center",align:"center",label:"msgId",width:"65"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型","header-align":"center",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(0==e.row.type?"文本消息":"图文消息")+t._s(e.row.contents.length>1?"(多)":""))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"contents[0].title","header-align":"center",align:"center",label:"标题",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contents[0].description","header-align":"center",align:"center",label:"详细信息",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contents[0].url","header-align":"center",align:"center",label:"链接",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contents[0].picurl","header-align":"center",align:"center",label:"图片",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.contents[0].picurl?a("img",{attrs:{src:e.row.contents[0].picurl,width:"100%"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(a){t.copyMessage(e.row)}}},[t._v("复制")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.updateMessage(e.$index,e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){t.deleteMessage(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1):a("edit-message",{attrs:{data_info:t.data_info},on:{showAgain:t.showAgain}},[t._v(t._s(t.isCreate?"新增客服消息":"编辑客服消息"))])],1)},staticRenderFns:[]};var I={name:"ghManagement",components:{sliderBar:o,tuoguan:w,sendMessage:a("VU/8")(C,M,!1,function(t){a("1lW8")},"data-v-d4ab67e2",null).exports,menuSetting:D},data:function(){return{showIndex:0,sliderBarList:[{classname:"el-icon-menu",title:"公号托管"},{classname:"el-icon-setting",title:"设置菜单栏"},{classname:"el-icon-message",title:"回复消息"}]}},methods:{select:function(t){this.showIndex=t}}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gh-management"},[a("slider-bar",{attrs:{sliderBar:t.sliderBarList},on:{select:t.select}}),t._v(" "),0==t.showIndex?a("tuoguan"):t._e(),t._v(" "),1==t.showIndex?a("menu-setting"):t._e(),t._v(" "),2==t.showIndex?a("send-message"):t._e()],1)},staticRenderFns:[]};var L=a("VU/8")(I,F,!1,function(t){a("W+QA")},"data-v-434540f2",null).exports,T={props:{str:String,method:String,classSwitch:Boolean},data:function(){return{form:{updateAt:"",pagename:"",class:""},classShow:!0}},mounted:function(){this.form=r.state.pagesData,this.classShow=this.classSwitch},methods:{close:function(){r.commit(this.method,!1)},save:function(){var t=this,e=r.state.isAddSwitch,a=r.state.isEditSwitch;1==e&&0==a&&(this.form.pagename&&this.form.class?d()({url:"/add_page",method:"get",withCredentials:!1,params:{pagename:this.form.pagename,class:this.form.class}}).then(function(e){e.data.success?(t.$message({type:"success",message:e.data.success}),t.$emit("edit"),r.commit(t.method,!1)):t.$message.error(e.data.err)}):this.$message.error("输入有误，请重新输入")),0==e&&1==a&&(this.form.pagename&&this.form.class?d()({url:"/update_page",method:"get",withCredentials:!1,params:{id:this.form._id,pagename:this.form.pagename,class:this.form.class}}).then(function(e){e.data.success&&(t.$message({type:"success",message:e.data.success}),t.$emit("edit"),r.commit(t.method,!1),console.log(t.method))}):this.$message.error("输入有误，请重新输入"))}}},A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("div",{staticClass:"header"},[a("h3",[t._v(t._s(t.str)+"爆款单页")]),t._v(" "),a("div",{staticClass:"close",on:{click:t.close}},[t._v("×")])]),t._v(" "),a("div",{staticClass:"page"},[a("el-form-item",{staticStyle:{},attrs:{rules:[{required:!0,message:"单页名称不能为空"}],label:"单页名称",prop:"pagename"}},[a("el-input",{staticStyle:{width:"300px",float:"none"},model:{value:t.form.pagename,callback:function(e){t.$set(t.form,"pagename",e)},expression:"form.pagename"}})],1),t._v(" "),a("el-form-item",{staticStyle:{},attrs:{rules:[{required:!0,message:"class不能为空"}],label:"class",prop:"class"}},[a("el-input",{staticStyle:{width:"300px",float:"none"},attrs:{disabled:!t.classShow},model:{value:t.form.class,callback:function(e){t.$set(t.form,"class",e)},expression:"form.class"}})],1),t._v(" "),t.classShow?a("span",{staticClass:"tip"},[t._v("————class请谨慎填写，不能修改————")]):t._e()],1),t._v(" "),a("div",{staticClass:"save"},[a("el-button",{staticStyle:{width:"150px"},attrs:{plain:"",type:"success"},on:{click:t.save}},[t._v("保存")])],1)])],1)},staticRenderFns:[]};var G=a("VU/8")(T,A,!1,function(t){a("x4ie")},"data-v-d0714c32",null).exports,z={props:{row:Object},data:function(){return{form:{updateAt:"",title:"",links:""}}},mounted:function(){this.form=this.row},methods:{close:function(){r.commit("changeUpdateLinksSwitch",!1)},save:function(){var t=this;console.log(this.row),this.form.title&&this.form.links?d()({url:"/fetchlink?action=edit_links",method:"get",withCredentials:!1,params:{title:this.form.title,links:this.form.links,id:this.row._id,class:this.row.class}}).then(function(e){e.data.success?(t.$message({type:"success",message:e.data.success}),d()({url:"/top10/get_one",method:"POST",withCredentials:!1,data:{key:t.form.title,class:t.row.class,url:t.form.links}}).then(function(e){t.$message({type:"success",message:e.data.message}),t.form={}}),t.$emit("edit"),r.commit("changeUpdateLinksSwitch",!1)):t.$message.error(e.data.err)}):this.$message.error("输入有误，请重新输入")}}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"update"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("div",{staticClass:"header"},[a("h3",[t._v("链接修改")]),t._v(" "),a("div",{staticClass:"close",on:{click:t.close}},[t._v("×")])]),t._v(" "),a("div",{staticClass:"page"},[a("el-form-item",{staticStyle:{},attrs:{label:"标题",prop:"title"}},[a("el-input",{staticStyle:{width:"300px",float:"none"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{staticStyle:{},attrs:{label:"链接",prop:"links"}},[a("el-input",{staticStyle:{width:"300px",float:"none"},model:{value:t.form.links,callback:function(e){t.$set(t.form,"links",e)},expression:"form.links"}})],1)],1),t._v(" "),a("div",{staticClass:"save"},[a("el-button",{staticStyle:{width:"150px"},attrs:{plain:"",type:"success"},on:{click:t.save}},[t._v("保存")])],1)])],1)},staticRenderFns:[]};var V=a("VU/8")(z,E,!1,function(t){a("mHFj")},"data-v-59fee2d2",null).exports;window.onbeforeunload=function(){window.location.href="/"};var O={computed:{isUpdateLinksSwitch:function(){return r.state.isUpdateLinksSwitch}},components:{updateLinks:V},data:function(){return{row:{},form:{},linkslist:[],row1:{}}},mounted:function(){function t(t){for(var e=window.document.cookie.split("; "),a=0;a<e.length;a++){var s=e[a].split("=");if(t==s[0])return unescape(s[1])}return null}this.row=r.state.goodsData,this.form.pagename=this.row.pagename;var e=t("classname"),a=t("pagename");this.row.class=e,this.row.pagename=a,this.showLinks()},methods:{edit:function(){this.showLinks()},addGoods:function(){var t=this,e=this.$refs.links.$refs.input.value,a=this.$refs.title.$refs.input.value;""!=e&&""!=a&&d()({url:"/fetchlink/save_links",method:"POST",withCredentials:!1,data:{links:e,class:this.row.class,title:a}}).then(function(s){s.data.success?(t.$message({type:"success",message:s.data.success}),t.showLinks(),d()({url:"/top10/get_one",method:"POST",withCredentials:!1,data:{key:a,class:t.row.class,url:e}}).then(function(e){t.$message({type:"success",message:e.data.message}),t.form={}})):t.$message.error(s.data.err)})},deleteLinks:function(t,e){var a=this;d()({url:"/fetchlink?action=delete_links",method:"get",withCredentials:!1,params:{class:e.class,id:e._id}}).then(function(t){t.data.success&&(1==t.data.result.length?(a.$message({type:"success",message:"已删除最后一条数据"}),a.linkslist=[]):(a.$message({type:"success",message:t.data.success}),a.showLinks()))})},updateLink:function(t,e){this.row1=e,r.commit("changeUpdateLinksSwitch",!0)},showLinks:function(){var t=this;d()({url:"/fetchlink?action=show_links",method:"get",withCredentials:!1,params:{class:this.row.class}}).then(function(e){if(e.data.success){for(var a=e.data.data,s=0;s<a.length;s++)a[s].updateAt=a[s].updateAt.substring(0,10);t.linkslist=a}else t.$message.error(e.data.err)})},close:function(){r.commit("changeAddLinks",!1)}}},R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"update-page"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("div",{staticClass:"header"},[a("h3",[t._v("添加商品")]),t._v(" "),a("div",{staticClass:"close",on:{click:t.close}},[t._v("×")])]),t._v(" "),a("div",{staticClass:"pagename"},[a("el-form-item",{staticStyle:{},attrs:{label:"单页名称",prop:"pagename"}},[t._v("\n                "+t._s(t.row.pagename)+"\n            ")])],1),t._v(" "),a("div",{staticClass:"goods-detail"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"商品名称",prop:"title"}},[a("el-input",{ref:"title",staticStyle:{width:"400px"},attrs:{prop:"title"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"商品链接",prop:"links"}},[a("el-input",{ref:"links",staticStyle:{width:"400px"},attrs:{prop:"links"},model:{value:t.form.links,callback:function(e){t.$set(t.form,"links",e)},expression:"form.links"}})],1),t._v(" "),a("el-button",{staticStyle:{width:"100px",float:"left","margin-left":"10px"},attrs:{plain:"",type:"success"},on:{click:t.addGoods}},[t._v("添加")]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"left"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.linkslist,border:""}},[a("el-table-column",{attrs:{prop:"updateAt",label:"日期",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"links",width:"500",label:"链接"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.updateLink(e.$index,e.row)}}},[t._v("修改链接")]),t._v(" "),a("el-button",{staticStyle:{float:"none"},attrs:{size:"small",type:"danger"},on:{click:function(a){t.deleteLinks(e.$index,e.row)}}},[t._v("删除链接")])]}}])})],1)],1)],1)]),t._v(" "),t.isUpdateLinksSwitch?a("div",{staticClass:"modal"},[a("update-links",{attrs:{row:t.row1},on:{edit:t.edit}})],1):t._e()],1)},staticRenderFns:[]};var P=a("VU/8")(O,R,!1,function(t){a("hs+D")},"data-v-0307f74f",null).exports,j={data:function(){return{form:{pagename:"",title:"",token:""},imageUrl:"",pictUrl:""}},mounted:function(){this.form=r.state.goodsListData},methods:{handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw),this.pictUrl=t.filename},cancel:function(){r.commit("changeUpdateGoodsSwitch",!1)},saveGood:function(){var t=this;""==this.pictUrl&&(this.pictUrl=this.form.pictUrl),d()({url:"/goodsinfo?action=update_goods",method:"get",withCredentials:!1,params:{class:this.form.class,id:this.form._id,pictUrl:"/uploads/"+this.pictUrl,title:this.form.title,token:this.form.token}}).then(function(e){e.data.success?(t.$message({type:"success",message:"商品信息修改成功"}),t.$emit("edit"),r.commit("changeUpdateGoodsSwitch",!1)):t.$message.error(e.data.err)})}}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"update-goods"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("div",{staticClass:"goods-desc"},[a("el-form-item",{attrs:{rules:[{required:!0}],label:"图片",prop:"imageFile"}},[a("el-upload",{attrs:{enctype:"multipart/form-data",action:"http://www.rrdtjj.top/goodsinfo/upload",name:"imageFile","on-success":t.handleAvatarSuccess}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{rules:[{required:!0,message:"商品名称不能为空"}],label:"商品名称",prop:"title"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{prop:"title"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{attrs:{rules:[{required:!0,message:"淘口令不能为空"}],label:"淘口令",prop:"token"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{prop:"token"},model:{value:t.form.token,callback:function(e){t.$set(t.form,"token",e)},expression:"form.token"}})],1),t._v(" "),a("div",{staticClass:"submit-btn"},[a("el-button",{staticStyle:{width:"150px"},attrs:{plain:"",type:"danger"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("el-button",{staticStyle:{width:"150px"},attrs:{plain:"",type:"success"},on:{click:t.saveGood}},[t._v("保存")])],1)],1)])],1)},staticRenderFns:[]};var N=a("VU/8")(j,B,!1,function(t){a("vIky")},"data-v-21b400eb",null).exports;window.onbeforeunload=function(){window.location.href="/"};var q={computed:{isUpdateGoodsSwitch:function(){return r.state.isUpdateGoodsSwitch}},components:{updateGoods:N},data:function(){return{row:{},goodslist:[]}},mounted:function(){function t(t){for(var e=window.document.cookie.split("; "),a=0;a<e.length;a++){var s=e[a].split("=");if(t==s[0])return unescape(s[1])}return null}this.row=r.state.goodsData;var e=t("classname"),a=t("pagename");this.row.class=e,this.row.pagename=a,this.showInfo(this.row)},methods:{removeGoods:function(t){this.goodslist.splice(t,1)},edit:function(){this.showInfo(this.row),console.log(this.row)},close:function(){r.commit("changeGoodsShow",!1)},updateInfo:function(t,e){r.state.isUpdateGoodsSwitch=!0,r.commit("setGoodsListData",e)},deleteOne:function(t,e){var a=this;d()({url:"/goodsinfo?action=delete_one",method:"get",withCredentials:!1,params:{class:e.class,id:e._id}}).then(function(t){t.data.success&&(console.log(t.data),1==t.data.result.length?(a.$message({type:"success",message:"已删除最后一条数据"}),a.goodslist=[]):(a.$message({type:"success",message:t.data.success}),a.showInfo(a.row)))})},showInfo:function(t){var e=this;d()({url:"/goodsinfo?action=show_goods",method:"get",withCredentials:!1,params:{class:t.class}}).then(function(t){if(t.data.success){for(var a=t.data.data,s=0;s<a.length;s++)a[s].updateAt=a[s].updateAt.substring(0,10);e.goodslist=a}else e.$message.error(t.data.err)})}}},W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"update-page"},[a("el-form",{ref:"form",attrs:{"label-width":"80px"}},[a("div",{staticClass:"header"},[a("h3",[t._v("商品信息展示")]),t._v(" "),a("div",{staticClass:"close",on:{click:t.close}},[t._v("×")])]),t._v(" "),a("div",{staticClass:"pagename"},[a("el-form-item",{staticStyle:{},attrs:{label:"单页名称",prop:"pagename"}},[t._v("\n                "+t._s(t.row.pagename)+"\n            ")])],1),t._v(" "),a("div",{staticClass:"goods-detail"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.goodslist,border:""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"updateAt",label:"日期",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"title",label:"标题",width:"250"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"token",width:"150",label:"淘口令"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"pictUrl",width:"477",label:"图片地址"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.updateInfo(e.$index,e.row)}}},[t._v("修改商品信息")]),t._v(" "),a("el-button",{staticStyle:{float:"none"},attrs:{size:"small",type:"danger"},on:{click:function(a){t.deleteOne(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),t.isUpdateGoodsSwitch?a("div",{staticClass:"goods-update"},[a("update-goods",{on:{edit:t.edit}})],1):t._e()])],1)},staticRenderFns:[]};var X=a("VU/8")(q,W,!1,function(t){a("sSYG")},"data-v-73910a28",null).exports,Q=a("TQvf"),Y=(new(a.n(Q).a)(".copyBtn"),{computed:{isUpdateSwitch:function(){return r.state.isUpdateSwitch},isAddSwitch:function(){return r.state.isAddSwitch},isEditSwitch:function(){return r.state.isEditSwitch},addLinksShow:function(){return r.state.addLinksShow},goodsShow:function(){return r.state.goodsShow}},components:{Page:G,addLinks:P,showGoods:X},data:function(){return{activeIndex:"1",tableData:[],addStr:"新增",editStr:"修改",addMethod:"changeAddSwitch",editMethod:"changeEditSwitch",copyTxt:"http://www.rrdtjj.top/top10.html?class=",classSwitch1:!0,classSwitch2:!1}},mounted:function(){this.showPage()},methods:{addPage:function(){r.commit("changeAddSwitch",!0)},copy:function(){this.$message({type:"success",message:"复制成功"})},edit:function(){this.showPage()},isShow:function(t){this.isModal=t},addGoods:function(t,e){r.commit("setGoodsData",e),r.commit("changeAddLinks",!0);var a=e.class,s=e.pagename,n=new Date;n.setTime(n.getTime()+864e5),window.document.cookie="classname="+a+";path=/;expires="+n.toGMTString(),window.document.cookie="pagename="+s+";path=/;expires="+n.toGMTString()},showGoods:function(t,e){r.commit("setGoodsData",e);var a=e.class,s=e.pagename,n=new Date;n.setTime(n.getTime()+864e5),window.document.cookie="classname="+a+";path=/;expires="+n.toGMTString(),window.document.cookie="pagename="+s+";path=/;expires="+n.toGMTString(),r.commit("changeGoodsShow",!0)},editPage:function(t,e){r.commit("changeEditSwitch",!0),r.state.pagesData=e},showPage:function(){var t=this;d()({url:"/show_page",method:"get",withCredentials:!1}).then(function(e){if(e.data.success){for(var a=e.data.data,s=0;s<a.length;s++)a[s].updateAt=a[s].updateAt.substring(0,10);t.tableData=a}else t.$message.error(e.data.err)})}}}),H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.addLinksShow||t.goodsShow?t._e():a("div",{staticClass:"baokuan"},[a("div",{staticClass:"add-page"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.addPage}},[t._v("新增爆款单页")])],1),t._v(" "),a("div",{staticClass:"lists"},[a("el-table",{staticStyle:{"z-index":"0"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{"head-align":"center",align:"center",prop:"updateAt",label:"日期",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{"head-align":"center",align:"center",prop:"pagename",label:"单页名称",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{"head-align":"center",align:"center",prop:"visited",width:"120",label:"浏览人数"}}),t._v(" "),a("el-table-column",{attrs:{"head-align":"center",align:"center",prop:"copied",width:"120",label:"复制口令人数"}}),t._v(" "),a("el-table-column",{attrs:{"head-align":"center",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"copyBtn",attrs:{size:"small",type:"success","data-clipboard-text":t.copyTxt+e.row.class},on:{click:t.copy}},[t._v("复制链接")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.addGoods(e.$index,e.row)}}},[t._v("添加商品链接")]),t._v(" "),a("el-button",{staticStyle:{float:"none"},attrs:{size:"small",type:"danger"},on:{click:function(a){t.editPage(e.$index,e.row)}}},[t._v("修改单页名称")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.showGoods(e.$index,e.row)}}},[t._v("商品信息")])]}}])})],1)],1),t._v(" "),t.isAddSwitch?a("div",{staticClass:"modal"},[a("page",{attrs:{str:t.addStr,method:t.addMethod,classSwitch:t.classSwitch1},on:{edit:t.edit}})],1):t._e(),t._v(" "),t.isEditSwitch?a("div",{staticClass:"modal"},[a("page",{attrs:{str:t.editStr,method:t.editMethod,classSwitch:t.classSwitch2},on:{edit:t.edit}})],1):t._e()]),t._v(" "),t.addLinksShow?a("add-links"):t._e(),t._v(" "),t.goodsShow?a("show-goods"):t._e()],1)},staticRenderFns:[]};var K={components:{ghManagement:L,baokuan:a("VU/8")(Y,H,!1,function(t){a("qIXM")},"data-v-17e73606",null).exports},data:function(){return{activeIndex:"1"}},methods:{handleSelect:function(t,e){this.activeIndex=t}}},Z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"nav"},[a("h2",{staticClass:"logo"},[t._v("后台管理系统")]),t._v(" "),a("el-menu",{staticClass:"el-menu",attrs:{"default-active":t.activeIndex,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:"1"}},[t._v("公号管理")]),t._v(" "),a("el-menu-item",{attrs:{index:"2"}},[t._v("爆款单页")])],1)],1),t._v(" "),"1"==t.activeIndex?a("gh-management"):t._e(),t._v(" "),"2"==t.activeIndex?a("baokuan"):t._e()],1)},staticRenderFns:[]};var J=a("VU/8")(K,Z,!1,function(t){a("UvnX")},"data-v-3563517e",null).exports,tt=a("/ocq");s.default.use(tt.a);var et=new tt.a({mode:"history",base:Object({NODE_ENV:"production"}).BASE_URL,routes:[{path:"/management",name:"home",component:J}]}),at=a("zL8q"),st=a.n(at);a("tvR6");s.default.use(st.a);a("j1ja");s.default.config.productionTip=!1,new s.default({router:et,store:r,render:function(t){return t(J)}}).$mount("#app")},PUc4:function(t,e){},Q3ou:function(t,e){},UvnX:function(t,e){},"W+QA":function(t,e){},YVfP:function(t,e){},ZWod:function(t,e){},dKiV:function(t,e){},fUew:function(t,e){},"hs+D":function(t,e){},mHFj:function(t,e){},qIXM:function(t,e){},sSYG:function(t,e){},tvR6:function(t,e){},vIky:function(t,e){},x4ie:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c0858a22447308ac16f8.js.map